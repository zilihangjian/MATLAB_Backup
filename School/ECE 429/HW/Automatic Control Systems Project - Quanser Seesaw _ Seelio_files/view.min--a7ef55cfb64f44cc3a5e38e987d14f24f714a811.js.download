!function e(t,o,i){function s(r,a){if(!o[r]){if(!t[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(n)return n(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var u=o[r]={exports:{}};t[r][0].call(u.exports,function(e){var o=t[r][1][e];return s(o?o:e)},u,u.exports,e,t,o,i)}return o[r].exports}for(var n="function"==typeof require&&require,r=0;r<i.length;r++)s(i[r]);return s}({"/opt/seelio/libs/configuratorClientSide.coffee":[function(e,t,o){var i,s,n,r,a,l,c,u;a=e("underscore"),("undefined"!=typeof window&&null!==window?window.process:void 0)&&a.extend(process.env,window.process.env),("undefined"!=typeof process&&null!==process&&null!=(l=process.env)?l.NODE_LOCALE:void 0)?(r=e(__dirname+("/../config/locales/"+process.env.NODE_LOCALE+".json")),r=r.domain):r="seelio.com",n="production"===("undefined"!=typeof process&&null!==process&&null!=(c=process.env)?c.NODE_CLIENTSIDE_CONFIG:void 0)?{segmentio:{apiKey:"0v406ljs1q"},server:{name:"https://"+r}}:"staging"===("undefined"!=typeof process&&null!==process&&null!=(u=process.env)?u.NODE_CLIENTSIDE_CONFIG:void 0)?{segmentio:{apiKey:"c6o4nrkud0"},server:{name:"https://stage."+r}}:{segmentio:{apiKey:"6hs1cde3g2"},server:{name:"https://localhost:3000/"}},i=n,i.googleDeveloperApiKey="AIzaSyBMO9ze5aBlsHXvjTRlDkWLA-Xrm0pFl20",s={get:function(e){var t,o,s,n,r;if(!e)return a.clone(i);for(s=e.split(":"),t=i,n=0,r=s.length;r>n;n++)o=s[n],t=t&&a.has(t,o)?t[o]:null;return t}},t.exports=s},{underscore:"underscore"}],"/opt/seelio/libs/trackerUtils.coffee":[function(e,t,o){var i,s,n,r,a;a=e("underscore"),s=e("./configuratorClientSide"),n=e("moment"),r=o,i="* ",r.getUsertypeFromRoles=function(e){var t,o;return o=["recruiter","administrator","other","student"],t=a.find(o,function(t){return-1!==e.indexOf(t)}),t=t.charAt(0).toUpperCase()+t.slice(1),t||"Guest"},r.getWorkDataForAnalytics=function(e){var t,o,i,r,a,l;return t=e._work,null==t?{}:(o={"Edit Url":s.get("server:name").replace(/\/?$/,"/")+"edit/"+t._id,"View Url":t.full_url,Title:t.title,Description:t.description,"Last Updated":new Date(t.updatedAt),"Last Updated Formatted":n().format("MMMM Do YYYY")},null!=(null!=(i=t.cover)&&null!=(r=i.thumbs)?r.m:void 0)&&(o["Cover Url"]=null!=(a=t.cover)&&null!=(l=a.thumbs)?l.m:void 0),o)},r.getGroupDataForAnalytics=function(e){var t,o;return t=e._group,null==t?(console.log(new Error("Group with id "+e._group+" doesn't exist").stack),{}):o={Name:t.name,URL:t.url}},r.getEducationDataForAnalytics=function(e){var t,o,i;return t=a.find(e,function(e){return e.current}),t||(t=e[0]),null==t?{}:(null!=t.toObject&&(t=t.toObject()),o={"Current University":t.university,"Current University Id":null!=(i=t._university)?i.toString():void 0,"Current Degrees":a.map(t.degrees,function(e){return{Prefix:e.prefix,Field:e.field,School:e.school}}),"Grad Year":t.endYear})},r.getNamespacedProperties=function(e){var t;return t={},a.each(e,function(e,o){return t[i+o]=e}),t}},{"./configuratorClientSide":"/opt/seelio/libs/configuratorClientSide.coffee",moment:"/opt/seelio/node_modules/moment/moment.js",underscore:"underscore"}],"/opt/seelio/node_modules/async/lib/async.js":[function(e,t,o){!function(){function e(e){var t=!1;return function(){if(t)throw new Error("Callback was already called.");t=!0,e.apply(o,arguments)}}var o,i,s={};o=this,null!=o&&(i=o.async),s.noConflict=function(){return o.async=i,s};var n=function(e,t){if(e.forEach)return e.forEach(t);for(var o=0;o<e.length;o+=1)t(e[o],o,e)},r=function(e,t){if(e.map)return e.map(t);var o=[];return n(e,function(e,i,s){o.push(t(e,i,s))}),o},a=function(e,t,o){return e.reduce?e.reduce(t,o):(n(e,function(e,i,s){o=t(o,e,i,s)}),o)},l=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var o in e)e.hasOwnProperty(o)&&t.push(o);return t};"undefined"!=typeof process&&process.nextTick?(s.nextTick=process.nextTick,"function"==typeof setImmediate?(setImmediateWrap=function(e){setImmediate(e)},s.setImmediate=setImmediateWrap):s.setImmediate=s.nextTick):"function"==typeof setImmediate?(s.nextTick=function(e){setImmediate(e)},s.setImmediate=s.nextTick):(s.nextTick=function(e){setTimeout(e,0)},s.setImmediate=s.nextTick),s.each=function(t,o,i){if(i=i||function(){},!t.length)return i();var s=0;n(t,function(n){o(n,e(function(e){e?(i(e),i=function(){}):(s+=1,s>=t.length&&i(null))}))})},s.forEach=s.each,s.eachSeries=function(e,t,o){if(o=o||function(){},!e.length)return o();var i=0,s=function(){t(e[i],function(t){t?(o(t),o=function(){}):(i+=1,i>=e.length?o(null):s())})};s()},s.forEachSeries=s.eachSeries,s.eachLimit=function(e,t,o,i){var s=c(t);s.apply(null,[e,o,i])},s.forEachLimit=s.eachLimit;var c=function(e){return function(t,o,i){if(i=i||function(){},!t.length||0>=e)return i();var s=0,n=0,r=0;!function a(){if(s>=t.length)return i();for(;e>r&&n<t.length;)n+=1,r+=1,o(t[n-1],function(e){e?(i(e),i=function(){}):(s+=1,r-=1,s>=t.length?i():a())})}()}},u=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[s.each].concat(t))}},d=function(e,t){return function(){var o=Array.prototype.slice.call(arguments);return t.apply(null,[c(e)].concat(o))}},h=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[s.eachSeries].concat(t))}},p=function(e,t,o,i){var s=[];t=r(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){o(e.value,function(o,i){s[e.index]=i,t(o)})},function(e){i(e,s)})};s.map=u(p),s.mapSeries=h(p),s.mapLimit=function(e,t,o,i){return f(t)(e,o,i)};var f=function(e){return d(e,p)};s.reduce=function(e,t,o,i){s.eachSeries(e,function(e,i){o(t,e,function(e,o){t=o,i(e)})},function(e){i(e,t)})},s.inject=s.reduce,s.foldl=s.reduce,s.reduceRight=function(e,t,o,i){var n=r(e,function(e){return e}).reverse();s.reduce(n,t,o,i)},s.foldr=s.reduceRight;var m=function(e,t,o,i){var s=[];t=r(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){o(e.value,function(o){o&&s.push(e),t()})},function(e){i(r(s.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};s.filter=u(m),s.filterSeries=h(m),s.select=s.filter,s.selectSeries=s.filterSeries;var v=function(e,t,o,i){var s=[];t=r(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){o(e.value,function(o){o||s.push(e),t()})},function(e){i(r(s.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};s.reject=u(v),s.rejectSeries=h(v);var g=function(e,t,o,i){e(t,function(e,t){o(e,function(o){o?(i(e),i=function(){}):t()})},function(e){i()})};s.detect=u(g),s.detectSeries=h(g),s.some=function(e,t,o){s.each(e,function(e,i){t(e,function(e){e&&(o(!0),o=function(){}),i()})},function(e){o(!1)})},s.any=s.some,s.every=function(e,t,o){s.each(e,function(e,i){t(e,function(e){e||(o(!1),o=function(){}),i()})},function(e){o(!0)})},s.all=s.every,s.sortBy=function(e,t,o){s.map(e,function(e,o){t(e,function(t,i){t?o(t):o(null,{value:e,criteria:i})})},function(e,t){if(e)return o(e);var i=function(e,t){var o=e.criteria,i=t.criteria;return i>o?-1:o>i?1:0};o(null,r(t.sort(i),function(e){return e.value}))})},s.auto=function(e,t){t=t||function(){};var o=l(e);if(!o.length)return t(null);var i={},r=[],c=function(e){r.unshift(e)},u=function(e){for(var t=0;t<r.length;t+=1)if(r[t]===e)return void r.splice(t,1)},d=function(){n(r.slice(0),function(e){e()})};c(function(){l(i).length===o.length&&(t(null,i),t=function(){})}),n(o,function(o){var r=e[o]instanceof Function?[e[o]]:e[o],h=function(e){var r=Array.prototype.slice.call(arguments,1);if(r.length<=1&&(r=r[0]),e){var a={};n(l(i),function(e){a[e]=i[e]}),a[o]=r,t(e,a),t=function(){}}else i[o]=r,s.setImmediate(d)},p=r.slice(0,Math.abs(r.length-1))||[],f=function(){return a(p,function(e,t){return e&&i.hasOwnProperty(t)},!0)&&!i.hasOwnProperty(o)};if(f())r[r.length-1](h,i);else{var m=function(){f()&&(u(m),r[r.length-1](h,i))};c(m)}})},s.waterfall=function(e,t){if(t=t||function(){},e.constructor!==Array){var o=new Error("First argument to waterfall must be an array of functions");return t(o)}if(!e.length)return t();var i=function(e){return function(o){if(o)t.apply(null,arguments),t=function(){};else{var n=Array.prototype.slice.call(arguments,1),r=e.next();r?n.push(i(r)):n.push(t),s.setImmediate(function(){e.apply(null,n)})}}};i(s.iterator(e))()};var b=function(e,t,o){if(o=o||function(){},t.constructor===Array)e.map(t,function(e,t){e&&e(function(e){var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),t.call(null,e,o)})},o);else{var i={};e.each(l(t),function(e,o){t[e](function(t){var s=Array.prototype.slice.call(arguments,1);s.length<=1&&(s=s[0]),i[e]=s,o(t)})},function(e){o(e,i)})}};s.parallel=function(e,t){b({map:s.map,each:s.each},e,t)},s.parallelLimit=function(e,t,o){b({map:f(t),each:c(t)},e,o)},s.series=function(e,t){if(t=t||function(){},e.constructor===Array)s.mapSeries(e,function(e,t){e&&e(function(e){var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),t.call(null,e,o)})},t);else{var o={};s.eachSeries(l(e),function(t,i){e[t](function(e){var s=Array.prototype.slice.call(arguments,1);s.length<=1&&(s=s[0]),o[t]=s,i(e)})},function(e){t(e,o)})}},s.iterator=function(e){var t=function(o){var i=function(){return e.length&&e[o].apply(null,arguments),i.next()};return i.next=function(){return o<e.length-1?t(o+1):null},i};return t(0)},s.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var w=function(e,t,o,i){var s=[];e(t,function(e,t){o(e,function(e,o){s=s.concat(o||[]),t(e)})},function(e){i(e,s)})};s.concat=u(w),s.concatSeries=h(w),s.whilst=function(e,t,o){e()?t(function(i){return i?o(i):void s.whilst(e,t,o)}):o()},s.doWhilst=function(e,t,o){e(function(i){return i?o(i):void(t()?s.doWhilst(e,t,o):o())})},s.until=function(e,t,o){e()?o():t(function(i){return i?o(i):void s.until(e,t,o)})},s.doUntil=function(e,t,o){e(function(i){return i?o(i):void(t()?o():s.doUntil(e,t,o))})},s.queue=function(t,o){function i(e,t,i,r){t.constructor!==Array&&(t=[t]),n(t,function(t){var n={data:t,callback:"function"==typeof r?r:null};i?e.tasks.unshift(n):e.tasks.push(n),e.saturated&&e.tasks.length===o&&e.saturated(),s.setImmediate(e.process)})}void 0===o&&(o=1);var r=0,a={tasks:[],concurrency:o,saturated:null,empty:null,drain:null,push:function(e,t){i(a,e,!1,t)},unshift:function(e,t){i(a,e,!0,t)},process:function(){if(r<a.concurrency&&a.tasks.length){var o=a.tasks.shift();a.empty&&0===a.tasks.length&&a.empty(),r+=1;var i=function(){r-=1,o.callback&&o.callback.apply(o,arguments),a.drain&&a.tasks.length+r===0&&a.drain(),a.process()},s=e(i);t(o.data,s)}},length:function(){return a.tasks.length},running:function(){return r}};return a},s.cargo=function(e,t){var o=!1,i=[],a={tasks:i,payload:t,saturated:null,empty:null,drain:null,push:function(e,o){e.constructor!==Array&&(e=[e]),n(e,function(e){i.push({data:e,callback:"function"==typeof o?o:null}),a.saturated&&i.length===t&&a.saturated()}),s.setImmediate(a.process)},process:function l(){if(!o){if(0===i.length)return void(a.drain&&a.drain());var s="number"==typeof t?i.splice(0,t):i.splice(0),c=r(s,function(e){return e.data});a.empty&&a.empty(),o=!0,e(c,function(){o=!1;var e=arguments;n(s,function(t){t.callback&&t.callback.apply(null,e)}),l()})}},length:function(){return i.length},running:function(){return o}};return a};var k=function(e){return function(t){var o=Array.prototype.slice.call(arguments,1);t.apply(null,o.concat([function(t){var o=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&n(o,function(t){console[e](t)}))}]))}};s.log=k("log"),s.dir=k("dir"),s.memoize=function(e,t){var o={},i={};t=t||function(e){return e};var s=function(){var s=Array.prototype.slice.call(arguments),n=s.pop(),r=t.apply(null,s);r in o?n.apply(null,o[r]):r in i?i[r].push(n):(i[r]=[n],e.apply(null,s.concat([function(){o[r]=arguments;var e=i[r];delete i[r];for(var t=0,s=e.length;s>t;t++)e[t].apply(null,arguments)}])))};return s.memo=o,s.unmemoized=e,s},s.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},s.times=function(e,t,o){for(var i=[],n=0;e>n;n++)i.push(n);return s.map(i,t,o)},s.timesSeries=function(e,t,o){for(var i=[],n=0;e>n;n++)i.push(n);return s.mapSeries(i,t,o)},s.compose=function(){var e=Array.prototype.reverse.call(arguments);return function(){var t=this,o=Array.prototype.slice.call(arguments),i=o.pop();s.reduce(e,o,function(e,o,i){o.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);i(e,t)}]))},function(e,o){i.apply(t,[e].concat(o))})}};var y=function(e,t){var o=function(){var o=this,i=Array.prototype.slice.call(arguments),s=i.pop();return e(t,function(e,t){e.apply(o,i.concat([t]))},s)};if(arguments.length>2){var i=Array.prototype.slice.call(arguments,2);return o.apply(this,i)}return o};s.applyEach=u(y),s.applyEachSeries=h(y),s.forever=function(e,t){function o(i){if(i){if(t)return t(i);throw i}e(o)}o()},"undefined"!=typeof define&&define.amd?define([],function(){return s}):"undefined"!=typeof t&&t.exports?t.exports=s:o.async=s}()},{}],"/opt/seelio/node_modules/browser-request/index.js":[function(e,t,o){!function(e,i){"function"==typeof define&&define.amd?define([],i):"object"==typeof o?t.exports=i():e.returnExports=i()}(this,function(){function e(s,n){if("function"!=typeof n)throw new Error("Bad callback given: "+n);if(!s)throw new Error("No options given");var a=s.onResponse;if(s="string"==typeof s?{uri:s}:JSON.parse(JSON.stringify(s)),s.onResponse=a,s.verbose&&(e.log=i()),s.url&&(s.uri=s.url,delete s.url),!s.uri&&""!==s.uri)throw new Error("options.uri is a required argument");if("string"!=typeof s.uri)throw new Error("options.uri must be a string");for(var l=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],c=0;c<l.length;c++)if(s[l[c]])throw new Error("options."+l[c]+" is not supported");if(s.callback=n,s.method=s.method||"GET",s.headers=s.headers||{},s.body=s.body||null,s.timeout=s.timeout||e.DEFAULT_TIMEOUT,s.headers.host)throw new Error("Options.headers.host is not supported");s.json&&(s.headers.accept=s.headers.accept||"application/json","GET"!==s.method&&(s.headers["content-type"]="application/json"),"boolean"!=typeof s.json?s.body=JSON.stringify(s.json):"string"!=typeof s.body&&(s.body=JSON.stringify(s.body)));var u=function(e){var t=[];for(var o in e)e.hasOwnProperty(o)&&t.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return t.join("&")};if(s.qs){var d="string"==typeof s.qs?s.qs:u(s.qs);-1!==s.uri.indexOf("?")?s.uri=s.uri+"&"+d:s.uri=s.uri+"?"+d}var h=function(e){var t={};t.boundry="-------------------------------"+Math.floor(1e9*Math.random());var o=[];for(var i in e)e.hasOwnProperty(i)&&o.push("--"+t.boundry+'\nContent-Disposition: form-data; name="'+i+'"\n\n'+e[i]+"\n");return o.push("--"+t.boundry+"--"),t.body=o.join(""),t.length=t.body.length,t.type="multipart/form-data; boundary="+t.boundry,t};if(s.form){if("string"==typeof s.form)throw"form name unsupported";if("POST"===s.method){var p=(s.encoding||"application/x-www-form-urlencoded").toLowerCase();switch(s.headers["content-type"]=p,p){case"application/x-www-form-urlencoded":s.body=u(s.form).replace(/%20/g,"+");break;case"multipart/form-data":var f=h(s.form);s.body=f.body,s.headers["content-type"]=f.type;break;default:throw new Error("unsupported encoding:"+p)}}}return s.onResponse=s.onResponse||o,s.onResponse===!0&&(s.onResponse=n,s.callback=o),!s.headers.authorization&&s.auth&&(s.headers.authorization="Basic "+r(s.auth.username+":"+s.auth.password)),t(s)}function t(t){function o(){d=!0;var o=new Error("ETIMEDOUT");return o.code="ETIMEDOUT",o.duration=t.timeout,e.log.error("Timeout",{id:u._id,milliseconds:t.timeout}),t.callback(o,u)}function i(o){if(d)return e.log.debug("Ignoring timed out state change",{state:u.readyState,id:u.id});if(e.log.debug("State change",{state:u.readyState,id:u.id,timed_out:d}),u.readyState===a.OPENED){e.log.debug("Request started",{id:u.id});for(var i in t.headers)u.setRequestHeader(i,t.headers[i])}else u.readyState===a.HEADERS_RECEIVED?s():u.readyState===a.LOADING?(s(),r()):u.readyState===a.DONE&&(s(),r(),l())}function s(){if(!m.response){if(m.response=!0,e.log.debug("Got response",{id:u.id,status:u.status}),clearTimeout(u.timeoutTimer),u.statusCode=u.status,h&&0==u.statusCode){var o=new Error("CORS request rejected: "+t.uri);return o.cors="rejected",m.loading=!0,m.end=!0,t.callback(o,u)}t.onResponse(null,u)}}function r(){m.loading||(m.loading=!0,e.log.debug("Response body loading",{id:u.id}))}function l(){if(!m.end){if(m.end=!0,e.log.debug("Request done",{id:u.id}),u.body=u.responseText,t.json)try{u.body=JSON.parse(u.responseText)}catch(o){return t.callback(o,u)}t.callback(null,u,u.body)}}var u=new a,d=!1,h=n(t.uri),p="withCredentials"in u;if(c+=1,u.seq_id=c,u.id=c+": "+t.method+" "+t.uri,u._id=u.id,h&&!p){var f=new Error("Browser does not support cross-origin request: "+t.uri);return f.cors="unsupported",t.callback(f,u)}u.timeoutTimer=setTimeout(o,t.timeout);var m={response:!1,loading:!1,end:!1};return u.onreadystatechange=i,u.open(t.method,t.uri,!0),h&&(u.withCredentials=!!t.withCredentials),u.send(t.body),u}function o(){}function i(){var e,t,i={},n=["trace","debug","info","warn","error"];for(t=0;t<n.length;t++)e=n[t],i[e]=o,"undefined"!=typeof console&&console&&console[e]&&(i[e]=s(console,e));return i}function s(e,t){function o(o,i){return"object"==typeof i&&(o+=" "+JSON.stringify(i)),e[t].call(e,o)}return o}function n(e){var t,o=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{t=location.href}catch(i){t=document.createElement("a"),t.href="",t=t.href}var s=o.exec(t.toLowerCase())||[],n=o.exec(e.toLowerCase()),r=!(!n||n[1]==s[1]&&n[2]==s[2]&&(n[3]||("http:"===n[1]?80:443))==(s[3]||("http:"===s[1]?80:443)));return r}function r(e){var t,o,i,s,n,r,a,l,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u=0,d=0,h="",p=[];if(!e)return e;do t=e.charCodeAt(u++),o=e.charCodeAt(u++),i=e.charCodeAt(u++),l=t<<16|o<<8|i,s=l>>18&63,n=l>>12&63,r=l>>6&63,a=63&l,p[d++]=c.charAt(s)+c.charAt(n)+c.charAt(r)+c.charAt(a);while(u<e.length);switch(h=p.join(""),e.length%3){case 1:h=h.slice(0,-2)+"==";break;case 2:h=h.slice(0,-1)+"="}return h}var a=XMLHttpRequest;if(!a)throw new Error("missing XMLHttpRequest");e.log={trace:o,debug:o,info:o,warn:o,error:o};var l=18e4,c=0;e.withCredentials=!1,e.DEFAULT_TIMEOUT=l,e.defaults=function(t,o){var i=function(e){var o=function(o,i){o="string"==typeof o?{uri:o}:JSON.parse(JSON.stringify(o));for(var s in t)void 0===o[s]&&(o[s]=t[s]);return e(o,i)};return o},s=i(e);return s.get=i(e.get),s.post=i(e.post),s.put=i(e.put),s.head=i(e.head),s};var u=["get","put","post","head"];return u.forEach(function(t){var o=t.toUpperCase(),i=t.toLowerCase();e[i]=function(t){"string"==typeof t?t={method:o,uri:t}:(t=JSON.parse(JSON.stringify(t)),t.method=o);var i=[t].concat(Array.prototype.slice.apply(arguments,[1]));return e.apply(this,i)}}),e.couch=function(t,i){function s(e,t,o){if(e)return i(e,t,o);if((t.statusCode<200||t.statusCode>299)&&o.error){e=new Error("CouchDB error: "+(o.error.reason||o.error.error));for(var s in o)e[s]=o[s];return i(e,t,o)}return i(e,t,o)}"string"==typeof t&&(t={uri:t}),t.json=!0,t.body&&(t.json=t.body),delete t.body,i=i||o;var n=e(t,s);return n},e})},{}],"/opt/seelio/node_modules/browserify/node_modules/events/events.js":[function(e,t,o){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(e){return"function"==typeof e}function n(e){return"number"==typeof e}function r(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if(!n(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,o,i,n,l,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(o=this._events[e],a(o))return!1;if(s(o))switch(arguments.length){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:n=Array.prototype.slice.call(arguments,1),o.apply(this,n)}else if(r(o))for(n=Array.prototype.slice.call(arguments,1),c=o.slice(),i=c.length,l=0;i>l;l++)c[l].apply(this,n);return!0},i.prototype.addListener=function(e,t){var o;if(!s(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,s(t.listener)?t.listener:t),this._events[e]?r(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,r(this._events[e])&&!this._events[e].warned&&(o=a(this._maxListeners)?i.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){function o(){this.removeListener(e,o),i||(i=!0,t.apply(this,arguments))}if(!s(t))throw TypeError("listener must be a function");var i=!1;return o.listener=t,this.on(e,o),this},i.prototype.removeListener=function(e,t){var o,i,n,a;if(!s(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=this._events[e],n=o.length,i=-1,o===t||s(o.listener)&&o.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(o)){for(a=n;a-- >0;)if(o[a]===t||o[a].listener&&o[a].listener===t){i=a;break}if(0>i)return this;1===o.length?(o.length=0,delete this._events[e]):o.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,o;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(o=this._events[e],s(o))this.removeListener(e,o);else if(o)for(;o.length;)this.removeListener(e,o[o.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?s(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(s(t))return 1;if(t)return t.length}return 0},i.listenerCount=function(e,t){return e.listenerCount(t)}},{}],"/opt/seelio/node_modules/inherits/inherits_browser.js":[function(e,t,o){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var o=function(){};o.prototype=t.prototype,e.prototype=new o,e.prototype.constructor=e}},{}],"/opt/seelio/node_modules/lib/autolinker.js":[function(e,t,o){var i={htmlRegex:/<(\/)?(\w+)(?:(?:\s+\w+(?:\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\/?>/g,prefixRegex:/^(https?:\/\/)?(www\.)?/,link:function(e,t){function o(e){return e=e.replace(a,function(e,t,o,s,n,r){var a=t,f=o,m=s,v=n,g=r,b="",w="",k=[],y=e.charAt(e.length-1);if(")"===y){var _=e.match(/\(/g),C=e.match(/\)/g),S=_&&_.length||0,x=C&&C.length||0;x>S&&(e=e.substr(0,e.length-1),w=")")}var T=e,j=e;return a&&!d||v&&!h||g&&!p?b+j+w:(a?(b=f,T="https://twitter.com/"+m,j="@"+m):v?(T="mailto:"+v,j=v):/^[A-Za-z]{3,9}:/i.test(T)||(T="http://"+T),c&&(j=j.replace(i.prefixRegex,"")),"/"===j.charAt(j.length-1)&&(j=j.slice(0,-1)),k.push('href="'+T+'"'),l&&k.push('target="_blank"'),u&&j.length>u&&(j=j.substring(0,u-2)+".."),b+"<a "+k.join(" ")+">"+j+"</a>"+w)})}t=t||{};for(var s,n,r=i.htmlRegex,a=i.matcherRegex,l=("newWindow"in t?t.newWindow:!0),c=("stripPrefix"in t?t.stripPrefix:!0),u=t.truncate,d=("twitter"in t?t.twitter:!0),h=("email"in t?t.email:!0),p=("urls"in t?t.urls:!0),f=0,m="",v=0;null!==(s=r.exec(e));){var g=s[0],b=s[2],w=!!s[1];n=e.substring(f,s.index),f=s.index+g.length,"a"===b?w?(v--,0===v&&(m+=n)):(v++,m+=o(n)):0===v&&(m+=o(n)),m+=g}return f<e.length&&(m+=o(e.substring(f))),m}};i.matcherRegex=/((^|\s)@(\w{1,15}))|((?:[\-;:&=\+\$,\w\.]+@)[A-Za-z0-9\.\-]*[A-Za-z0-9\-]\.(?:international|construction|contractors|enterprises|photography|productions|foundation|immobilien|industries|management|properties|technology|christmas|community|directory|education|equipment|institute|marketing|solutions|vacations|bargains|boutique|builders|catering|cleaning|clothing|computer|democrat|diamonds|graphics|holdings|lighting|partners|plumbing|supplies|training|ventures|academy|careers|company|cruises|domains|exposed|flights|florist|gallery|guitars|holiday|kitchen|neustar|okinawa|recipes|rentals|reviews|shiksha|singles|support|systems|agency|berlin|camera|center|coffee|condos|dating|estate|events|expert|futbol|kaufen|luxury|maison|monash|museum|nagoya|photos|repair|report|social|supply|tattoo|tienda|travel|viajes|villas|vision|voting|voyage|actor|build|cards|cheap|codes|dance|email|glass|house|mango|ninja|parts|photo|shoes|solar|today|tokyo|tools|watch|works|aero|arpa|asia|best|bike|blue|buzz|camp|club|cool|coop|farm|fish|gift|guru|info|jobs|kiwi|kred|land|limo|link|menu|mobi|moda|name|pics|pink|post|qpon|rich|ruhr|sexy|tips|vote|voto|wang|wien|wiki|zone|bar|bid|biz|cab|cat|ceo|com|edu|gov|int|kim|mil|net|onl|org|pro|pub|red|tel|uno|wed|xxx|xyz|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)\b)|((?:(?:(?:[A-Za-z]{3,9}:(?:\/\/)?)[A-Za-z0-9\.\-]*[A-Za-z0-9\-])|(?:(?:www\.)[A-Za-z0-9\.\-]*[A-Za-z0-9\-])|(?:[A-Za-z0-9\.\-]*[A-Za-z0-9\-]\.(?:international|construction|contractors|enterprises|photography|productions|foundation|immobilien|industries|management|properties|technology|christmas|community|directory|education|equipment|institute|marketing|solutions|vacations|bargains|boutique|builders|catering|cleaning|clothing|computer|democrat|diamonds|graphics|holdings|lighting|partners|plumbing|supplies|training|ventures|academy|careers|company|cruises|domains|exposed|flights|florist|gallery|guitars|holiday|kitchen|neustar|okinawa|recipes|rentals|reviews|shiksha|singles|support|systems|agency|berlin|camera|center|coffee|condos|dating|estate|events|expert|futbol|kaufen|luxury|maison|monash|museum|nagoya|photos|repair|report|social|supply|tattoo|tienda|travel|viajes|villas|vision|voting|voyage|actor|build|cards|cheap|codes|dance|email|glass|house|mango|ninja|parts|photo|shoes|solar|today|tokyo|tools|watch|works|aero|arpa|asia|best|bike|blue|buzz|camp|club|cool|coop|farm|fish|gift|guru|info|jobs|kiwi|kred|land|limo|link|menu|mobi|moda|name|pics|pink|post|qpon|rich|ruhr|sexy|tips|vote|voto|wang|wien|wiki|zone|bar|bid|biz|cab|cat|ceo|com|edu|gov|int|kim|mil|net|onl|org|pro|pub|red|tel|uno|wed|xxx|xyz|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)\b))(?:[-A-Za-z0-9+&@#\/%?=~_()|!:,.;]*[-A-Za-z0-9+&@#\/%=~_()|])?)/g,t.exports=i},{}],"/opt/seelio/node_modules/lib/backboneUtils.coffee":[function(e,t,o){var i,s,n;n=e("underscore"),i=e("backbone"),s={historyStart:function(e){return null==e&&(e={}),window.navigator.appVersion.match(/Trident\/5.0/)?i.history.start(e):(e=n.extend(e,{pushState:!0}),i.history.start(e))}},t.exports=s},{backbone:"backbone",underscore:"underscore"}],"/opt/seelio/node_modules/lib/date-formats.coffee":[function(e,t,o){var i;i="undefined"!=typeof e&&null!==e?e("moment"):window.moment,i.seelio={dateAtHourMinuteString:function(e){return i(e).format("l [at] LT")},fullDate:function(e){return i(e).format("dddd, MMMM D, YYYY h:mm:ss a")}},null!=("undefined"!=typeof t&&null!==t?t.exports:void 0)&&(t.exports=i)},{moment:"/opt/seelio/node_modules/moment/moment.js"}],"/opt/seelio/node_modules/lib/form_data.coffee":[function(e,t,o){var i,s,n,r;i=e("jquery"),r=e("underscore"),n=function(e,t){var o,s,n;return"string"==typeof e&&(e=i(e)),o={},t=null!=t?t:{},n=function(e){var i,n,r,a,l,c,u;if(n=void 0,a=void 0,i=void 0,u=void 0,l=void 0,"radio"!==e.type||e.checked){if(c=s(e),a=/(.*)\[\]$/.exec(e.name)){if(n=a[1],o[n]||(o[n]=[]),t.ignoreEmptyStrings&&""===c)return;return o[n].push(c)}if(/.*\[.*\]$/.test(e.name)){for(i=e.name.split(/\[|\]\[|\]/),i.pop(),n=i.shift(),u=o[n]=null!=o[n]?o[n]:""===i[0]||/^\d+$/.test(i[0])?[]:{},r=0;r<i.length-1;)l=i[r],""===l?(u.push(""===i[r+1]?[]:{}),u=u[u.length-1]):(u[l]=null!=u[l]?u[l]:""===i[r+1]||/^\d+$/.test(i[r+1])?[]:{},u=u[l]),r++;if(l=i[r],""===l){if(t.ignoreEmptyStrings&&""===c)return;return u[u.length]=c}if(t.ignoreEmptyStrings&&""===c)return;return u[l]=c}if(!t.ignoreEmptyStrings||""!==c)return o[e.name]=c}},s=function(e){var t;return t=void 0,t=i(e).hasClass("select2-offscreen")?Array.isArray(i(e).select2("data"))?r.map(i(e).select2("data"),function(e){return e.id}):null!=i(e).select2("data")?i(e).select2("data").id:"":"checkbox"===e.type?e.checked:i(e).val()},"string"!=typeof e&&null==e.nodeType||(e=i(e)),e.find("input[name]").each(function(){n(this)}),e.find("textarea[name]").each(function(){n(this)}),e.find("select[name]").each(function(){n(this)}),o},s={get:n},t.exports=s},{jquery:"jquery",underscore:"underscore"}],"/opt/seelio/node_modules/lib/jquery.resize.js":[function(e,t,o){!function(e,t,o){"$:nomunge";function i(){s=t[a](function(){n.each(function(){var t=e(this),o=t.width(),i=t.height(),s=e.data(this,c);o===s.w&&i===s.h||t.trigger(l,[s.w=o,s.h=i])}),i()},r[u])}var s,n=e([]),r=e.resize=e.extend(e.resize,{}),a="setTimeout",l="resize",c=l+"-special-event",u="delay",d="throttleWindow";r[u]=250,r[d]=!0,e.event.special[l]={setup:function(){if(!r[d]&&this[a])return!1;var t=e(this);n=n.add(t),e.data(this,c,{w:t.width(),h:t.height()}),1===n.length&&i()},teardown:function(){if(!r[d]&&this[a])return!1;var t=e(this);n=n.not(t),t.removeData(c),n.length||clearTimeout(s)},add:function(t){function i(t,i,n){var r=e(this),a=e.data(this);a.w=i!==o?i:r.width(),a.h=n!==o?n:r.height(),s.apply(this,arguments)}if(!r[d]&&this[a])return!1;var s;return e.isFunction(t)?(s=t,i):(s=t.handler,void(t.handler=i))}}}(jQuery,window)},{}],"/opt/seelio/node_modules/lib/kine-log.coffee":[function(e,t,o){var i,s,n,r,a,l,c;l=e("browser-request"),i="kine-events-cache",s=function(){return r.call(this),
window.addEventListener("unload",c.bind(this)),window.addEventListener("pagehide",c.bind(this)),this},s.prototype.log=function(e){if(null==e.common.event_hierarchy)throw new Error("Event data requires event_hierarchy");return this.unloadHandlerCalled?n([e]):(this.events.push(e),this.flush())},s.prototype.flush=function(){var e,t,o=this;if(0!==this.events.length&&!this.flushing)return this.flushing=!0,e=this.events,this.events=[],t=JSON.stringify(e),l.post({url:"/kine",body:t,json:!0},function(t,i,s){return o.flushing=!1,t?console.error("Kine Log flush failed: "+t):null!=s.errors?(s.errors.forEach(function(t){return o.events.push(e[t])}),console.error("Kine Log flush partially failed.")):void 0})},r=function(){var e;return e=a(),this.events=null!=e?JSON.parse(e):[]},c=function(){this.unloadHandlerCalled||(this.unloadHandlerCalled=!0,n(this.events),delete this.events)},n=function(e){var t;return t=a(),null!=t&&(e=e.concat(JSON.parse(t))),window.localStorage.setItem(i,JSON.stringify(e))},a=function(){var e;return e=window.localStorage.getItem(i),window.localStorage.removeItem(i),e},t.exports=s},{"browser-request":"/opt/seelio/node_modules/browser-request/index.js"}],"/opt/seelio/node_modules/lib/lytic.coffee":[function(e,t,o){var i,s,n,r,a,l,c,u,d,h,p,f,m,v,g,b,w;d=e("../../libs/trackerUtils"),i=e("./kine-log"),f=e("underscore"),n=e("events"),a=e("inherits"),s=function(){return this},a(s,n.EventEmitter),u=new s,"undefined"!=typeof t&&null!==t&&null!=t.exports?(t.exports=u,window.lytic=u):window.lytic=u,r=function(){var e,t;if(null!=window.analytics)return window.analytics;for(window.analytics||(window.analytics=[]),window.analytics.methods=["identify","track","trackLink","trackForm","trackClick","trackSubmit","page","pageview","ab","alias","ready","group","on","once","off"],window.analytics.factory=function(e){return function(){var t;return t=Array.prototype.slice.call(arguments),t.unshift(e),window.analytics.push(t),window.analytics}},e=0;e<window.analytics.methods.length;)t=window.analytics.methods[e],window.analytics[t]=window.analytics.factory(t),e++;return window.analytics.load=function(e){var t,o;return o=document.createElement("script"),o.type="text/javascript",o.async=!0,o.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.io/analytics.js/v1/"+e+"/analytics.min.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(o,t)},window.analytics.SNIPPET_VERSION="2.0.8",window.analytics.load(u.apiKey),window.analytics},u["interface"]={},u.apiKey=e("../../libs/configuratorClientSide").get("segmentio:apiKey"),u.initialize=function(e){var t;return t=this,"function"==typeof Array.prototype.forEach?(this["interface"]=r(),this.kineLog=new i,l.apply(this),c.apply(this),this):void 0},l=function(){var e;return e=this,["identify","track","trackLink","trackForm","trackClick","trackSubmit","page","pageview","ab","alias","ready","group","on","once","off"].forEach(function(t){var o;return"on"===t?(o=e.on,e.on=function(e){return-1===["alias","group","identify","track","page","ready"].indexOf(e)?o.apply(this,arguments):this["interface"].on.apply(this["interface"],arguments)}):e[t]=function(){var e;return e=h(t,arguments),this["interface"][t].apply(this["interface"],e)}})},c=function(){var e;return e=this,e["interface"]._readied?void 0:this.on("ready",function(){return e["interface"]=window.analytics})},p={track:function(e){return e[1]=d.getNamespacedProperties(e[1]),e}},h=function(e,t){return null!=p[e]&&(t=p[e](t)),t},u.getGroupData=function(e){return f.map(e.groups,d.getGroupDataForAnalytics)},u.getEducationData=function(e){return d.getEducationDataForAnalytics(e.education)},u.identifyUser=function(e){var t;return t=this.getEducationData(e),this.identify(e._id.toString(),{email:e.email,name:e.fullName,firstName:e.firstName,lastName:e.lastName,username:e.username,created:new Date(e.createdAt),"User Type":d.getUsertypeFromRoles(e.roles),Groups:JSON.stringify(this.getGroupData(e)),"Current University":t["Current University"],"Current University Id":t["Current University Id"],"Current Degrees":JSON.stringify(t["Current Degrees"]),"Grad Year":t["Grad Year"]})},u.callPageFromGlobals=function(){var e=this;return this.pageCalled=!1,w.call(this),this.on("ready",function(){return m.apply(e)}),setTimeout(function(){return m.apply(e)},5e3)},m=function(){return this.pageCalled?void 0:(this.pageCalled=!0,this.emit("beforePage"),null!=window.pageCategory&&null!=window.pageName?this.page(window.pageCategory,window.pageName):null!=window.pageName?this.page(window.pageName):this.page(),this.emit("afterPage"))},w=function(){return this.kineLog.log({_e_type_:"PageViewEvent",common:{event_hierarchy:{client:"WEB",page:this.getKinePage(),action:"VIEW"}},url:window.location.href,screen_width:window.screen.width,screen_height:window.screen.height,window_inner_width:window.innerWidth,window_inner_height:window.innerHeight,referrer_url:document.referrer}),this.kineLog.flush()},u.trackClicks=function(){return b.call(this)},b=function(){var e=this;return document.addEventListener("click",function(t){return g(t)&&t.target&&null!=u.getKineElement(t.target)?e.kineLog.log({_e_type_:"ClickEvent",common:{event_hierarchy:{client:"WEB",page:e.getKinePage(),section:e.getKineSection(t.target),component:e.getKineComponent(t.target),element:e.getKineElement(t.target),action:"CLICK"}}}):void 0})},u.getKinePage=function(){var e,t,o;return e=(null!=(t=document.querySelectorAll("[data-kine-page]").item(0))?t.getAttribute("data-kine-page"):void 0)||(null!=(o=window.pageCategory)?o.toLowerCase().replace(" ","_","g"):void 0)},u.getKineSection=function(e){var t;return null!=(t=v(e,"data-kine-section"))?t.getAttribute("data-kine-section"):void 0},u.getKineComponent=function(e){var t;return null!=(t=v(e,"data-kine-component"))?t.getAttribute("data-kine-component"):void 0},u.getKineElement=function(e){var t;return null!=(t=v(e,"data-kine-element"))?t.getAttribute("data-kine-element"):void 0},v=function(e,t){if(null!=e&&null!=t)for(;null!=e&&e!==document;){if(null!=e.getAttribute(t))return e;e=e.parentNode}},g=function(e){return null!=e.which},u.initialize()},{"../../libs/configuratorClientSide":"/opt/seelio/libs/configuratorClientSide.coffee","../../libs/trackerUtils":"/opt/seelio/libs/trackerUtils.coffee","./kine-log":"/opt/seelio/node_modules/lib/kine-log.coffee",events:"/opt/seelio/node_modules/browserify/node_modules/events/events.js",inherits:"/opt/seelio/node_modules/inherits/inherits_browser.js",underscore:"underscore"}],"/opt/seelio/node_modules/lib/seelio-flash.coffee":[function(e,t,o){var i,s;s=e("noty"),i={error:function(e,t){var o;return o=7e3,(null!=t?t.persistent:void 0)&&(o=!1),null!=e?(e.match(/502 Bad Gateway/)&&(e="We're sorry but we're having problems processing your request. If the error persists, please contact us at support@seelio.com."),s({type:"error",text:e,dismissQueue:!0,timeout:o})):void 0},info:function(e,t){var o;return o=4e3,(null!=t?t.persistent:void 0)&&(o=!1),e?s({type:"information",text:e,dismissQueue:!0,timeout:o}):void 0},success:function(e,t){var o;return o=4e3,(null!=t?t.persistent:void 0)&&(o=!1),e?s({type:"success",text:e,dismissQueue:!0,timeout:o}):void 0}},t.exports=i},{noty:"noty"}],"/opt/seelio/node_modules/lib/seelio-follow.coffee":[function(e,t,o){var i;i=e("lib/seelio-session"),function(e){var t,o;return o=void 0,t={init:function(t){return t=t||{},o=e.extend(!0,{error:function(e){},source:"undefined",isFollowingUrl:"/student/isFollowing",followStudentUrl:"/student/followStudent",unfollowStudentUrl:"/student/unfollowStudent",followHtml:"<i class='icon-follow'></i> Follow",unfollowHtml:"Unfollow",followingHtml:"Following"},t),t.disabled||null==i.user()._id?this.each(function(){var i;return e(this).html(o.followHtml),e(this).addClass("btn-primary btn"),i=e(this).attr("data-target")||t._target,e(this).attr("href","/login?redirect="+window.location.pathname+"&action=follow&target="+i)}):this.each(function(){var o,s,n,r,a;return n=this,o=e(n),s=o.data("followButton"),s?void 0:(a=o.attr("data-target")||t._target,a&&(null!=(r=i.user())?r._id:void 0)!==a?(o.data("followButton",{following:!1,_target:a}),o.css({display:"block"}),o.followButton("updateStatus",function(){return o.addClass("followButton-container")})):o.remove())})},destroy:function(){return this.each(function(){var t,o;return o=this,t=e(o),t.removeData("followButton"),t.removeClass("followButton-container")})},updateCss:function(){return this.each(function(){var t,i;return i=this,t=e(i),t.data("followButton").following?(t.html(o.followingHtml),t.unbind("click").unbind("hover"),t.removeClass("btn-primary").addClass("btn following btn-default"),t.click(function(e){return t.followButton("unfollow")}),t.hover(function(e){return t.addClass("btn btn-default"),t.html(o.unfollowHtml)},function(e){return t.addClass("btn btn-default"),t.html(o.followingHtml)})):(t.addClass("btn btn-primary"),t.removeClass("following btn-default"),t.html(o.followHtml),t.unbind("click").unbind("hover"),t.click(function(e){return t.followButton("follow")}))})},updateStatus:function(t){return this.each(function(){var i,s;return s=this,i=e(s),e.post(o.isFollowingUrl,{_target:i.data("followButton")._target},function(e){return i.data("followButton")?e.error?o.error(e.error):(i.data("followButton",{following:e.following,_target:i.data("followButton")._target}),i.followButton("updateCss"),t()):void 0})})},follow:function(){return this.each(function(){var t,i;return i=this,t=e(i),t.data("followButton",{following:!0,_target:t.data("followButton")._target}),t.followButton("updateCss"),e.post(o.followStudentUrl,{_target:t.data("followButton")._target},function(e){return t.data("followButton")?e.error?(t.data("followButton",{following:!1,_target:t.data("followButton")._target}),t.followButton("updateCss"),o.error(e.error)):window.mixpanel?window.mixpanel.track("Follow Button Clicked",{action:"Follow",source:o.source}):void 0:void 0})})},unfollow:function(){return this.each(function(){var t,i;return i=this,t=e(i),t.data("followButton",{following:!1,_target:t.data("followButton")._target}),t.followButton("updateCss"),e.post(o.unfollowStudentUrl,{_target:t.data("followButton")._target},function(e){return t.data("followButton")?e.error?(t.data("followButton",{following:!0,_target:t.data("followButton")._target}),t.followButton("updateCss"),o.error(e.error)):window.mixpanel?window.mixpanel.track("Follow Button Clicked",{action:"Unfollow",source:o.source}):void 0:void 0})})}},e.fn.followButton=function(o){return t[o]?t[o].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof o&&o?e.error("Method "+o+" does not exist on jQuery.followButton"):t.init.apply(this,arguments)}}(jQuery)},{"lib/seelio-session":"/opt/seelio/node_modules/lib/seelio-session.coffee"}],"/opt/seelio/node_modules/lib/seelio-like.coffee":[function(e,t,o){var i,s;i=e("jquery"),s=e("lib/seelio-session"),function(e){var t,o;return o=void 0,t={init:function(t){var i;return t=t||{},i=t.tooltipPlacement||"right",t.disabled||null==s.user()._id?this.each(function(){var o,s;return o=e(this),o.addClass("likeButton-container"),"heart"===(null!=t?t.mode:void 0)?o.html('<span class="icon-like"></span> Like'):"icon-only"===(null!=t?t.mode:void 0)?o.html('<span class="icon-like"></span>').attr("title","Like").tooltip({placement:i}):"glyphicon-only"===(null!=t?t.mode:void 0)?o.html('<div class="glyphicon glyphicon-heart"></div>').attr("title","Like").tooltip({placement:i}):o.html('<i class="icon-heart"></i> Like'),s=o.attr("data-target")||t._target,e(this).click(function(e){return window.location.href="/login?redirect=/work/"+s+"&action=like&target="+s})}):(o=e.extend(!0,{error:function(e){},source:"undefined",isLikedUrl:"/isLiked",likeUrl:"/like",unlikeUrl:"/unlike",model:"Work"},t),this.each(function(){var o,s,n,r;return n=this,o=e(n),s=o.data("likeButton"),!s&&(r=o.attr("data-target")||t._target)?(o.data("likeButton",{liked:!1,_target:r,mode:t.mode||"button"}),o.addClass("likeButton-container"),o.tooltip({placement:i}),o.likeButton("updateStatus")):void 0}))},destroy:function(){return this.each(function(){var t,o;return o=this,t=e(o),t.removeData("likeButton"),t.removeClass("likeButton-container")})},updateCss:function(){return this.each(function(){var t,o,i;if(i=this,t=e(i),t.data("likeButton").liked){switch(t.addClass("liked").unbind("click"),t.data("likeButton").mode){case"heart":t.html('<span class="icon-like"></span> Liked'),t.on("mouseenter.likebutton",function(e){return t.html('<span class="icon-like"></span> Unlike')}),t.on("mouseleave.likebutton",function(e){return t.html('<span class="icon-like"></span> Liked')});break;case"icon-only":t.html('<span class="icon-like"></span>').attr("title","Unlike").tooltip("fixTitle"),t.unbind("mouseenter.likebutton"),t.unbind("mouseleave.likebutton");break;case"glyphicon-only":t.html('<div class="glyphicon glyphicon-heart"></div>').attr("title","Unlike").tooltip("fixTitle"),t.unbind("mouseenter.likebutton"),t.unbind("mouseleave.likebutton");break;default:t.html("Liked"),t.on("mouseenter.likebutton",function(e){return t.html("Unlike")}),t.on("mouseleave.likebutton",function(e){return t.html("Liked")})}return t.click(function(e){return t.likeButton("unlike"),t.tooltip("hide")})}switch(t.unbind("click"),t.unbind("mouseenter.likebutton"),t.unbind("mouseleave.likebutton"),t.data("likeButton").mode){case"heart":o='<span class="icon-like"></span> Like';break;case"icon-only":t.html('<span class="icon-like"></span>').attr("title","Like").tooltip("fixTitle");break;case"glyphicon-only":t.html('<div class="glyphicon glyphicon-heart"></div>').attr("title","Like").tooltip("fixTitle");break;default:o='<i class="icon-heart"></i> Like'}return t.html(o),t.removeClass("liked"),t.click(function(e){return t.tooltip("hide"),t.likeButton("like")})})},updateStatus:function(){var t;return t=function(e,t){if(t.error)return o.error(t.error);if(e.data("likeButton"))return e.data("likeButton",{liked:t.liked,_target:e.data("likeButton")._target,mode:e.data("likeButton").mode}),e.likeButton("updateCss")},this.each(function(){var i;return i=e(this),void 0!==i.data("isliked")?t(i,{liked:i.data("isliked")}):e.post(o.isLikedUrl,{_object:i.data("likeButton")._target},function(e){return t(i,e)})})},like:function(){return this.each(function(){var t,i;return i=this,t=e(i),t.data("likeButton",{liked:!0,mode:t.data("likeButton").mode,_target:t.data("likeButton")._target}),t.trigger("like"),t.likeButton("updateCss"),e.post(o.likeUrl,{model:o.model,_object:t.data("likeButton")._target},function(e){return t.data("likeButton")?e.error?(t.data("likeButton",{liked:!1,_target:t.data("likeButton")._target,mode:t.data("likeButton").mode}),t.trigger("unlike"),t.likeButton("updateCss"),o.error(e.error)):(window.mixpanel&&window.mixpanel.track("Like Button Clicked",{action:"Like",source:o.source}),t.likeButton("updateSimilarButtons",!0)):void 0})})},unlike:function(){return this.each(function(){var t,i;return i=this,t=e(i),t.data("likeButton",{liked:!1,mode:t.data("likeButton").mode,_target:t.data("likeButton")._target}),t.trigger("unlike"),t.likeButton("updateCss"),e.post(o.unlikeUrl,{model:o.model,_object:t.data("likeButton")._target},function(e){return t.data("likeButton")?e.error?(t.data("likeButton",{liked:!0,_target:t.data("likeButton")._target,mode:t.data("likeButton").mode}),t.trigger("like"),t.likeButton("updateCss"),o.error(e.error)):(window.mixpanel&&window.mixpanel.track("Like Button Clicked",{action:"Unlike",source:o.source}),t.likeButton("updateSimilarButtons",!1)):void 0})})},updateSimilarButtons:function(t){return this.each(function(){var o;return o=e(this),e(".likeButton-container").each(function(i,s){var n;return e(s)[0]!==o[0]&&(n=e(s).data("likeButton"),(null!=n?n._target:void 0)===o.data("likeButton")._target)?(e(s).data("likeButton",{_target:n._target,liked:t,mode:n.mode}),e(s).likeButton("updateCss")):void 0})})}},e.fn.likeButton=function(o){return t[o]?t[o].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof o&&o?e.error("Method "+o+" does not exist on jQuery.likeButton"):t.init.apply(this,arguments)}}(i)},{jquery:"jquery","lib/seelio-session":"/opt/seelio/node_modules/lib/seelio-session.coffee"}],"/opt/seelio/node_modules/lib/seelio-message.coffee":[function(e,t,o){var i;i=e("lib/seelio-session"),function(t){var o,s;return s={html:"Message"},o={createMessageComposerModal:function(){var t;return this.messageComposerModal?void 0:(t=e("mixins/users/message_composer_modal"),i.messageComposerModal=new t({model:this.model}))},messageAllHandler:function(e){return e.preventDefault(),o.createMessageComposerModal(),i.messageComposerModal.show({options:{to:[t(e.currentTarget).attr("data-user-id")]}})},init:function(e){return e=e||{},s=t.extend(s,e),e.disabled||null==i.user()._id?this.each(function(){return t(this).html(s.html),t(this).attr("href","/login?redirect=/"+t(this).attr("data-username")+"&action=message")}):this.each(function(){return t(this).css("display","block"),t(this).html(s.html),t(this).click(function(e){return o.messageAllHandler(e)})})}},t.fn.messageButton=function(e){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?t.error("Method "+e+" does not exist on jQuery.messageButton"):o.init.apply(this,arguments)}}(jQuery)},{"lib/seelio-session":"/opt/seelio/node_modules/lib/seelio-session.coffee","mixins/users/message_composer_modal":"/opt/seelio/node_modules/mixins/users/message_composer_modal.coffee"}],"/opt/seelio/node_modules/lib/seelio-session.coffee":[function(e,t,o){var i,s;i=e("jquery"),s={user:function(){var e,t;if(this.userData)return this.userData;if(t={},i("#seelio-session").length>0){t=i("#seelio-session").attr("value"),t=decodeURI(t);try{t=JSON.parse(t)}catch(o){e=o,console.error(e.message)}}return this.userData=t,this.userData},goToProfilePage:function(){return window.location.href="/"+this.user().username},getPref:function(e){var t,o;return o=this.user().prefs,null==o?null:(t=e.split("."),t.forEach(function(e){return o=o[e],null==o?null:void 0}),o)},setPrefs:function(e,t){var o;return o=JSON.stringify({prefs:e}),i.ajax({type:"PATCH",url:"/student/edit",data:o,headers:{"content-type":"application/json"},success:function(e,o,i){return null!=t?t(null,e):void 0},error:function(e,o,i){return flash.error("We couldn't update your preferences: "+e.responseText),null!=t?t(new Error(e.responseText)):void 0}})}},t.exports=s},{jquery:"jquery"}],"/opt/seelio/node_modules/mixins/shareButtons.coffee":[function(e,t,o){var i,s,n,r,a,l,c;i=e("jquery"),s=e("backbone"),c=e("underscore"),n=e("mixins/users/message_composer_modal"),l=e("templates/share_buttons"),a=function(e,t){var o,i;return o=this,this.css({"-webkit-transform":"rotate("+e+"deg)"}),this.css({"-moz-transform":"rotate("+e+"deg)"}),e!==t?i=setTimeout(function(){var i;return i=4,t>e?(e+=i,e>t&&(e=t)):(e-=i,t>e&&(e=t)),a.call(o,e,t)},5):void 0},r=s.View.extend({events:{"click .share-button":"toggle","click .share-track":"mixpanel","click [name=shareUrl]":"selectAll","click .share-ask-for-feedback a":"openMessageComposerModal"},initialize:function(e){return null!=(null!=e?e.work:void 0)?this.work=e.work:void 0},render:function(){var e,t;return t=this,t.$el.html(l({link:t.model.attributes.link,title:t.model.attributes.title||"Seelio",options:{button_class:t.model.attributes.button_classes,feedback:t.model.attributes.feedback}})),e="Ctrl + C to copy",navigator.platform.match(/mac/i)&&(e="&#8984; + C to copy"),navigator.platform.match(/(ipad|iphone|ipod)/i)||(t.$el.find("input[name=shareUrl]").tooltip({placement:"top",trigger:"focus",title:e,html:!0}),i(window).resize(function(e){return t.$el.find("input[name=shareUrl]").tooltip("hide")})),t},toggle:function(){return this.$(".share-bubble").fadeToggle("fast"),"Share"===this.$(".share-button.btn span.share-btn-text").html()?(this.$(".share-button.btn span.share-btn-text").html("Close"),a.call(this.$(".share-button.btn .icon-wrap"),-135,0)):(this.$(".share-button.btn span.share-btn-text").html("Share"),a.call(this.$(".share-button.btn .icon-wrap"),0,-135)),this},mixpanel:function(e){var t,o;return o=this,t=i(e.currentTarget),window.mixpanel?window.mixpanel.track("Social Share",{type:t.attr("data-type"),source:o.model.get("pageType"),link:o.model.get("link")}):void 0},selectAll:function(e){var t;return t=i(e.currentTarget),t.select()},openMessageComposerModal:function(e){return e.preventDefault(),this.messageComposerModal=new n({work:this.model.get("work")}),this.messageComposerModal.show()}}),t.exports=r},{backbone:"backbone",jquery:"jquery","mixins/users/message_composer_modal":"/opt/seelio/node_modules/mixins/users/message_composer_modal.coffee","templates/share_buttons":"/opt/seelio/node_modules/templates/share_buttons.js",underscore:"underscore"}],"/opt/seelio/node_modules/mixins/users/autocomplete_input.coffee":[function(e,t,o){var i,s,n,r,a;r=e("templates/users/autocomplete_input"),n=e("mixins/users/invite_modal"),i=e("backbone"),a=e("underscore"),e("select2"),s=i.View.extend({initialize:function(e){var t,o,i,s,n;for(o=this,this.$input=this.$("input"),null==e&&(e={}),n=["include","exclude","includeGroups","excludeGroups"],i=0,s=n.length;s>i;i++)t=n[i],null!=e[t]&&(this[t]=e[t]);return e.dropdownCssClass=e.dropdownCssClass||"",e.modal&&(e.dropdownCssClass+=" select2-modal"),this.multiple=!!e.multiple,this.$input.select2({ajax:{url:"/students/autocomplete",dataType:"json",data:function(e,i){var s,n,r,l;for(s={query:e,excludeSelf:!0},l=["include","exclude","includeGroups","excludeGroups"],n=0,r=l.length;r>n;n++)t=l[n],null!=o[t]&&(s[t]=a.result(o,t));return s},results:function(e,t){return{results:e}}},minimumInputLength:2,allowClear:!1,multiple:this.multiple,containerCssClass:e.containerCssClass,dropdownCssClass:e.dropdownCssClass,formatInputTooShort:function(e,t){return"Type the full name or email of an existing user..."},formatResult:function(e,t,o){var i,s,n;return i="<div class='user-autocomplete-input-select2-result'><div class='pull-left user-autocomplete-input-select2-profile'><img src='"+e.profilePhotoPath+"' /></div><strong>"+e.fullName+"</strong><br />",e.university="",(null!=(s=e.education)?s.length:void 0)>0?e.university=e.education[0].university:(null!=(n=e.degrees)?n.length:void 0)>0&&(e.university=e.degrees[0].university),i+="<span>"+e.university+"</span>",i+="</div>"},formatSelection:function(e,t){var i,s,n,r;return i="<img src='"+e.profilePhotoPath+"' class='user-autocomplete-input-select2-selection-profile pull-left' /><span class='user-autocomplete-input-select2-selection-name'>"+e.fullName+"</span>",o.multiple||(e.university="",(null!=(n=e.education)?n.length:void 0)>0?e.university=e.education[0].university:(null!=(r=e.degrees)?r.length:void 0)>0&&(e.university=e.degrees[0].university),s=e.university?"&nbsp;<span>("+e.university+")</span>":"",i+=s),i},initSelection:function(e,t){var i;return i=decodeURIComponent(e.val()),"[]"!==i?(o.$(".select2-choices").addClass("loading"),$.ajax({url:"/students/autocomplete",dataType:"json",data:{ids:JSON.parse(i)},success:function(){return o.$(".select2-choices").removeClass("loading"),t.apply(this,arguments)}})):void 0}},this.$input.on("change",function(t){return e.multiple?o.trigger("change",t):(null!=(null!=t?t.added:void 0)&&o.trigger("select",t),o.clear())})),e.modal&&(this.$input.on("select2-open",function(e){return $("#select2-drop-mask").addClass("select2-modal")}),this.$input.on("select2-close",function(e){return $("#select2-drop-mask").removeClass("select2-modal")})),e.invite?this.addInviteOption():void 0},addInviteOption:function(){var e;return e=this,this.$input.on("select2-open",function(t){var o;return o=this,$(".select2-drop-active").each(function(){return 0===$(this).find(".select2-invite").length?($(this).append('<div class="select2-invite"><a href="#user-invite-modal" data-toggle="modal" class="btn btn-block btn-default">Not here? Invite them!</a></div>'),$(this).find(".select2-invite > a").off("click.UserAutocompleteInput"),$(this).find(".select2-invite > a").on("click.UserAutocompleteInput",function(){return $(o).select2("close"),e.userInviteModal=new n({el:"body"}),e.listenTo(e.userInviteModal,"invite",function(t){return e.trigger("invite",t)})})):void 0})})},clear:function(){return this.$input.select2("val","")}}),t.exports=s},{backbone:"backbone","mixins/users/invite_modal":"/opt/seelio/node_modules/mixins/users/invite_modal.coffee",select2:"/opt/seelio/node_modules/select2/index.js","templates/users/autocomplete_input":"/opt/seelio/node_modules/templates/users/autocomplete_input.js",underscore:"underscore"}],"/opt/seelio/node_modules/mixins/users/invite_modal.coffee":[function(e,t,o){var i,s,n;n=e("templates/users/invite_modal"),i=e("backbone"),s=i.View.extend({events:{"submit form":"submitHandler","click .user-invite-add-another":"addAnotherInput"},initialize:function(e){return this.render()},render:function(){return $("#user-invite-modal").length>0?this.$modal=$("#user-invite-modal"):(this.$el.append(n()),this.$modal=this.$("#user-invite-modal")),this.$modal.modal()},addAnotherInput:function(e){return e.preventDefault(),this.$(e.currentTarget).before("<input type='email' placeholder='email@example.com' class='form-control' />")},submitHandler:function(e){var t,o;return o=this,e.preventDefault(),t=[],this.$("#user-invite-modal input[type=email]").each(function(){return $(this).val()?(t.push($(this).val()),$(this).val("")):void 0}),o.trigger("invite",t)}}),t.exports=s},{backbone:"backbone","templates/users/invite_modal":"/opt/seelio/node_modules/templates/users/invite_modal.js"}],"/opt/seelio/node_modules/mixins/users/message_composer.coffee":[function(e,t,o){var i,s,n,r,a,l,c;i=e("backbone"),r=e("mixins/users/autocomplete_input"),c=e("templates/users/message_composer"),l=e("lib/form_data"),e("lib/jquery.resize"),a=e("lib/seelio-flash"),s=i.View.extend({events:{"submit .message-composer-form":"submitHandler"},initialize:function(e){var t;return null==e&&(e={}),t=this,e.render===!0&&this.render(e),this.$(".message-composer-message-body-container").on("resize",function(){return t.bodyResizeHandler()}),this.submitButtonEl=e.submitButtonEl||this.$(".message-composer-submit"),this.submitButtonEl.on("click",function(){return t.submit()}),null!=e._group?this.render(e):(this.initRecaptcha(),this.usersAutocomplete=new r({el:this.$(".message-composer-to"),multiple:!0,containerCssClass:"input combined-input-dotted",modal:e.modal,include:e.include,exclude:e.exclude,includeGroups:e.includeGroups,excludeGroups:e.excludeGroups}),this.listenTo(this.usersAutocomplete,"change",function(e){return 0===t.getRecipients().length?t.disableSubmit():t.enableSubmit()}),this.attachmentViews=[],this.$(".message-composer-attachments").length>0?this.$(".message-composer-attachments").each(function(e,o){return t.addAttachmentView({el:this})}):void 0)},render:function(e){return this.$el.html(c({options:e})),this.initRecaptcha()},initRecaptcha:function(){return this.recaptchaId=grecaptcha.render(this.$el.find("#message-composer-recaptcha")[0],{sitekey:"6LdF8A4TAAAAAPVfFmjWYL-__In_VgvsEhyxMGLr"})},addAttachmentView:function(e){var t,o;return o=this,t=new n({el:".message-composer-attachments-li-work"}),this.attachmentViews.push(t),this.listenTo(t,"remove",function(){return o.attachmentViews.splice(o.attachmentViews.indexOf(t),1),o.adjustTextareaToFitWithOtherContent()})},submitHandler:function(e){var t;return t=this,e.preventDefault(),this.submit()},submit:function(){var e;return e=this,this.disableSubmit(),this.sendMessage(function(){return e.clearForm()})},bodyResizeHandler:function(e){return this.adjustTextareaToFitWithOtherContent()},adjustTextareaToFitWithOtherContent:function(){var e,t,o;return e=this.$(".message-composer-message-body-container"),t=e.children("textarea"),o=0,e.children(":not(textarea)").each(function(e,t){return o+=$(this).outerHeight(!0)}),t.height(e.height()-o)},getRecipients:function(){return this.usersAutocomplete.$input.select2("data")},disableSubmit:function(){return this.submitButtonEl.prop("disabled",!0)},enableSubmit:function(){return this.submitButtonEl.prop("disabled",!1)},sendMessage:function(e){var t,o,i,s;return i=this,t=l.get(this.$("form")),(null!=(s=t.recipients)?s.length:void 0)>0?(""===t.subject&&(confirm("Send this message with no subject?")||i.enableSubmit(),delete t.subject),o=grecaptcha.getResponse(this.recaptchaId),t["g-recaptcha-response"]=o,$.ajax({type:"POST",url:"/conversations",data:t,beforeSend:function(e,t){return i.trigger("messagesend")},success:function(o,s,n){return a.success("Message successfully sent"),i.trigger("messagesent",t),i.enableSubmit(),e()},error:function(e,t,o){return i.trigger("messagefail"),a.error("Error sending message: "+e.responseText),i.enableSubmit()},complete:function(e,t){return i.trigger("messagecomplete"),i.enableSubmit()}})):(a.error("Please specify at least one recipient."),void i.enableSubmit())},clearForm:function(){return null!=this.usersAutocomplete&&this.usersAutocomplete.clear(),this.$("form")[0].reset(),grecaptcha.reset(this.recaptchaId)}}),n=i.View.extend({events:{"click .close":"closeHandler"},initialize:function(e){},render:function(e){},closeHandler:function(){return this.remove()}}),t.exports=s},{backbone:"backbone","lib/form_data":"/opt/seelio/node_modules/lib/form_data.coffee","lib/jquery.resize":"/opt/seelio/node_modules/lib/jquery.resize.js","lib/seelio-flash":"/opt/seelio/node_modules/lib/seelio-flash.coffee","mixins/users/autocomplete_input":"/opt/seelio/node_modules/mixins/users/autocomplete_input.coffee","templates/users/message_composer":"/opt/seelio/node_modules/templates/users/message_composer.js"}],"/opt/seelio/node_modules/mixins/users/message_composer_modal.coffee":[function(e,t,o){var i,s,n,r,a,l,c;i=e("backbone"),s=e("mixins/users/message_composer"),l=e("templates/users/message_composer_modal"),c=e("underscore"),a=e("lib/seelio-flash"),r=e("async"),n=i.View.extend({initialize:function(e){var t;return t=this,null!=(null!=e?e.work:void 0)&&(this.work=e.work),null!=(null!=e?e._work:void 0)?this._work=e._work:void 0},retrieveWork:function(e,t){var o;return o=this,$("body").addClass("loading"),$.get("/work/"+e._work,function(i){return o.work=e.work=i,$("body").removeClass("loading"),t(null,e)}).fail(function(){return t(new Error("We were unable to attach the work to the message. Please refresh and try again."))})},render:function(e,t){var o;return o=this,e=e||{},r.waterfall([function(t){return e._work?o.retrieveWork(e,t):t(null,e)}],function(e,i){var n;return(null!=e?e.message:void 0)?a.error(e.message):(o.work&&(n=o.work.attributes||o.work),o.model&&(n=o.model.attributes),null!=n&&(i.attachments=[{object:n,type:"work",removable:!1}]),o.$el.html(l({options:i})),$("body").append(o.el),o.messageComposer=new s({el:o.$(".message-composer-modal-main"),to:i.to,work:i.work,_work:i._work,_group:i._group,groupName:i.groupName,modal:!0,submitButtonEl:o.$(".message-composer-modal-send")}),t&&t(),o.listenTo(o.messageComposer,"messagesent",function(e){return o.hide(),o.trigger("messageSent")}))})},show:function(e){var t;return t=this,this.render(null!=e?e.options:void 0,function(){return t.$(".modal").modal("show")})},hide:function(){return this.$(".modal").modal("hide")}}),t.exports=n},{async:"/opt/seelio/node_modules/async/lib/async.js",backbone:"backbone","lib/seelio-flash":"/opt/seelio/node_modules/lib/seelio-flash.coffee","mixins/users/message_composer":"/opt/seelio/node_modules/mixins/users/message_composer.coffee","templates/users/message_composer_modal":"/opt/seelio/node_modules/templates/users/message_composer_modal.js",underscore:"underscore"}],"/opt/seelio/node_modules/mixins/works/bottom_section_collapsible.coffee":[function(e,t,o){var i,s,n;i=e("backbone"),n=e("underscore"),s=i.View.extend({events:{"click .work-bottom-section-subwindow-scroll-up":"scrollSubwindowToTop"},initialize:function(e){var t;return t=this,this.extendInitialize&&this.extendInitialize(e),
this.$(".collapse").on("shown.bs.collapse",function(){return t.scrollWindowToBottom()}),this.$(".work-bottom-section-subwindow").scroll(function(){return t.toggleScrollUpButton()}),this.$(".collapse").is(".in")?this.scrollSubwindowToBottom():void 0},scrollWindowToBottom:function(){var e,t,o;return t=this,t.el?(t.$el.closest(".modal").length>0?(o=t.$el.closest(".modal"),e=t.$el.position().top):(o=$("html, body"),e=t.$el.offset().top),o.animate({scrollTop:e+t.$el.outerHeight(!0)+20-$(window).height()},140),setTimeout(function(){return t.scrollSubwindowToBottom()},80)):void 0},toggleScrollUpButton:function(){var e,t,o;return o=this,e=n.reduce(this.$(".work-bottom-section-media-list > li"),function(e,t){return $(t).offset().top<o.$(".work-bottom-section-subwindow").offset().top-10?e+1:e},0),e>0?(this.$(".work-bottom-section-subwindow-scroll-up").is(":visible")||this.$(".work-bottom-section-subwindow-scroll-up").fadeIn(),t=1===e?" Comment Above":" Comments Above",this.$(".work-bottom-section-subwindow-scroll-up").text(e+t)):this.$(".work-bottom-section-subwindow-scroll-up").is(":visible")?this.$(".work-bottom-section-subwindow-scroll-up").fadeOut():void 0},scrollSubwindowToTop:function(){var e;return e=this,this.$(".work-bottom-section-subwindow").animate({scrollTop:0},140)},scrollSubwindowToBottom:function(){var e;return e=this,this.$(".work-bottom-section-subwindow").animate({scrollTop:e.$(".work-bottom-section-subwindow")[0].scrollHeight},140)}}),t.exports=s},{backbone:"backbone",underscore:"underscore"}],"/opt/seelio/node_modules/mixins/works/comment.coffee":[function(e,t,o){var i,s,n,r,a,l,c,u;i=e("jquery"),n=e("backbone"),a=e("templates/works/comment"),u=e("lib/seelio-session"),l=e("lib/seelio-flash"),c=e("moment"),s=e("lib/autolinker"),r=n.View.extend({events:{"click .media-remove":"destroy"},initialize:function(e){return this.$el.data("view",this),this.discussion=e.discussion,e.model||this.loadModelFromCollectionOrView(),e.toRender&&this.render(e),this.formatTime(),this.formatText()},formatText:function(){var e;return e=this.$(".comment-body").text(),e=(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2"),e=s.link(e),this.$(".comment-body").html(e)},formatTime:function(){var e;return e=c(this.$(".comment-time").text()).format("M/D/YY [at] h:mm a"),this.$(".comment-time").text(e)},loadModelFromCollectionOrView:function(){var e,t,o,i,s,r;e=this.$("data").attr("value"),e=decodeURI(e);try{t=JSON.parse(e)}catch(a){o=a,l.error("Error parsing comment data.")}return(i=null!=(s=this.discussion)&&null!=(r=s.get("comments"))?r.where({_id:t._id}):void 0)?this.model=i[0]:this.model=new n.Model(t)},render:function(e){var t;return console.log("this is the comment view render function called"),t=this,this.$el.html(a({comment:e.toRender,own:t.discussion.own||u.user().id.toString()===e.toRender._author._id.toString()}))},startDestroyingStatus:function(){return this.$(".media-remove").text("").removeClass("close").addClass("removing")},restoreRemoveButton:function(){return this.$(".media-remove").text("").addClass("close").addClass("removing")},destroy:function(e){var t;return t=this,t.startDestroyingStatus(),this.discussion.deleteComment(this.model.attributes._id,this.model.get("_author")._id,function(e){return e?t.restoreRemoveButton():void 0})}}),t.exports=r},{backbone:"backbone",jquery:"jquery","lib/autolinker":"/opt/seelio/node_modules/lib/autolinker.js","lib/seelio-flash":"/opt/seelio/node_modules/lib/seelio-flash.coffee","lib/seelio-session":"/opt/seelio/node_modules/lib/seelio-session.coffee",moment:"/opt/seelio/node_modules/moment/moment.js","templates/works/comment":"/opt/seelio/node_modules/templates/works/comment.js"}],"/opt/seelio/node_modules/mixins/works/comment_composer.coffee":[function(e,t,o){var i,s,n,r;i=e("backbone"),n=e("templates/works/comment_composer"),r=e("underscore"),s=i.View.extend({events:{"click .post-comment":"postComment","keydown textarea":"keyboardPostComment","focus textarea":"showPostButton","blur textarea":"hidePostButton"},initialize:function(e){var t;return null==e&&(e={}),t=this,this.hasPostButton=null!=e.hasPostButton?e.hasPostButton:!0,e.render===!0?this.render():void 0},render:function(e){return null==e&&(e={}),this.$el.html(n({options:e}))},keyboardPostComment:function(e){return e.ctrlKey&&13===e.keyCode?(e.preventDefault(),this.postComment(e)):void 0},postComment:function(e){var t,o;return o=this.$("textarea"),t=o.val(),t&&""!==t?(this.trigger("commentsend",t),o.val(""),o.focus()):void 0},startPostingStatus:function(){return this.$(".post-comment").prop("disabled",!0).text("Posting...")},finishPostingStatus:function(){return this.$(".post-comment").prop("disabled",!1).text("Post Comment")},showPostButton:function(e){var t;if(this.hasPostButton)return t=this,this.$(".comment-submit").show(),this.trigger("postbuttonshow")},hidePostButton:function(e){var t;if(this.hasPostButton)return $(e.relatedTarget).hasClass("post-comment")?void 0:(t=this.$(".comment-submit"),setTimeout(function(){return t.hide()},100))}}),t.exports=s},{backbone:"backbone","templates/works/comment_composer":"/opt/seelio/node_modules/templates/works/comment_composer.js",underscore:"underscore"}],"/opt/seelio/node_modules/mixins/works/cover_selector.coffee":[function(e,t,o){var i,s,n,r,a;r=e("templates/works/cover_selector"),i=e("backbone"),n=e("lib/seelio-flash"),a=e("underscore"),s=i.View.extend({events:{"click .work-cover-selector_link":"workSelectClickHandler","click .cover-selector-left":"scrollLeft","click .cover-selector-right":"scrollRight"},initialize:function(e){var t;return t=this,this.works=e.works,null!=this.works&&this.render(e),this.$workLinks=this.$(".work-cover-selector_link"),this.selectWorkFromWindowLocation(),this.scrollCoverIntoView($(this.$workLinks[this.currentWorkNumber])),$(".works-title-tooltip").tooltip(),$(".cover-selector-left").tooltip(),$(".cover-selector-right").tooltip(),$(window).keydown(function(e){return 39===e.keyCode?t.rightWorkSelectHandler(e):37===e.keyCode?t.leftWorkSelectHandler(e):void 0})},render:function(e){return this.$el.html(r({works:e.works}))},selectWorkFromUrl:function(e){var t;return t=a.find(this.works,function(t){return t.full_url===e}),this.selectWork(this.works.indexOf(t))},selectWorkFromWindowLocation:function(){var e;return e=window.location.protocol+"//"+window.location.host+window.location.pathname,this.selectWorkFromUrl(e)},selectWorkFromElement:function(e){return this.selectWork(this.$workLinks.index(e))},selectWork:function(e){var t;return"number"!=typeof e&&(e=this.works.indexOf(e)),this.currentWorkNumber=e,this.currentWork=this.works[e],this.highlightCurrentWork(),t=JSON.parse(JSON.stringify(this.currentWork)),this.trigger("work-select",t)},highlightCurrentWork:function(){return this.highlightWork(this.currentWorkNumber)},highlightWork:function(e){return this.$workLinks.find(".work-img").css("border","none"),this.$workLinks.eq(e).find(".work-img").css("border","2px solid #1e8cce"),this.$workLinks.find(".work-img").css("width","64px"),this.$workLinks.find(".work-img").css("height","36px"),this.$workLinks.eq(e).find(".work-img").css("width","72px"),this.$workLinks.eq(e).find(".work-img").css("height","41px")},workSelectClickHandler:function(e){var t;return e.preventDefault(),t=$(e.currentTarget).find(".work-img"),this.scrollCoverIntoView(t),this.selectWorkFromElement(e.currentTarget)},scrollRight:function(e){var t,o,i;return i=$(".work-cover-selector"),o=i.get(0).scrollWidth-i.get(0).clientWidth,t=i.get(0).scrollWidth-(i.get(0).scrollLeft+i.width()),t>=i.width()?i.animate({scrollLeft:i.get(0).scrollLeft+i.width()},500):t<i.width()?i.animate({scrollLeft:o},500):void 0},scrollLeft:function(e){var t,o;return o=$(".work-cover-selector"),t=o.get(0).scrollLeft,t>=o.width()?o.animate({scrollLeft:o.get(0).scrollLeft-o.width()},500):t<o.width()?o.animate({scrollLeft:0},500):void 0},leftWorkSelectHandler:function(e){var t;return void 0!==e&&e.preventDefault(),this.trigger("keydown"),t=0===this.currentWorkNumber?this.$workLinks.length-1:this.currentWorkNumber-1,this.$workLinks[t].click()},rightWorkSelectHandler:function(e){var t;return void 0!==e&&e.preventDefault(),this.trigger("keydown"),t=this.currentWorkNumber===this.$workLinks.length-1?0:this.currentWorkNumber+1,this.$workLinks[t].click()},scrollCoverIntoView:function(e){var t,o,i,s,n;return n=$(".work-cover-selector"),s={top:n.scrollTop(),left:n.offset().left},o=10,s.right=s.left+n.width(),s.bottom=s.top+n.height(),t=e.offset(),t.right=t.left+e.outerWidth(),t.bottom=t.top+e.outerHeight(),t.left<s.left+o?(i=s.left+o-t.left,n.animate({scrollLeft:n.scrollLeft()-i},500)):t.right>s.right-o?(i=t.right-(s.right-o),n.animate({scrollLeft:i+n.scrollLeft()},500)):void 0}}),t.exports=s},{backbone:"backbone","lib/seelio-flash":"/opt/seelio/node_modules/lib/seelio-flash.coffee","templates/works/cover_selector":"/opt/seelio/node_modules/templates/works/cover_selector.js",underscore:"underscore"}],"/opt/seelio/node_modules/mixins/works/discussion.coffee":[function(e,t,o){var i,s,n,r,a,l,c,u,d,h;i=e("jquery"),h=e("underscore"),s=e("backbone"),l=e("mixins/works/bottom_section_collapsible"),c=e("templates/works/discussion"),r=e("mixins/works/comment"),n=e("mixins/works/comment_composer"),d=e("lib/seelio-session"),u=e("lib/lytic"),a=l.extend({extendInitialize:function(e){var t;return t=this,this.work=e.work,this.events=h.extend(this.events,{"keydown textarea":"keyboardPostComment","focus textarea":"showPostButton","blur textarea":"hidePostButton"}),this.$el.data("view",this),null!=e.render&&this.render(e),this.addUniqueCollapseIds(),this.commentViews=[],h.each(this.$(".comment"),function(e){return t.commentViews.push(new r({el:i(e).parent(),discussion:t.model}))}),this.commentComposer=new n({el:this.$(".work-discussion-comment-composer")}),this.listenTo(this.commentComposer,"commentsend",function(e){var t=this;return this.commentComposer.startPostingStatus(),this.model.postComment(e,function(){return u.kineLog.log({_e_type_:"CommentEvent",group_id:t.model.get("_group")._id.toString(),work_id:t.work._id.toString(),common:{event_hierarchy:{page:u.getKinePage(),section:u.getKineSection(t.el),component:"discussion",element:"comment-composer"}}}),t.commentComposer.finishPostingStatus()})}),this.listenTo(this.commentComposer,"postbuttonshow",function(){return t.scrollWindowToBottom()}),this.model.on("removeComment",function(e){return h.each(t.commentViews,function(e){return e.remove()})}),this.model.on("addComment",function(e){var o;return o=i("<li></li>"),t.$(".work-discussion-comment-list").append(o),t.commentViews.push(new r({model:e,toRender:e.attributes,el:o,discussion:t.model})),t.scrollWindowToBottom()}),this.$(".icon-lock-dark").tooltip({placement:"right",title:"Only you and other group members can view this discussion"})},render:function(e){var t,o,i;return o=e.model?e.model.attributes:this.model.attributes,t=o.comments,(null!=(i=o.comments)?i.toJSON:void 0)&&(o.comments=o.comments.toJSON()),this.$el.html(c({discussion:o,user:d.user(),options:{work:this.work}})),o.comments=t},addUniqueCollapseIds:function(){var e,t;return t=this.$(".work-discussion-collapse").attr("id"),e=t+"-"+(new Date).getTime(),this.$(".work-discussion-collapse").attr("id",e),this.$("[data-target=#"+t+"]").attr("data-target","#"+e)}}),t.exports=a},{backbone:"backbone",jquery:"jquery","lib/lytic":"/opt/seelio/node_modules/lib/lytic.coffee","lib/seelio-session":"/opt/seelio/node_modules/lib/seelio-session.coffee","mixins/works/bottom_section_collapsible":"/opt/seelio/node_modules/mixins/works/bottom_section_collapsible.coffee","mixins/works/comment":"/opt/seelio/node_modules/mixins/works/comment.coffee","mixins/works/comment_composer":"/opt/seelio/node_modules/mixins/works/comment_composer.coffee","templates/works/discussion":"/opt/seelio/node_modules/templates/works/discussion.js",underscore:"underscore"}],"/opt/seelio/node_modules/mixins/works/private_feedback.coffee":[function(e,t,o){var i,s,n,r,a;i=e("jquery"),a=e("underscore"),s=e("backbone"),r=e("mixins/works/bottom_section_collapsible"),n=r.extend({extendInitialize:function(e){var t;return t=this,this.$(".icon-lock-dark").tooltip({placement:"right",title:"Only you and message recipients can view feedback"})}}),t.exports=n},{backbone:"backbone",jquery:"jquery","mixins/works/bottom_section_collapsible":"/opt/seelio/node_modules/mixins/works/bottom_section_collapsible.coffee",underscore:"underscore"}],"/opt/seelio/node_modules/mixins/works/view.coffee":[function(e,t,o){var i,s,n,r,a,l,c,u,d,h,p,f,m,v,g;i=e("jquery"),s=e("backbone"),g=e("underscore"),d=e("async"),m=e("lib/seelio-session"),f=e("lib/seelio-flash"),e("lib/seelio-follow"),e("lib/seelio-message"),e("lib/seelio-like"),n=e("models/discussion"),r=e("mixins/works/discussion"),l=e("mixins/works/private_feedback"),c=e("mixins/shareButtons"),a=e("mixins/users/message_composer_modal"),v=e("templates/works/view"),p=e("templates/works/edit_button_popover"),h=e("lib/date-formats"),u=s.View.extend({shareButtonsModel:null,template:v,events:{"click .show-hidden-attachments":"showHiddenAttachments","click .attachment .hide-caption":"hideCaption","click .attachment .show-caption":"showCaption","click .fullscreen":"fullscreen","click .follow-user":"followHandler","click .follow-all":"followAllHandler","click .message-user":"messageHandler","click .message-all":"messageAllHandler","click .work-view-give-feedback .btn":"givePrivateFeedbackHandler","click .work-view-request-feedback .btn":"requestPrivateFeedbackHandler","click .work-view-delete":"deleteWorkHandler","like .work-action-like":"increaseLikeCount","unlike .work-action-like":"decreaseLikeCount","click .work-stats-mobile .likes h3":"triggerManualLike","click .feature-group":"adminFeatureWorkInGroup","click .remove-from-group":"adminRemoveWorkFromGroup"},initialize:function(e){var t,o,s;return e=e||{},o=this,this.own=this.$("data#work-owner").length>0||(null!=(s=this.model)?s.get("own"):void 0),this.own||this.checkIfOwnerUsingSession(),this.model.set("own",this.own),this.modal=this.modal||(null!=e?e.modal:void 0)||!1,this.preview=this.preview||(null!=e?e.preview:void 0)||!1,this.action=this.$("data.work-view-action").attr("value")||!1,e.render?this.render(e):this.postRender(e),this.preview||i(window).on("resize",this.adjustSidebarWidthAndPosition.bind(this)),this.modal&&(this.fullscreenMode=!1,t=function(e){return this.fullscreenMode=!this.fullscreenMode,this.fullscreenMode?(i(".work-modal").css("display",""),setTimeout(function(){return i(".work-modal").css("display","block")},350)):void 0},document.addEventListener("fullscreenchange",t,!1),document.addEventListener("webkitfullscreenchange",t,!1),document.addEventListener("mozfullscreenchange",t,!1)),this},postRender:function(e){var t;return this.$el.tooltip({selector:".likes-tooltip, .work-stats-groups, .work-stats-privacy",placement:"top"}),this.$(".work-action-share-tooltip").tooltip({placement:"bottom"}),this.$(".work-hidden-attachments h3 > i").tooltip(),t=this.$(".follow-button"),t.followButton({source:"Gallery Lightbox"}),this.$(".work-action-like").likeButton({mode:"glyphicon-only",tooltipPlacement:"bottom"}),this.initializeFollowDropdown(),this.initializeDiscussions(e.discussions),this.initializeShareButtons(e.fromProfile),this.initializeEditPopover(),this.initializeIframePreloaders(),this.resizeIframeAttachmentsIfCaptionsPresent(),this.modal&&this.initializeNestedModals(),this.adjustSidebarWidthAndPosition(),this},adjustSidebarWidthAndPosition:function(e){var t,o,s,n,r;return this.modal||this.preview?void 0:(r=i(window).width(),t=this.$el.width(),r>991&&(o=(r-t)/2,n=t-this.$(".col-md-8").outerWidth(),this.$(".work-sidebar").css({width:n,right:o})),i("#recruiter-toolbar").css("padding-left",Number(i(".work-view-container").css("margin-left").slice(0,-2))+12),s=i(".top-nav").outerHeight(),i(".work-admin-manage-bar").length>0&&(s+=this.$(".work-admin-manage-bar").height(),this.$(".col-md-8").css({"margin-top":this.$(".work-admin-manage-bar").height()}),this.$(".work-admin-manage-bar").width(this.$(".work-view").width())),this.$(".work-sidebar").css({top:s}))},triggerManualLike:function(e){return this.$(".work-action-like").first().click()},increaseLikeCount:function(e){var t;return t=parseInt(this.$(".work-stats-like-count").first().text(),10),t++,this.updateLikeCount(t)},decreaseLikeCount:function(e){var t;return t=parseInt(this.$(".work-stats-like-count").first().text(),10),0!==t?(t--,this.updateLikeCount(t)):void 0},updateLikeCount:function(e){return this.$(".work-stats-like-count").text(e),1===e?this.$(".likes .work-stats-text").text(" like"):this.$(".likes .work-stats-text").text(" likes")},checkIfOwnerUsingSession:function(){var e,t;return e=this.model.get("collaborators"),(null!=e?e.toJSON:void 0)&&(e=e.toJSON()),t=g.find(e,function(e){return e._student._id===m.user().id}),this.own=!!t},setBackUrl:function(e){return this.$el.attr("data-back-url",e),this},toDiscussionArray:function(){var e,t,o;return t=this,null!=(null!=(o=t.model.attributes.discussions)?o.toJSON:void 0)?(e=t.model.attributes.discussions.toJSON(),g.each(e,function(e){return e.comments.toJSON?e.comments=e.comments.toJSON():void 0}),t.model.attributes.discussions=e):void 0},modalPageTracking:function(){var e;return e="/w/"+this.model.attributes.url_id+"/"+this.model.attributes.slug+"#workModal",lytic.page({url:"https://seelio.com/work-modal",title:"Work Modal",path:e})},render:function(e){var t,o,i,s;return i=this,i.model.attributes.modal=i.modal,i.modal&&i.modalPageTracking(),void 0===e.fromProfile?i.$el.attr("data-url","/w/"+i.model.attributes.url_id+"/"+i.model.attributes.slug):i.$el.attr("data-url","/w/"+i.model.attributes.url_id+"/"+i.model.attributes.slug+"?student="+e.fromProfile),o=i.model.attributes.discussions,this.toDiscussionArray(),t=i.model.attributes,null!=(null!=(s=t.collaborators)?s.toJSON:void 0)&&(t.collaborators=t.collaborators.toJSON()),t.collaboratorsMinusMe=g.filter(t.collaborators,function(e){return e._student._id.toString()!==m.user().id}),i.model.attributes.updatedAt=h.seelio.fullDate(i.model.attributes.updatedAt),i.$el.html(i.template({work:i.model.attributes,user:m.user(),modal:i.modal,preview:i.preview})),i.model.attributes.discussions=o,(null!=e?e.simple:void 0)?(this.$(".work-view-actions, .work-collaborator-actions, .show-hidden-attachments, .work-discussions, .work-view-give-private-feedback").remove(),this.$("[data-toggle=modal]").attr("data-toggle",""),this.$("a[href]").attr("href","#").removeAttr("target")):(i.$el.on("shown",function(){return i.$el.find(".work-modal-team-member").tooltip()}),i.$el.on("hide",function(){return i.$el.attr("data-back-url")&&window.location.pathname.match(i.$el.attr("data-url"))?galleryRouter.navigate(i.$el.attr("data-back-url"),{replace:!0}):void 0})),this.postRender(e),this},createMessageComposerModal:function(){return this.messageComposerModal?void 0:this.messageComposerModal=new a({model:this.model})},messageHandler:function(e){return e.preventDefault(),this.createMessageComposerModal(),this.messageComposerModal.show({options:{to:[i(e.currentTarget).attr("data-user-id")],subject:this.model.attributes.title}})},messageAllHandler:function(e){var t;return e.preventDefault(),this.createMessageComposerModal(),t=this.getAllCollaboratorIds(),this.messageComposerModal.show({options:{to:t,subject:this.model.attributes.title}})},givePrivateFeedbackHandler:function(e){var t;return e.preventDefault(),this.createMessageComposerModal(),t=this.getAllCollaboratorIds(),this.messageComposerModal.show({options:{to:t,subject:'Feedback on "'+this.model.attributes.title+'"'}})},requestPrivateFeedbackHandler:function(e){return e.preventDefault(),this.createMessageComposerModal(),this.messageComposerModal.show({options:{subject:'Requesting feedback on "'+this.model.attributes.title+'"'}})},getAllCollaboratorIds:function(){var e,t;return e=this.model.get("collaborators"),null!=e.toJSON&&(e=e.toJSON()),t=[],g.each(e,function(e){return e._student._id!==m.user()._id?t.push(e._student._id):void 0}),t},updateFollowAll:function(){return this.$(".follow-user").length===this.$(".follow-user.following").length?this.$(".follow-all").addClass("following"):this.$(".follow-all").removeClass("following")},initializeShareButtons:function(e){var t;if(t=this,t.model){if(null!=t.model.get("visibTo")&&!t.model.get("visibTo").all)return;return t.shareButtonsModel=new s.Model({work:this.model,pageType:("undefined"!=typeof options&&null!==options?options.pageType:void 0)||null,button_classes:"undefined"!=typeof options&&null!==options?options.button_classes:void 0}),t.shareButtonsModel.set("link",window.location.origin+"/w/"+t.model.attributes.url_id+"/"+t.model.attributes.slug),t.$(".work-action-share").each(function(){var e;return e=new c({model:t.shareButtonsModel}),e.setElement(this),e.render(),"share"===t.action?e.toggle():void 0})}},initializeFollowDropdown:function(){var e;return e=this,d.each(this.$(".follow-user"),function(e,t){return i.post("/student/isFollowing",{_target:i(e).attr("data-id")},function(o){return o.error?f.error(o.error):(o.following?i(e).addClass("following"):i(e).removeClass("following"),t())})},function(t){return e.updateFollowAll()})},followHandler:function(e,t){var o;return o=this,e.stopPropagation&&e.stopPropagation(),i(e.currentTarget).addClass("loading"),i(e.currentTarget).hasClass("following")?i.post("/student/unfollowStudent",{_target:i(e.currentTarget).attr("data-id")},function(s){return i(e.currentTarget).removeClass("loading"),s.error?f.error(s.error):(i(e.currentTarget).removeClass("following"),o.updateFollowAll(),t?t():void 0)}):i.post("/student/followStudent",{_target:i(e.currentTarget).attr("data-id")},function(s){return i(e.currentTarget).removeClass("loading"),s.error?f.error(s.error):(i(e.currentTarget).addClass("following"),o.updateFollowAll(),t?t():void 0)})},followAllHandler:function(e){var t;return t=this,e.stopPropagation(),i(e.currentTarget).addClass("loading"),d.each(this.$(".follow-user"),function(o,s){return i(e.currentTarget).hasClass("following")?i(o).hasClass("following")?t.followHandler({currentTarget:o},s):s():i(o).hasClass("following")?s():t.followHandler({currentTarget:o},s)},function(o){return t.updateFollowAll(),i(e.currentTarget).removeClass("loading")})},initializeNestedModals:function(){var e,t;return t=this,e=t.$('[data-target$="-'+t.model.id+'"]'),e.removeAttr("data-toggle"),e.on("click",function(e){var t;return e.preventDefault(),i(".modal-backdrop").addClass("existing-backdrop"),t=i(e.currentTarget).attr("data-target"),i(t).appendTo("body").css("z-index",1042).modal(),i(".modal-backdrop").not(".existing-backdrop").css("z-index",1041)})},initializeDiscussions:function(e){var t,o,i,a,c=this;return t=this,(null!=e&&null!=(o=e.models)?o.length:void 0)>0?this.discussions=e:null!=(null!=(i=t.model.attributes.discussions)?i.toJSON:void 0)?this.discussions=t.model.attributes.discussions:(this.discussions=new s.Collection,g.each(this.$(".work-discussions .work-discussion > data"),function(e){var o,i,s;s=e.getAttribute("value"),s=decodeURI(s);try{s=JSON.parse(s)}catch(r){i=r,f.error(i)}return s._work=t.model.id,s.own=t.own,o=new n(s),t.discussions.add(o)})),this.discussionViews=[],g.each(this.discussions.models,function(e){var t,o;return o=e.get("_group")._id.toString(),t=new r({model:e,work:c.model.attributes,el:c.$("[data-discussion-id="+o+"]").closest("li")}),c.discussionViews.push(t)}),this.own&&(null!=(a=this.model.get("conversations"))?a.length:void 0)>0?this.privateFeedbackView=new l({el:".work-view-private-feedback"}):void 0},initializeIframePreloaders:function(){return this.$(".attachment iframe").each(function(){var e,t,o,s;if(!this.complete)return s=this,t=!1,e=function(){return i(s).after('<div class="attachment-preloader"></div>'),t=!0},o=function(){return t?(i(s).siblings(".attachment-preloader").remove(),t=!1):void 0},i(this).ready(e),i(this).load(o),setTimeout(function(){return o()},5e3)})},resizeIframeAttachmentsIfCaptionsPresent:function(){return this.$(".attachment > iframe").each(function(){var e;return e=i(this).parent(),e.find(".caption").length>0?e.css("padding-bottom",e.find(".caption").outerHeight()):void 0})},open:function(){return this.modal?(this.render(),this.$el.modal({dynamic:!0}),this.track(),this.$el.parent().addClass("work-modal full"),this):this},close:function(){return this.modal?(null!=this.$el.data("modal")&&this.$el.modal("hide"),this):this},track:function(){var e;return e=this,e.model.trackActivity(),this},showHiddenAttachments:function(e){return i(e.currentTarget).remove(),this.$(".work-hidden-attachments").show()},hideCaption:function(e){var t,o;return e.preventDefault(),t=i(e.target).closest(".attachment"),o=i(t.find(".caption")),o.hide(),t.append('<div class="show-caption">SHOW CAPTION</div>'),this},showCaption:function(e){var t,o;return e.preventDefault(),t=i(e.target).closest(".attachment"),i(e.target).remove(),o=i(t.find(".caption")),o.show(),this},fullscreen:function(e){var t;switch(e.preventDefault(),t=i(i(e.target).closest(".attachment")).find("iframe")[0],!0){case null!=t.requestFullScreen:t.requestFullScreen();break;case null!=t.mozRequestFullScreen:t.mozRequestFullScreen();break;case null!=t.webkitRequestFullScreen:t.webkitRequestFullscreen();break;default:f.error("Sorry, your browser does not currently support Crocodoc fullscreen.")}return this},initializeEditPopover:function(){var e,t,o;return e=this,i(".work-view-actions-desktop .work-action-edit").click(function(e){return e.preventDefault()}),this.modal||this.preview?this.$(".work-view-actions-desktop .work-action-edit").popover({html:!0,content:p({work:this.model.attributes})}):(null!=(t=this.$(".work-view-actions-desktop .work-action-edit").popover({html:!0,container:"body",content:p({work:this.model.attributes})}).data("bs.popover"))&&null!=(o=t.tip())&&o.addClass("work-edit-popover"),i("body").on("click",".work-view-delete",function(t){return t.preventDefault(),e.deleteWorkHandler(t)})),this.$(".work-view-actions-desktop .work-action-edit").on("show.bs.popover",function(){var t;return t=e.$(".work-view-actions-desktop .popover"),t.css("top",parseInt(t.css("top"))+20)}),i("body").on("click",function(e){return i(".work-action-edit").find(e.target).length?void 0:i(".work-view-actions-desktop .work-action-edit").popover("hide")}),this.$(".work-stats-mobile .work-action-edit").popover({html:!0,content:p({work:this.model.attributes}),placement:"left"})},deleteWorkHandler:function(e){return null!=e&&e.preventDefault(),confirm("Are you sure you want to delete this work?")?this.model.destroy({success:function(e,t,o){return m.goToProfilePage()},error:function(e,t,o){return f.error("There was an error deleting your work: "+t.responseText)}}):void 0},updateModel:function(e,t){return this.stopListening(this.model),this.model=e,this.listenToModel(t),(null!=t?t.render:void 0)?(this.render(t),this.adjustSidebarWidthAndPosition()):void 0},listenToModel:function(e){var t,o;if(null!=this.model)return t=g.debounce(this.render,250),o=this,this.listenTo(this.model,"change",function(){return t.bind(o)(e)})},adminFeatureWorkInGroup:function(e){var t,o,s,n;return s=this,o=i(e.currentTarget).data("value"),n=this.model.attributes._id,t=!1,g.each(this.model.attributes.featuredIn,function(e){return e._group.toString()===o.toString()?t=!0:void 0}),t?i.ajax({type:"DELETE",url:"/group/"+o+"/featured/"+n}).done(function(t){return s.model.attributes=t.work,i(e.target).children(".glyphicon-ok").remove()}).fail(function(e,t,o){return f.error("Could not remove group from featured gallery")}):i.ajax({type:"POST",url:"/group/"+o+"/featured/"+n}).done(function(t){return s.model.attributes=t.work,i(e.target).append('<div class="glyphicon glyphicon-ok"></div>')}).fail(function(e,t,o){return f.error("Could not feature group")})},adminRemoveWorkFromGroup:function(e){var t,o,s,n;return t=confirm("Are you sure you want to remove the work from this group and any associated subgroups?"),t===!0?(s=this,o=i(e.target).attr("data-value-groupId"),n=this.model.attributes._id,o=o.replace(/['"]+/g,""),i.ajax({type:"DELETE",url:"/group/"+o+"/works/"+n+"/removeWorkFromGroupAndSubgroups"}).done(function(t){return s.model.attributes=t.work,0===t.work.groups.length?i("#adminRemoveWorkDropdown").remove():i(e.target).parent("li").remove()}).fail(function(e,t,o){return f.error("Could not remove group from featured gallery")})):void 0}}),t.exports=u},{async:"/opt/seelio/node_modules/async/lib/async.js",backbone:"backbone",jquery:"jquery","lib/date-formats":"/opt/seelio/node_modules/lib/date-formats.coffee","lib/seelio-flash":"/opt/seelio/node_modules/lib/seelio-flash.coffee","lib/seelio-follow":"/opt/seelio/node_modules/lib/seelio-follow.coffee","lib/seelio-like":"/opt/seelio/node_modules/lib/seelio-like.coffee","lib/seelio-message":"/opt/seelio/node_modules/lib/seelio-message.coffee","lib/seelio-session":"/opt/seelio/node_modules/lib/seelio-session.coffee","mixins/shareButtons":"/opt/seelio/node_modules/mixins/shareButtons.coffee","mixins/users/message_composer_modal":"/opt/seelio/node_modules/mixins/users/message_composer_modal.coffee","mixins/works/discussion":"/opt/seelio/node_modules/mixins/works/discussion.coffee","mixins/works/private_feedback":"/opt/seelio/node_modules/mixins/works/private_feedback.coffee","models/discussion":"/opt/seelio/node_modules/models/discussion.coffee","templates/works/edit_button_popover":"/opt/seelio/node_modules/templates/works/edit_button_popover.js","templates/works/view":"/opt/seelio/node_modules/templates/works/view.js",underscore:"underscore"}],"/opt/seelio/node_modules/models/discussion.coffee":[function(e,t,o){var i,s,n;i=e("backbone"),n=e("lib/seelio-flash"),s=i.Model.extend({idAttribute:"_group._id",postComment:function(e,t){var o;return o=this,$.ajax({type:"POST",url:"/work/"+this._work+"/discussions/"+this.id+"/comments",data:{body:e},success:function(e){return o.get("comments").set(e.comments),o.set("_group",e._group),null!=t?t(null,e):void 0},error:function(e,o,i){return n.error("Oops! We couldn't post the comment for some reason."),null!=t?t(e.responseText):void 0}})},deleteComment:function(e,t,o){var i;return i=this,$.ajax({type:"DELETE",url:"/work/"+this._work+"/discussions/"+this.id+"/comments/"+e,data:{_author:t},success:function(e){return console.log(e.comments),i.get("comments").set(e.comments),null!=o?o(null,e):void 0},error:function(e,t,i){return n.error("Oops! We couldn't delete the comment for some reason."),null!=o?o(e.responseText):void 0}})},initialize:function(e){var t;return t=this,this._work=e._work,this.own=e.own,this.set("comments",new i.Collection(e.comments)),this.get("comments").on("add",function(e){return t.trigger("addComment",e)}),this.get("comments").on("remove",function(e){return t.trigger("removeComment",e)})}}),t.exports=s},{backbone:"backbone","lib/seelio-flash":"/opt/seelio/node_modules/lib/seelio-flash.coffee"}],"/opt/seelio/node_modules/models/work.coffee":[function(e,t,o){var i,s,n,r,a;i=e("jquery"),a=e("underscore"),s=e("backbone"),r=e("lib/seelio-session"),n=s.Model.extend({idAttribute:"_id",urlRoot:"/work",initialize:function(e){var t;return 1===(null!=(t=this.get("collaborators"))?t.length:void 0)&&(this.set("owner",this.mapCollaborator(this.get("collaborators")[0])),this.set("team",a.map(this.get("collaborators"),this.mapCollaborator))),this.set("isLiked",a.chain(this.get("likes")).pluck("_user").pluck("_id").contains(r.user()._id).value())},mapCollaborator:function(e){var t,o,i,s,n,r,l,c,u;return(null!=(l=window.layoutView)&&null!=(c=l.user())?c._id:void 0)===e._student._id&&(this.set("edit",!0),this.set("own",!0)),s=e._student._profilePhoto,n=s&&s.path?"/media/"+s.path.substr(0,s.path.lastIndexOf("."))+"_ps.jpg":"/img/profile-default-m.png",o=e._student.degrees,i=e._student.education,(null!=i?i.length:void 0)>0?(t=a.find(i,function(e){return e.current}),r=(null!=t?t.university:void 0)||(null!=(u=i[0])?u.university:void 0)||""):o&&o.length>0&&o[0].university&&(r=o[0].university),
{_id:e._student._id,fullName:e._student.fullName,username:e._student.username,url_id:e._student.url_id,slug:e._student.slug,position:e.position,contribution:e.contribution,highlightContent:e._student.highlightContent,profilePhoto:n,university:r}},longPollForCoverPhoto:function(e){var t;return t=this,i.ajax({type:"GET",url:this.url(),data:{fields:"cover"}}).done(function(o,i,s){var n,r,a;return r=o,n=function(){return setTimeout(function(){return t.longPollForCoverPhoto(e)},2e3)},null==(null!=(a=r.cover)?a.thumbs:void 0)?n():null!=(null!=e?e.state:void 0)&&r.cover.state!==e.state?n():(t.set("cover",r.cover),t.trigger("updateCover",t,o))})},trackView:function(){return i.ajax({type:"POST",url:"/gallery/trackActivity",data:{url_id:this.get("url_id")}}).done()}}),t.exports=n},{backbone:"backbone",jquery:"jquery","lib/seelio-session":"/opt/seelio/node_modules/lib/seelio-session.coffee",underscore:"underscore"}],"/opt/seelio/node_modules/moment/moment.js":[function(e,t,o){(function(o){function i(e,t){return function(o){return u(e.call(this,o),t)}}function s(e,t){return function(o){return this.lang().ordinal(e.call(this,o),t)}}function n(){}function r(e){l(this,e)}function a(e){var t=e.years||e.year||e.y||0,o=e.months||e.month||e.M||0,i=e.weeks||e.week||e.w||0,s=e.days||e.day||e.d||0,n=e.hours||e.hour||e.h||0,r=e.minutes||e.minute||e.m||0,a=e.seconds||e.second||e.s||0,l=e.milliseconds||e.millisecond||e.ms||0;this._input=e,this._milliseconds=l+1e3*a+6e4*r+36e5*n,this._days=s+7*i,this._months=o+12*t,this._data={},this._bubble()}function l(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}function c(e){return 0>e?Math.ceil(e):Math.floor(e)}function u(e,t){for(var o=e+"";o.length<t;)o="0"+o;return o}function d(e,t,o,i){var s,n,r=t._milliseconds,a=t._days,l=t._months;r&&e._d.setTime(+e._d+r*o),(a||l)&&(s=e.minute(),n=e.hour()),a&&e.date(e.date()+a*o),l&&e.month(e.month()+l*o),r&&!i&&L.updateOffset(e),(a||l)&&(e.minute(s),e.hour(n))}function h(e){return"[object Array]"===Object.prototype.toString.call(e)}function p(e,t){var o,i=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),n=0;for(o=0;i>o;o++)~~e[o]!==~~t[o]&&n++;return n+s}function f(e){return e?re[e]||e.toLowerCase().replace(/(.)s$/,"$1"):e}function m(e,t){return t.abbr=e,z[e]||(z[e]=new n),z[e].set(t),z[e]}function v(t){if(!t)return L.fn._lang;if(!z[t]&&B)try{e("./lang/"+t)}catch(o){return L.fn._lang}return z[t]}function g(e){return e.match(/\[.*\]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function b(e){var t,o,i=e.match(W);for(t=0,o=i.length;o>t;t++)ue[i[t]]?i[t]=ue[i[t]]:i[t]=g(i[t]);return function(s){var n="";for(t=0;o>t;t++)n+=i[t]instanceof Function?i[t].call(s,e):i[t];return n}}function w(e,t){function o(t){return e.lang().longDateFormat(t)||t}for(var i=5;i--&&H.test(t);)t=t.replace(H,o);return ae[t]||(ae[t]=b(t)),ae[t](e)}function k(e,t){switch(e){case"DDDD":return G;case"YYYY":return V;case"YYYYY":return J;case"S":case"SS":case"SSS":case"DDD":return Y;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return K;case"a":case"A":return v(t._l)._meridiemParse;case"X":return X;case"Z":case"ZZ":return Z;case"T":return Q;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return q;default:return new RegExp(e.replace("\\",""))}}function y(e){var t=(Z.exec(e)||[])[0],o=(t+"").match(ie)||["-",0,0],i=+(60*o[1])+~~o[2];return"+"===o[0]?-i:i}function _(e,t,o){var i,s=o._a;switch(e){case"M":case"MM":s[1]=null==t?0:~~t-1;break;case"MMM":case"MMMM":i=v(o._l).monthsParse(t),null!=i?s[1]=i:o._isValid=!1;break;case"D":case"DD":case"DDD":case"DDDD":null!=t&&(s[2]=~~t);break;case"YY":s[0]=~~t+(~~t>68?1900:2e3);break;case"YYYY":case"YYYYY":s[0]=~~t;break;case"a":case"A":o._isPm=v(o._l).isPM(t);break;case"H":case"HH":case"h":case"hh":s[3]=~~t;break;case"m":case"mm":s[4]=~~t;break;case"s":case"ss":s[5]=~~t;break;case"S":case"SS":case"SSS":s[6]=~~(1e3*("0."+t));break;case"X":o._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":o._useUTC=!0,o._tzm=y(t)}null==t&&(o._isValid=!1)}function C(e){var t,o,i=[];if(!e._d){for(t=0;7>t;t++)e._a[t]=i[t]=null==e._a[t]?2===t?1:0:e._a[t];i[3]+=~~((e._tzm||0)/60),i[4]+=~~((e._tzm||0)%60),o=new Date(0),e._useUTC?(o.setUTCFullYear(i[0],i[1],i[2]),o.setUTCHours(i[3],i[4],i[5],i[6])):(o.setFullYear(i[0],i[1],i[2]),o.setHours(i[3],i[4],i[5],i[6])),e._d=o}}function S(e){var t,o,i=e._f.match(W),s=e._i;for(e._a=[],t=0;t<i.length;t++)o=(k(i[t],e).exec(s)||[])[0],o&&(s=s.slice(s.indexOf(o)+o.length)),ue[i[t]]&&_(i[t],o,e);s&&(e._il=s),e._isPm&&e._a[3]<12&&(e._a[3]+=12),e._isPm===!1&&12===e._a[3]&&(e._a[3]=0),C(e)}function x(e){var t,o,i,s,n,a=99;for(s=0;s<e._f.length;s++)t=l({},e),t._f=e._f[s],S(t),o=new r(t),n=p(t._a,o.toArray()),o._il&&(n+=o._il.length),a>n&&(a=n,i=o);l(e,i)}function T(e){var t,o=e._i,i=ee.exec(o);if(i){for(e._f="YYYY-MM-DD"+(i[2]||" "),t=0;4>t;t++)if(oe[t][1].exec(o)){e._f+=oe[t][0];break}Z.exec(o)&&(e._f+=" Z"),S(e)}else e._d=new Date(o)}function j(e){var t=e._i,i=R.exec(t);t===o?e._d=new Date:i?e._d=new Date(+i[1]):"string"==typeof t?T(e):h(t)?(e._a=t.slice(0),C(e)):e._d=t instanceof Date?new Date(+t):new Date(t)}function E(e,t,o,i,s){return s.relativeTime(t||1,!!o,e,i)}function O(e,t,o){var i=U(Math.abs(e)/1e3),s=U(i/60),n=U(s/60),r=U(n/24),a=U(r/365),l=45>i&&["s",i]||1===s&&["m"]||45>s&&["mm",s]||1===n&&["h"]||22>n&&["hh",n]||1===r&&["d"]||25>=r&&["dd",r]||45>=r&&["M"]||345>r&&["MM",U(r/30)]||1===a&&["y"]||["yy",a];return l[2]=t,l[3]=e>0,l[4]=o,E.apply({},l)}function A(e,t,o){var i,s=o-t,n=o-e.day();return n>s&&(n-=7),s-7>n&&(n+=7),i=L(e).add("d",n),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function P(e){var t=e._i,o=e._f;return null===t||""===t?null:("string"==typeof t&&(e._i=t=v().preparse(t)),L.isMoment(t)?(e=l({},t),e._d=new Date(+t._d)):o?h(o)?x(e):S(e):j(e),new r(e))}function M(e,t){L.fn[e]=L.fn[e+"s"]=function(e){var o=this._isUTC?"UTC":"";return null!=e?(this._d["set"+o+t](e),L.updateOffset(this),this):this._d["get"+o+t]()}}function D(e){L.duration.fn[e]=function(){return this._data[e]}}function I(e,t){L.duration.fn["as"+e]=function(){return+this/t}}for(var L,$,N="2.1.0",U=Math.round,z={},B="undefined"!=typeof t&&t.exports,R=/^\/?Date\((\-?\d+)/i,F=/(\-)?(\d*)?\.?(\d+)\:(\d+)\:(\d+)\.?(\d{3})?/,W=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,H=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,q=/\d\d?/,Y=/\d{1,3}/,G=/\d{3}/,V=/\d{1,4}/,J=/[+\-]?\d{1,6}/,K=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Z=/Z|[\+\-]\d\d:?\d\d/i,Q=/T/i,X=/[\+\-]?\d+(\.\d{1,3})?/,ee=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,te="YYYY-MM-DDTHH:mm:ssZ",oe=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ie=/([\+\-]|\d\d)/gi,se="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),ne={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},re={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",M:"month",y:"year"},ae={},le="DDD w W M D d".split(" "),ce="M D H h m s w W".split(" "),ue={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return u(this.year()%100,2)},YYYY:function(){return u(this.year(),4)},YYYYY:function(){return u(this.year(),5)},gg:function(){return u(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return u(this.weekYear(),5)},GG:function(){return u(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return u(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return u(~~(this.milliseconds()/10),2)},SSS:function(){return u(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+u(~~(e/60),2)+":"+u(~~e%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+u(~~(10*e/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}};le.length;)$=le.pop(),ue[$+"o"]=s(ue[$],$);for(;ce.length;)$=ce.pop(),ue[$+$]=i(ue[$],2);for(ue.DDDD=i(ue.DDD,3),n.prototype={set:function(e){var t,o;for(o in e)t=e[o],"function"==typeof t?this[o]=t:this["_"+o]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,o,i;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(o=L([2e3,t]),i="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[t]=new RegExp(i.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,o,i;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(o=L([2e3,1]).day(t),i="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase()[0]},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,o){return e>11?o?"pm":"PM":o?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var o=this._calendar[e];return"function"==typeof o?o.apply(t):o},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,o,i){var s=this._relativeTime[o];return"function"==typeof s?s(e,t,o,i):s.replace(/%d/i,e)},pastFuture:function(e,t){var o=this._relativeTime[e>0?"future":"past"];return"function"==typeof o?o(t):o.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return A(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6}},L=function(e,t,o){return P({_i:e,_f:t,_l:o,_isUTC:!1})},L.utc=function(e,t,o){return P({_useUTC:!0,_isUTC:!0,_l:o,_i:e,_f:t})},L.unix=function(e){return L(1e3*e)},L.duration=function(e,t){var o,i,s=L.isDuration(e),n="number"==typeof e,r=s?e._input:n?{}:e,l=F.exec(e);return n?t?r[t]=e:r.milliseconds=e:l&&(o="-"===l[1]?-1:1,r={y:0,d:~~l[2]*o,h:~~l[3]*o,m:~~l[4]*o,s:~~l[5]*o,ms:~~l[6]*o}),i=new a(r),s&&e.hasOwnProperty("_lang")&&(i._lang=e._lang),i},L.version=N,L.defaultFormat=te,L.updateOffset=function(){},L.lang=function(e,t){return e?(t?m(e,t):z[e]||v(e),void(L.duration.fn._lang=L.fn._lang=v(e))):L.fn._lang._abbr},L.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),v(e)},L.isMoment=function(e){return e instanceof r},L.isDuration=function(e){return e instanceof a},L.fn=r.prototype={clone:function(){return L(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return w(L(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return null==this._isValid&&(this._a?this._isValid=!p(this._a,(this._isUTC?L.utc(this._a):L(this._a)).toArray()):this._isValid=!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var t=w(this,e||L.defaultFormat);return this.lang().postformat(t)},add:function(e,t){var o;return o="string"==typeof e?L.duration(+t,e):L.duration(e,t),d(this,o,1),this},subtract:function(e,t){var o;return o="string"==typeof e?L.duration(+t,e):L.duration(e,t),d(this,o,-1),this},diff:function(e,t,o){var i,s,n=this._isUTC?L(e).zone(this._offset||0):L(e).local(),r=6e4*(this.zone()-n.zone());return t=f(t),"year"===t||"month"===t?(i=432e5*(this.daysInMonth()+n.daysInMonth()),s=12*(this.year()-n.year())+(this.month()-n.month()),s+=(this-L(this).startOf("month")-(n-L(n).startOf("month")))/i,s-=6e4*(this.zone()-L(this).startOf("month").zone()-(n.zone()-L(n).startOf("month").zone()))/i,"year"===t&&(s/=12)):(i=this-n,s="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-r)/864e5:"week"===t?(i-r)/6048e5:i),o?s:c(s)},from:function(e,t){return L.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},fromNow:function(e){return this.from(L(),e)},calendar:function(){var e=this.diff(L().startOf("day"),"days",!0),t=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(t,this))},isLeapYear:function(){var e=this.year();return e%4===0&&e%100!==0||e%400===0},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?"string"==typeof e&&(e=this.lang().weekdaysParse(e),"number"!=typeof e)?this:this.add({d:e-t}):t},month:function(e){var t,o=this._isUTC?"UTC":"";return null!=e?"string"==typeof e&&(e=this.lang().monthsParse(e),"number"!=typeof e)?this:(t=this.date(),this.date(1),this._d["set"+o+"Month"](e),this.date(Math.min(t,this.daysInMonth())),L.updateOffset(this),this):this._d["get"+o+"Month"]()},startOf:function(e){switch(e=f(e)){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),this},endOf:function(e){return this.startOf(e).add(e,1).subtract("ms",1)},isAfter:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)>+L(e).startOf(t)},isBefore:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)<+L(e).startOf(t)},isSame:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)===+L(e).startOf(t)},min:function(e){return e=L.apply(null,arguments),this>e?this:e},max:function(e){return e=L.apply(null,arguments),e>this?this:e},zone:function(e){var t=this._offset||0;return null==e?this._isUTC?t:this._d.getTimezoneOffset():("string"==typeof e&&(e=y(e)),Math.abs(e)<16&&(e=60*e),this._offset=e,this._isUTC=!0,t!==e&&d(this,L.duration(t-e,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},daysInMonth:function(){return L.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(e){var t=U((L(this).startOf("day")-L(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},weekYear:function(e){var t=A(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==e?t:this.add("y",e-t)},isoWeekYear:function(e){var t=A(this,1,4).year;return null==e?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},isoWeek:function(e){var t=A(this,1,4).week;return null==e?t:this.add("d",7*(e-t))},weekday:function(e){var t=(this._d.getDay()+7-this.lang()._week.dow)%7;return null==e?t:this.add("d",e-t)},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},lang:function(e){return e===o?this._lang:(this._lang=v(e),this)}},$=0;$<se.length;$++)M(se[$].toLowerCase().replace(/s$/,""),se[$]);M("year","FullYear"),L.fn.days=L.fn.day,L.fn.months=L.fn.month,L.fn.weeks=L.fn.week,L.fn.isoWeeks=L.fn.isoWeek,L.fn.toJSON=L.fn.toISOString,L.duration.fn=a.prototype={_bubble:function(){var e,t,o,i,s=this._milliseconds,n=this._days,r=this._months,a=this._data;a.milliseconds=s%1e3,e=c(s/1e3),a.seconds=e%60,t=c(e/60),a.minutes=t%60,o=c(t/60),a.hours=o%24,n+=c(o/24),a.days=n%30,r+=c(n/30),a.months=r%12,i=c(r/12),a.years=i},weeks:function(){return c(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*~~(this._months/12)},humanize:function(e){var t=+this,o=O(t,!e,this.lang());return e&&(o=this.lang().pastFuture(t,o)),this.lang().postformat(o)},add:function(e,t){var o=L.duration(e,t);return this._milliseconds+=o._milliseconds,this._days+=o._days,this._months+=o._months,this._bubble(),this},subtract:function(e,t){var o=L.duration(e,t);return this._milliseconds-=o._milliseconds,this._days-=o._days,this._months-=o._months,this._bubble(),this},get:function(e){return e=f(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=f(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:L.fn.lang};for($ in ne)ne.hasOwnProperty($)&&(I($,ne[$]),D($.toLowerCase()));I("Weeks",6048e5),L.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},L.lang("en",{ordinal:function(e){var t=e%10,o=1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+o}}),B&&(t.exports=L),"undefined"==typeof ender&&(this.moment=L),"function"==typeof define&&define.amd&&define("moment",[],function(){return L})}).call(this)},{}],"/opt/seelio/node_modules/qs/index.js":[function(e,t,o){function i(e,t){if(0==e[t].length)return e[t]={};var o={};for(var i in e[t])o[i]=e[t][i];return e[t]=o,o}function s(e,t,o,n){var r=e.shift();if(r){var a=t[o]=t[o]||[];"]"==r?Array.isArray(a)?""!=n&&a.push(n):"object"==typeof a?a[Object.keys(a).length]=n:a=t[o]=[t[o],n]:~r.indexOf("]")?(r=r.substr(0,r.length-1),!m.test(r)&&Array.isArray(a)&&(a=i(t,o)),s(e,a,r,n)):(!m.test(r)&&Array.isArray(a)&&(a=i(t,o)),s(e,a,r,n))}else Array.isArray(t[o])?t[o].push(n):"object"==typeof t[o]?t[o]=n:"undefined"==typeof t[o]?t[o]=n:t[o]=[t[o],n]}function n(e,t,o){if(~t.indexOf("]")){var i=t.split("[");i.length;s(i,e,"base",o)}else{if(!m.test(t)&&Array.isArray(e.base)){var n={};for(var r in e.base)n[r]=e.base[r];e.base=n}d(e.base,t,o)}return e}function r(e){var t={base:{}};return Object.keys(e).forEach(function(o){n(t,o,e[o])}),t.base}function a(e){return String(e).split("&").reduce(function(e,t){var o=t.indexOf("="),i=h(t),s=t.substr(0,i||o),r=t.substr(i||o,t.length),r=r.substr(r.indexOf("=")+1,r.length);return""==s&&(s=t,r=""),""==s?e:n(e,p(s),p(r))},{base:{}}).base}function l(e,t){if(!t)throw new TypeError("stringify expects an object");return t+"="+encodeURIComponent(e)}function c(e,t){var o=[];if(!t)throw new TypeError("stringify expects an object");for(var i=0;i<e.length;i++)o.push(v(e[i],t+"["+i+"]"));return o.join("&")}function u(e,t){for(var o,i=[],s=Object.keys(e),n=0,r=s.length;r>n;++n)o=s[n],""!=o&&(null==e[o]?i.push(encodeURIComponent(o)+"="):i.push(v(e[o],t?t+"["+encodeURIComponent(o)+"]":encodeURIComponent(o))));return i.join("&")}function d(e,t,o){var i=e[t];void 0===i?e[t]=o:Array.isArray(i)?i.push(o):e[t]=[i,o]}function h(e){for(var t,o,i=e.length,s=0;i>s;++s)if(o=e[s],"]"==o&&(t=!1),"["==o&&(t=!0),"="==o&&!t)return s}function p(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}}var f=Object.prototype.toString,m=/^[0-9]+$/;o.parse=function(e){return null==e||""==e?{}:"object"==typeof e?r(e):a(e)};var v=o.stringify=function(e,t){return Array.isArray(e)?c(e,t):"[object Object]"==f.call(e)?u(e,t):"string"==typeof e?l(e,t):t+"="+encodeURIComponent(String(e))}},{}],"/opt/seelio/node_modules/select2/index.js":[function(e,t,o){$=jQuery=e("jquery"),t.exports=e("./select2.js")},{"./select2.js":"/opt/seelio/node_modules/select2/select2.js",jquery:"jquery"}],"/opt/seelio/node_modules/select2/select2.js":[function(e,t,o){!function(e){"undefined"==typeof e.fn.each2&&e.extend(e.fn,{each2:function(t){for(var o=e([0]),i=-1,s=this.length;++i<s&&(o.context=o[0]=this[i])&&t.call(o[0],i,o)!==!1;);return this}})}(jQuery),function(e,o){"use strict";function i(e){var t,o,i,s;if(!e||e.length<1)return e;for(t="",o=0,i=e.length;i>o;o++)s=e.charAt(o),t+=B[s]||s;return t}function s(e,t){for(var o=0,i=t.length;i>o;o+=1)if(r(e,t[o]))return o;return-1}function n(){var t=e(z);t.appendTo("body");var o={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),o}function r(e,t){return e===t?!0:e===o||t===o?!1:null===e||null===t?!1:e.constructor===String?e+""==t+"":t.constructor===String?t+""==e+"":!1}function a(t,o){var i,s,n;if(null===t||t.length<1)return[];for(i=t.split(o),s=0,n=i.length;n>s;s+=1)i[s]=e.trim(i[s]);return i}function l(e){return e.outerWidth(!1)-e.width()}function c(t){var i="keyup-change-value";t.on("keydown",function(){e.data(t,i)===o&&e.data(t,i,t.val())}),t.on("keyup",function(){var s=e.data(t,i);s!==o&&t.val()!==s&&(e.removeData(t,i),t.trigger("keyup-change"))})}function u(t){t.on("mousemove",function(t){var i=U;i!==o&&i.x===t.pageX&&i.y===t.pageY||e(t.target).trigger("mousemove-filtered",t)})}function d(e,t,i){i=i||o;var s;return function(){var o=arguments;window.clearTimeout(s),s=window.setTimeout(function(){t.apply(i,o)},e)}}function h(e){var t,o=!1;return function(){return o===!1&&(t=e(),o=!0),t}}function p(e,t){var o=d(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){s(e.target,t.get())>=0&&o(e)})}function f(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,o=e[0],i=e.val().length;e.focus(),e.is(":visible")&&o===document.activeElement&&(o.setSelectionRange?o.setSelectionRange(i,i):o.createTextRange&&(t=o.createTextRange(),t.collapse(!1),t.select()))},0)}function m(t){t=e(t)[0];var o=0,i=0;if("selectionStart"in t)o=t.selectionStart,i=t.selectionEnd-o;else if("selection"in document){t.focus();var s=document.selection.createRange();i=document.selection.createRange().text.length,s.moveStart("character",-t.value.length),o=s.text.length-i}return{offset:o,length:i}}function v(e){e.preventDefault(),e.stopPropagation()}function g(e){e.preventDefault(),e.stopImmediatePropagation()}function b(t){if(!L){var o=t[0].currentStyle||window.getComputedStyle(t[0],null);L=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:o.fontSize,fontFamily:o.fontFamily,fontStyle:o.fontStyle,fontWeight:o.fontWeight,letterSpacing:o.letterSpacing,textTransform:o.textTransform,whiteSpace:"nowrap"}),L.attr("class","select2-sizer"),e("body").append(L)}return L.text(t.val()),L.width()}function w(t,o,i){var s,n,r=[];s=t.attr("class"),s&&(s=""+s,e(s.split(" ")).each2(function(){0===this.indexOf("select2-")&&r.push(this)})),s=o.attr("class"),s&&(s=""+s,e(s.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(n=i(this),n&&r.push(n))})),t.attr("class",r.join(" "))}function k(e,t,o,s){var n=i(e.toUpperCase()).indexOf(i(t.toUpperCase())),r=t.length;return 0>n?void o.push(s(e)):(o.push(s(e.substring(0,n))),o.push("<span class='select2-match'>"),o.push(s(e.substring(n,n+r))),o.push("</span>"),void o.push(s(e.substring(n+r,e.length))))}function y(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function _(t){var i,s=null,n=t.quietMillis||100,r=t.url,a=this;return function(l){window.clearTimeout(i),i=window.setTimeout(function(){var i=t.data,n=r,c=t.transport||e.fn.select2.ajaxDefaults.transport,u={type:t.type||"GET",cache:t.cache||!1,jsonpCallback:t.jsonpCallback||o,dataType:t.dataType||"json"},d=e.extend({},e.fn.select2.ajaxDefaults.params,u);i=i?i.call(a,l.term,l.page,l.context):null,n="function"==typeof n?n.call(a,l.term,l.page,l.context):n,s&&s.abort(),t.params&&(e.isFunction(t.params)?e.extend(d,t.params.call(a)):e.extend(d,t.params)),e.extend(d,{url:n,dataType:t.dataType,data:i,success:function(e){var o=t.results(e,l.page);l.callback(o)}}),s=c.call(a,d)},n)}}function C(t){var o,i,s=t,n=function(e){return""+e.text};e.isArray(s)&&(i=s,s={results:i}),e.isFunction(s)===!1&&(i=s,s=function(){return i});var r=s();return r.text&&(n=r.text,e.isFunction(n)||(o=r.text,n=function(e){return e[o]})),function(t){var o,i=t.term,r={results:[]};return""===i?void t.callback(s()):(o=function(s,r){var a,l;if(s=s[0],s.children){a={};for(l in s)s.hasOwnProperty(l)&&(a[l]=s[l]);a.children=[],e(s.children).each2(function(e,t){o(t,a.children)}),(a.children.length||t.matcher(i,n(a),s))&&r.push(a)}else t.matcher(i,n(s),s)&&r.push(s)},e(s().results).each2(function(e,t){o(t,r.results)}),void t.callback(r))}}function S(t){var i=e.isFunction(t);return function(s){var n=s.term,r={results:[]};e(i?t():t).each(function(){var e=this.text!==o,t=e?this.text:this;(""===n||s.matcher(n,t))&&r.results.push(e?this:{id:this,text:this})}),s.callback(r)}}function x(t,o){if(e.isFunction(t))return!0;if(!t)return!1;throw new Error(o+" must be a function or a falsy value")}function T(t){return e.isFunction(t)?t():t}function j(t){var o=0;return e.each(t,function(e,t){t.children?o+=j(t.children):o++}),o}function E(e,t,i,s){var n,a,l,c,u,d=e,h=!1;if(!s.createSearchChoice||!s.tokenSeparators||s.tokenSeparators.length<1)return o;for(;;){for(a=-1,l=0,c=s.tokenSeparators.length;c>l&&(u=s.tokenSeparators[l],a=e.indexOf(u),!(a>=0));l++);if(0>a)break;if(n=e.substring(0,a),e=e.substring(a+u.length),n.length>0&&(n=s.createSearchChoice.call(this,n,t),n!==o&&null!==n&&s.id(n)!==o&&null!==s.id(n))){for(h=!1,l=0,c=t.length;c>l;l++)if(r(s.id(n),s.id(t[l]))){h=!0;break}h||i(n)}}return d!==e?e:void 0}function O(t,o){var i=function(){};return i.prototype=new t,i.prototype.constructor=i,i.prototype.parent=t.prototype,i.prototype=e.extend(i.prototype,o),i}if(window.Select2===o){var A,P,M,D,I,L,$,N,U={x:0,y:0},A={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case A.LEFT:case A.RIGHT:case A.UP:case A.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case A.SHIFT:case A.CTRL:case A.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},z="<div class='select2-measure-scrollbar'></div>",B={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g",
"ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z"};$=e(document),I=function(){var e=1;return function(){return e++}}(),$.on("mousemove",function(e){U.x=e.pageX,U.y=e.pageY}),P=O(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(t){var i,s,r=".select2-results";this.opts=t=this.prepareOpts(t),this.id=t.id,t.element.data("select2")!==o&&null!==t.element.data("select2")&&t.element.data("select2").destroy(),this.container=this.createContainer(),this.containerId="s2id_"+(t.element.attr("id")||"autogen"+I()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=h(function(){return t.element.closest("body")}),w(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",t.element.attr("style")),this.container.css(T(t.containerCss)),this.container.addClass(T(t.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",v),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),w(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(T(t.dropdownCssClass)),this.dropdown.data("select2",this),this.dropdown.on("click",v),this.results=i=this.container.find(r),this.search=s=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",v),u(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",r,this.bind(this.highlightUnderEvent)),p(80,this.results),this.dropdown.on("scroll-debounced",r,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&i.mousewheel(function(e,t,o,s){var n=i.scrollTop();s>0&&0>=n-s?(i.scrollTop(0),v(e)):0>s&&i.get(0).scrollHeight-i.scrollTop()+s<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),v(e))}),c(s),s.on("keyup-change input paste",this.bind(this.updateResults)),s.on("focus",function(){s.addClass("select2-focused")}),s.on("blur",function(){s.removeClass("select2-focused")}),this.dropdown.on("mouseup",r,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown",function(e){e.stopPropagation()}),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==t.maximumInputLength&&this.search.attr("maxlength",t.maximumInputLength);var a=t.element.prop("disabled");a===o&&(a=!1),this.enable(!a);var l=t.element.prop("readonly");l===o&&(l=!1),this.readonly(l),N=N||n(),this.autofocus=t.element.prop("autofocus"),t.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.nextSearchTerm=o},destroy:function(){var e=this.opts.element,t=e.data("select2");this.close(),this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),t!==o&&(t.container.remove(),t.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show())},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:r(e.attr("locked"),"locked")||r(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(t){var i,s,n,l,c=this;if(i=t.element,"select"===i.get(0).tagName.toLowerCase()&&(this.select=s=t.element),s&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in t)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),t=e.extend({},{populateResults:function(i,s,n){var r,a=this.opts.id;(r=function(i,s,l){var u,d,h,p,f,m,v,g,b,w;for(i=t.sortResults(i,s,n),u=0,d=i.length;d>u;u+=1)h=i[u],f=h.disabled===!0,p=!f&&a(h)!==o,m=h.children&&h.children.length>0,v=e("<li></li>"),v.addClass("select2-results-dept-"+l),v.addClass("select2-result"),v.addClass(p?"select2-result-selectable":"select2-result-unselectable"),f&&v.addClass("select2-disabled"),m&&v.addClass("select2-result-with-children"),v.addClass(c.opts.formatResultCssClass(h)),v.attr("role","presentation"),g=e(document.createElement("div")),g.addClass("select2-result-label"),g.attr("id","select2-result-label-"+I()),g.attr("role","option"),w=t.formatResult(h,g,n,c.opts.escapeMarkup),w!==o&&g.html(w),v.append(g),m&&(b=e("<ul></ul>"),b.addClass("select2-result-sub"),r(h.children,b,l+1),v.append(b)),v.data("select2-data",h),s.append(v)})(s,i,0)}},e.fn.select2.defaults,t),"function"!=typeof t.id&&(n=t.id,t.id=function(e){return e[n]}),e.isArray(t.element.data("select2Tags"))){if("tags"in t)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+t.element.attr("id");t.tags=t.element.data("select2Tags")}if(s?(t.query=this.bind(function(e){var t,s,n,r={results:[],more:!1},a=e.term;n=function(t,o){var i;t.is("option")?e.matcher(a,t.text(),t)&&o.push(c.optionToData(t)):t.is("optgroup")&&(i=c.optionToData(t),t.children().each2(function(e,t){n(t,i.children)}),i.children.length>0&&o.push(i))},t=i.children(),this.getPlaceholder()!==o&&t.length>0&&(s=this.getPlaceholderOption(),s&&(t=t.not(s))),t.each2(function(e,t){n(t,r.results)}),e.callback(r)}),t.id=function(e){return e.id}):"query"in t||("ajax"in t?(l=t.element.data("ajax-url"),l&&l.length>0&&(t.ajax.url=l),t.query=_.call(t.element,t.ajax)):"data"in t?t.query=C(t.data):"tags"in t&&(t.query=S(t.tags),t.createSearchChoice===o&&(t.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),t.initSelection===o&&(t.initSelection=function(o,i){var s=[];e(a(o.val(),t.separator)).each(function(){var o={id:this,text:this},i=t.tags;e.isFunction(i)&&(i=i()),e(i).each(function(){return r(this.id,o.id)?(o=this,!1):void 0}),s.push(o)}),i(s)}))),"function"!=typeof t.query)throw"query function not defined for Select2 "+t.element.attr("id");return t},monitorSource:function(){var e,t,i=this.opts.element;i.on("change.select2",this.bind(function(e){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),e=this.bind(function(){var e=i.prop("disabled");e===o&&(e=!1),this.enable(!e);var t=i.prop("readonly");t===o&&(t=!1),this.readonly(t),w(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(T(this.opts.containerCssClass)),w(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(T(this.opts.dropdownCssClass))}),i.on("propertychange.select2",e),this.mutationCallback===o&&(this.mutationCallback=function(t){t.forEach(e)}),t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,t!==o&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new t(this.mutationCallback),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var o=e.Event("select2-selecting",{val:this.id(t),object:t});return this.opts.element.trigger(o),!o.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===o&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){return e===o&&(e=!1),this._readonly===e?!1:(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface(),!0)},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,o,i,s,n,r=this.dropdown,a=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),u=r.outerHeight(!1),d=e(window),h=d.width(),p=d.height(),f=d.scrollLeft()+h,m=d.scrollTop()+p,v=a.top+l,g=a.left,b=m>=v+u,w=a.top-u>=this.body().scrollTop(),k=r.outerWidth(!1),y=f>=g+k,_=r.hasClass("select2-drop-above");_?(o=!0,!w&&b&&(i=!0,o=!1)):(o=!1,!b&&w&&(i=!0,o=!0)),i&&(r.hide(),a=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),u=r.outerHeight(!1),f=d.scrollLeft()+h,m=d.scrollTop()+p,v=a.top+l,g=a.left,k=r.outerWidth(!1),y=f>=g+k,r.show()),this.opts.dropdownAutoWidth?(n=e(".select2-results",r)[0],r.addClass("select2-drop-auto-width"),r.css("width",""),k=r.outerWidth(!1)+(n.scrollHeight===n.clientHeight?0:N.width),k>c?c=k:k=c,y=f>=g+k):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body().css("position")&&(t=this.body().offset(),v-=t.top,g-=t.left),y||(g-=g+k-f),s={left:g,width:c},o?(s.top=a.top-u,s.bottom="auto",this.container.addClass("select2-drop-above"),r.addClass("select2-drop-above")):(s.top=v,s.bottom="auto",this.container.removeClass("select2-drop-above"),r.removeClass("select2-drop-above")),s=e.extend(s,T(this.opts.dropdownCss)),r.css(s)},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),!0):!1},opening:function(){var t,o=this.containerId,i="scroll."+o,s="resize."+o,n="orientationchange."+o;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),t=e("#select2-drop-mask"),0==t.length&&(t=e(document.createElement("div")),t.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body()),t.on("mousedown touchstart click",function(t){var o,i=e("#select2-drop");i.length>0&&(o=i.data("select2"),o.opts.selectOnBlur&&o.selectHighlighted({noFocus:!0}),o.close({focus:!0}),t.preventDefault(),t.stopPropagation())})),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var r=this;this.container.parents().add(window).each(function(){e(this).on(s+" "+i+" "+n,function(e){r.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerId,o="scroll."+t,i="resize."+t,s="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(o).off(i).off(s)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return T(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var t,o,i,s,n,r,a,l=this.results;if(o=this.highlight(),!(0>o)){if(0==o)return void l.scrollTop(0);t=this.findHighlightableChoices().find(".select2-result-label"),i=e(t[o]),s=i.offset().top+i.outerHeight(!0),o===t.length-1&&(a=l.find("li.select2-more-results"),a.length>0&&(s=a.offset().top+a.outerHeight(!0))),n=l.offset().top+l.outerHeight(!0),s>n&&l.scrollTop(l.scrollTop()+(s-n)),r=i.offset().top-l.offset().top,0>r&&"none"!=i.css("display")&&l.scrollTop(l.scrollTop()+r)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled, .select2-selected)")},moveHighlight:function(t){for(var o=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<o.length;){i+=t;var s=e(o[i]);if(s.hasClass("select2-result-selectable")&&!s.hasClass("select2-disabled")&&!s.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(t){var o,i,n=this.findHighlightableChoices();return 0===arguments.length?s(n.filter(".select2-highlighted")[0],n.get()):(t>=n.length&&(t=n.length-1),0>t&&(t=0),this.removeHighlight(),o=e(n[t]),o.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",o.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),i=o.data("select2-data"),void(i&&this.opts.element.trigger({type:"select2-highlight",val:this.id(i),choice:i})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var o=e(t.target).closest(".select2-result-selectable");if(o.length>0&&!o.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(o))}else 0==o.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e,t=this.results,o=t.find("li.select2-more-results"),i=this.resultsPage+1,s=this,n=this.search.val(),r=this.context;0!==o.length&&(e=o.offset().top-t.offset().top-t.height(),e<=this.opts.loadMorePadding&&(o.addClass("select2-active"),this.opts.query({element:this.opts.element,term:n,page:i,context:r,matcher:this.opts.matcher,callback:this.bind(function(e){s.opened()&&(s.opts.populateResults.call(this,t,e.results,{term:n,page:i,context:r}),s.postprocessResults(e,!1,!1),e.more===!0?(o.detach().appendTo(t).text(s.opts.formatLoadMore(i+1)),window.setTimeout(function(){s.loadMoreIfNeeded()},10)):o.remove(),s.positionDropdown(),s.resultsPage=i,s.context=e.context,this.opts.element.trigger({type:"select2-loaded",items:e}))})})))},tokenize:function(){},updateResults:function(t){function i(){c.removeClass("select2-active"),h.positionDropdown()}function s(e){u.html(e),i()}var n,a,l,c=this.search,u=this.results,d=this.opts,h=this,p=c.val(),f=e.data(this.container,"select2-last-term");if((t===!0||!f||!r(p,f))&&(e.data(this.container,"select2-last-term",p),t===!0||this.showSearchInput!==!1&&this.opened())){l=++this.queryCount;var m=this.getMaximumSelectionSize();if(m>=1&&(n=this.data(),e.isArray(n)&&n.length>=m&&x(d.formatSelectionTooBig,"formatSelectionTooBig")))return void s("<li class='select2-selection-limit'>"+d.formatSelectionTooBig(m)+"</li>");if(c.val().length<d.minimumInputLength)return s(x(d.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+d.formatInputTooShort(c.val(),d.minimumInputLength)+"</li>":""),void(t&&this.showSearch&&this.showSearch(!0));if(d.maximumInputLength&&c.val().length>d.maximumInputLength)return void s(x(d.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+d.formatInputTooLong(c.val(),d.maximumInputLength)+"</li>":"");d.formatSearching&&0===this.findHighlightableChoices().length&&s("<li class='select2-searching'>"+d.formatSearching()+"</li>"),c.addClass("select2-active"),this.removeHighlight(),a=this.tokenize(),a!=o&&null!=a&&c.val(a),this.resultsPage=1,d.query({element:d.element,term:c.val(),page:this.resultsPage,context:null,matcher:d.matcher,callback:this.bind(function(n){var a;if(l==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(this.context=n.context===o?null:n.context,this.opts.createSearchChoice&&""!==c.val()&&(a=this.opts.createSearchChoice.call(h,c.val(),n.results),a!==o&&null!==a&&h.id(a)!==o&&null!==h.id(a)&&0===e(n.results).filter(function(){return r(h.id(this),h.id(a))}).length&&n.results.unshift(a)),0===n.results.length&&x(d.formatNoMatches,"formatNoMatches"))return void s("<li class='select2-no-results'>"+d.formatNoMatches(c.val())+"</li>");u.empty(),h.opts.populateResults.call(this,u,n.results,{term:c.val(),page:this.resultsPage,context:null}),n.more===!0&&x(d.formatLoadMore,"formatLoadMore")&&(u.append("<li class='select2-more-results'>"+h.opts.escapeMarkup(d.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(n,t),i(),this.opts.element.trigger({type:"select2-loaded",items:n})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){f(this.search)},selectHighlighted:function(e){var t=this.highlight(),o=this.results.find(".select2-highlighted"),i=o.closest(".select2-result").data("select2-data");i?(this.highlight(t),this.onSelect(i,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==o?e.text():o)},getPlaceholderOption:function(){if(this.select){var e=this.select.children("option").first();if(this.opts.placeholderOption!==o)return"first"===this.opts.placeholderOption&&e||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.text()&&""===e.val())return e}},initContainerWidth:function(){function t(){var t,i,s,n,r,a;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(t=this.opts.element.attr("style"),t!==o)for(i=t.split(";"),n=0,r=i.length;r>n;n+=1)if(a=i[n].replace(/\s/g,""),s=a.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==s&&s.length>=1)return s[1];return"resolve"===this.opts.width?(t=this.opts.element.css("width"),t.indexOf("%")>0?t:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var i=t.call(this);null!==i&&this.container.css("width",i)}}),M=O(P,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' title='Search field' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return t},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var t,i,s;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.search.focus(),t=this.search.get(0),t.createTextRange?(i=t.createTextRange(),i.collapse(!1),i.select()):t.setSelectionRange&&(s=this.search.val().length,t.setSelectionRange(s,s)),""===this.search.val()&&this.nextSearchTerm!=o&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(e){this.opened()&&(this.parent.close.apply(this,arguments),e=e||{focus:!0},this.focusser.removeAttr("disabled"),e.focus&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments)},initContainer:function(){var t,o,i=this.container,s=this.dropdown,n=I();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+n),this.focusser.attr("aria-labelledby","select2-chosen-"+n),this.results.attr("id","select2-results-"+n),this.search.attr("aria-owns","select2-results-"+n),this.focusser.attr("id","s2id_autogen"+n),o=e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id"));var r=this.opts.element.attr("title");this.opts.element.attr("title",r||o.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){if(e.which===A.PAGE_UP||e.which===A.PAGE_DOWN)return void v(e);switch(e.which){case A.UP:case A.DOWN:return this.moveHighlight(e.which===A.UP?-1:1),void v(e);case A.ENTER:return this.selectHighlighted(),void v(e);case A.TAB:return void this.selectHighlighted({noFocus:!0});case A.ESC:return this.cancel(e),void v(e)}}})),this.search.on("blur",this.bind(function(e){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==A.TAB&&!A.isControl(e)&&!A.isFunctionKey(e)&&e.which!==A.ESC){if(this.opts.openOnEnter===!1&&e.which===A.ENTER)return void v(e);if(e.which==A.DOWN||e.which==A.UP||e.which==A.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void v(e)}return e.which==A.DELETE||e.which==A.BACKSPACE?(this.opts.allowClear&&this.clear(),void v(e)):void 0}})),c(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),g(e),this.close(),this.selection.focus())})),t.on("mousedown",this.bind(function(t){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),v(t)})),s.on("mousedown",this.bind(function(){this.search.focus()})),t.on("focus",this.bind(function(e){v(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(t){var o=this.selection.data("select2-data");if(o){var i=e.Event("select2-clearing");if(this.opts.element.trigger(i),i.isDefaultPrevented())return;var s=this.getPlaceholderOption();this.opts.element.val(s?s.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),t!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(o),choice:o}),this.triggerChange({removed:o}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(t){t!==o&&null!==t&&(e.updateSelection(t),e.close(),e.setPlaceholder())})}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()?(e=this.getPlaceholderOption())!==o&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===o||null===this.opts.element.val():!1},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),o=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=e.find("option").filter(function(){return this.selected});t(o.optionToData(i))}:"data"in t&&(t.initSelection=t.initSelection||function(o,i){var s=o.val(),n=null;t.query({matcher:function(e,o,i){var a=r(s,t.id(i));return a&&(n=i),a},callback:e.isFunction(i)?function(){i(n)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===o?o:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==o){if(this.select&&this.getPlaceholderOption()===o)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,o){var i=0,s=this;if(this.findHighlightableChoices().each2(function(e,t){return r(s.id(t.data("select2-data")),s.opts.element.val())?(i=e,!1):void 0}),o!==!1&&(t===!0&&i>=0?this.highlight(i):this.highlight(0)),t===!0){var n=this.opts.minimumResultsForSearch;n>=0&&this.showSearch(j(e.results)>=n)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var o=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||this.focusser.focus(),r(o,this.id(e))||this.triggerChange({added:e,removed:i})}},updateSelection:function(e){var t,i,s=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),s.empty(),null!==e&&(t=this.opts.formatSelection(e,s,this.opts.escapeMarkup)),t!==o&&s.append(t),i=this.opts.formatSelectionCssClass(e,s),i!==o&&s.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==o&&this.container.addClass("select2-allowclear")},val:function(){var e,t=!1,i=null,s=this,n=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(t=arguments[1]),this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return i=s.optionToData(t),!1}),this.updateSelection(i),this.setPlaceholder(),t&&this.triggerChange({added:i,removed:n});else{if(!e&&0!==e)return void this.clear(t);if(this.opts.initSelection===o)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){s.opts.element.val(e?s.id(e):""),s.updateSelection(e),s.setPlaceholder(),t&&s.triggerChange({added:e,removed:n})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var t,i=!1;return 0===arguments.length?(t=this.selection.data("select2-data"),t==o&&(t=null),t):(arguments.length>1&&(i=arguments[1]),void(e?(t=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),i&&this.triggerChange({added:e,removed:t})):this.clear(i)))}}),D=O(P,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),o=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=[];e.find("option").filter(function(){return this.selected}).each2(function(e,t){i.push(o.optionToData(t))}),t(i)}:"data"in t&&(t.initSelection=t.initSelection||function(o,i){var s=a(o.val(),t.separator),n=[];t.query({matcher:function(o,i,a){var l=e.grep(s,function(e){return r(e,t.id(a))}).length;return l&&n.push(a),l},callback:e.isFunction(i)?function(){
for(var e=[],o=0;o<s.length;o++)for(var a=s[o],l=0;l<n.length;l++){var c=n[l];if(r(a,t.id(c))){e.push(c),n.splice(l,1);break}}i(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments)},initContainer:function(){var t,o=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(o);var i=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(t){i.search[0].focus(),i.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+I()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var o=t.find(".select2-search-choice-focus"),i=o.prev(".select2-search-choice:not(.select2-locked)"),s=o.next(".select2-search-choice:not(.select2-locked)"),n=m(this.search);if(o.length&&(e.which==A.LEFT||e.which==A.RIGHT||e.which==A.BACKSPACE||e.which==A.DELETE||e.which==A.ENTER)){var r=o;return e.which==A.LEFT&&i.length?r=i:e.which==A.RIGHT?r=s.length?s:null:e.which===A.BACKSPACE?(this.unselect(o.first()),this.search.width(10),r=i.length?i:s):e.which==A.DELETE?(this.unselect(o.first()),this.search.width(10),r=s.length?s:null):e.which==A.ENTER&&(r=null),this.selectChoice(r),v(e),void(r&&r.length||this.open())}if((e.which===A.BACKSPACE&&1==this.keydowns||e.which==A.LEFT)&&0==n.offset&&!n.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void v(e);if(this.selectChoice(null),this.opened())switch(e.which){case A.UP:case A.DOWN:return this.moveHighlight(e.which===A.UP?-1:1),void v(e);case A.ENTER:return this.selectHighlighted(),void v(e);case A.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case A.ESC:return this.cancel(e),void v(e)}if(e.which!==A.TAB&&!A.isControl(e)&&!A.isFunctionKey(e)&&e.which!==A.BACKSPACE&&e.which!==A.ESC){if(e.which===A.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),e.which!==A.PAGE_UP&&e.which!==A.PAGE_DOWN||v(e),e.which===A.ENTER&&v(e)}}})),this.search.on("keyup",this.bind(function(e){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",o,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",o,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(t){t!==o&&null!==t&&(e.updateSelection(t),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),t=this.getMaxSearchWidth();e!==o&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(t>0?t:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var o=[],i=[],n=this;e(t).each(function(){s(n.id(this),o)<0&&(o.push(n.id(this)),i.push(this))}),t=i,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){n.addSelectedChoice(this)}),n.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=o&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),!this.select&&this.opts.closeOnSelect||this.postprocessResults(e,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(t){var i,s,n=!t.locked,r=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),a=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=n?r:a,c=this.id(t),u=this.getVal();i=this.opts.formatSelection(t,l.find("div"),this.opts.escapeMarkup),i!=o&&l.find("div").replaceWith("<div>"+i+"</div>"),s=this.opts.formatSelectionCssClass(t,l.find("div")),s!=o&&l.addClass(s),n&&l.find(".select2-search-choice-close").on("mousedown",v).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),v(t))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",t),l.insertBefore(this.searchContainer),u.push(c),this.setVal(u)},unselect:function(t){var o,i,n=this.getVal();if(t=t.closest(".select2-search-choice"),0===t.length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(o=t.data("select2-data")){for(;(i=s(this.id(o),n))>=0;)n.splice(i,1),this.setVal(n),this.select&&this.postprocessResults();var r=e.Event("select2-removing");r.val=this.id(o),r.choice=o,this.opts.element.trigger(r),r.isDefaultPrevented()||(t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(o),choice:o}),this.triggerChange({removed:o}))}},postprocessResults:function(e,t,o){var i=this.getVal(),n=this.results.find(".select2-result"),r=this.results.find(".select2-result-with-children"),a=this;n.each2(function(e,t){var o=a.id(t.data("select2-data"));s(o,i)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),r.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&o!==!1&&a.highlight(0),!this.opts.createSearchChoice&&!n.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&x(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+a.opts.formatNoMatches(a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-l(this.search)},resizeSearch:function(){var e,t,o,i,s,n=l(this.search);e=b(this.search)+10,t=this.search.offset().left,o=this.selection.width(),i=this.selection.offset().left,s=o-(t-i)-n,e>s&&(s=o-n),40>s&&(s=o-n),0>=s&&(s=e),this.search.width(Math.floor(s))},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),a(e,this.opts.separator))},setVal:function(t){var o;this.select?this.select.val(t):(o=[],e(t).each(function(){s(this,o)<0&&o.push(this)}),this.opts.element.val(0===o.length?"":o.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),o=0;o<t.length;o++)for(var i=0;i<e.length;i++)r(this.opts.id(t[o]),this.opts.id(e[i]))&&(t.splice(o,1),o>0&&o--,e.splice(i,1),i--);return{added:t,removed:e}},val:function(t,i){var s,n=this;if(0===arguments.length)return this.getVal();if(s=this.data(),s.length||(s=[]),!t&&0!==t)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:s}));if(this.setVal(t),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(s,this.data()));else{if(this.opts.initSelection===o)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var o=e.map(t,n.id);n.setVal(o),n.updateSelection(t),n.clearSearch(),i&&n.triggerChange(n.buildChangeDetails(s,n.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],o=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(o.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,o){var i,s,n=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(s=this.data(),t||(t=[]),i=e.map(t,function(e){return n.opts.id(e)}),this.setVal(i),this.updateSelection(t),this.clearSearch(),o&&this.triggerChange(this.buildChangeDetails(s,this.data())),void 0)}}),e.fn.select2=function(){var t,i,n,r,a,l=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],u=["opened","isFocused","container","dropdown"],d=["val","data"],h={search:"externalSearch"};return this.each(function(){if(0===l.length||"object"==typeof l[0])t=0===l.length?{}:e.extend({},l[0]),t.element=e(this),"select"===t.element.get(0).tagName.toLowerCase()?a=t.element.prop("multiple"):(a=t.multiple||!1,"tags"in t&&(t.multiple=a=!0)),i=a?new D:new M,i.init(t);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(s(l[0],c)<0)throw"Unknown method: "+l[0];if(r=o,i=e(this).data("select2"),i===o)return;if(n=l[0],"container"===n?r=i.container:"dropdown"===n?r=i.dropdown:(h[n]&&(n=h[n]),r=i[n].apply(i,l.slice(1))),s(l[0],u)>=0||s(l[0],d)&&1==l.length)return!1}}),r===o?this:r},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,o,i){var s=[];return k(e.text,o.term,s,i),s.join("")},formatSelection:function(e,t,i){return e?i(e.text):o},sortResults:function(e,t,o){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(e,t){return o},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var o=t-e.length;return"Please enter "+o+" more character"+(1==o?"":"s")},formatInputTooLong:function(e,t){var o=e.length-t;return"Please delete "+o+" character"+(1==o?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(e){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return i(""+t).toUpperCase().indexOf(i(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:E,escapeMarkup:y,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,t){return o}},e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},t.exports={query:{ajax:_,local:C,tags:S},util:{debounce:d,markMatch:k,escapeMarkup:y,stripDiacritics:i},"class":{"abstract":P,single:M,multi:D}}}}(jQuery)},{}],"/opt/seelio/node_modules/templates/share_buttons.js":[function(e,t,o){var i=e("jade");t.exports=function(e){var t=[],o={},s=e||{};return function(e,s,n,r,a){o.share_buttons=function(o,n,r){this&&this.block,this&&this.attributes||{};t.push('<div tabindex="0" data-enter-click="true"'+i.cls(["share-button","btn","btn-default",r.button_class],[null,null,null,!0])+'><div class="icon-wrap"><span class="legacy-icon legacy-icon-remove"></span></div><span class="share-btn-text">Share</span></div><div class="share-bubble"><div class="share-bubble-urlshare"><h5>url</h5><input input="share URL" name="shareUrl"'+i.attr("value",o,!0,!1)+' class="uneditable-input"/></div><div class="share-bubble-buttons clearfix"><a'+i.attr("href","https://api.addthis.com/oexchange/0.8/forward/facebook/offer?url="+e(o)+"&title="+e(n)+"&pubid=ra-5433f14649af7838&ct=1&pco=tbxnj-1.0",!0,!1)+' target="_blank" data-type="facebook" tabindex="0" data-enter-click="true" class="share-bubble-share-btn share-facebook share-track"><img'+i.attr("src",s("/img/icon-share-fb.png"),!0,!1)+' alt="Post to Facebook" title="Post to Facebook"/></a><a'+i.attr("href","https://api.addthis.com/oexchange/0.8/forward/twitter/offer?url="+e(o)+"&title="+e(n)+"&via=Seelio&"+e(n)+"&pubid=ra-5433f14649af7838&ct=1&pco=tbxnj-1.0",!0,!1)+i.attr("tw:text",n,!0,!1)+' tw:via="Seelio" target="_blank" data-type="twitter" tabindex="0" data-enter-click="true" class="share-bubble-share-btn share-twitter share-track"><img'+i.attr("src",s("/img/icon-share-twitter.png"),!0,!1)+' alt="Post to Twitter" title="Post to Twitter"/></a><a'+i.attr("href","https://api.addthis.com/oexchange/0.8/forward/google_plusone_share/offer?url="+e(o)+"&title="+e(n)+"&pubid=ra-5433f14649af7838&ct=1&pco=tbxnj-1.0",!0,!1)+' target="_blank" data-type="google" tabindex="0" data-enter-click="true" class="share-bubble-share-btn share-google share-track"><img'+i.attr("src",s("/img/icon-share-google.png"),!0,!1)+' alt="Post to Google Plus" title="Post to Google Plus"/></a><a'+i.attr("href","https://api.addthis.com/oexchange/0.8/forward/linkedin/offer?url="+e(o)+"&title="+e(n)+"&pubid=ra-5433f14649af7838&ct=1&pco=tbxnj-1.0",!0,!1)+' target="_blank" data-type="linkedin" tabindex="0" data-enter-click="true" class="share-bubble-share-btn share-linkedin share-track"><img'+i.attr("src",s("/img/icon-share-linkedin.png"),!0,!1)+' alt="Post to LinkedIn" title="Post to LinkedIn"/></a></div>'),r.feedback&&t.push('<div class="share-ask-for-feedback"><a class="btn btn-default">Request Feedback</a></div>'),t.push("</div>")},o.share_buttons(n,r,a)}.call(this,"encodeURIComponent"in s?s.encodeURIComponent:"undefined"!=typeof encodeURIComponent?encodeURIComponent:void 0,"assetPath"in s?s.assetPath:"undefined"!=typeof assetPath?assetPath:void 0,"link"in s?s.link:"undefined"!=typeof link?link:void 0,"title"in s?s.title:"undefined"!=typeof title?title:void 0,"options"in s?s.options:"undefined"!=typeof options?options:void 0),t.join("")}},{jade:"jade"}],"/opt/seelio/node_modules/templates/users/autocomplete_input.js":[function(e,t,o){var i=e("jade");t.exports=function(e){var t=[],o={},s=e||{};return function(e,s,n){o.user_autocomplete_input=function(o){this&&this.block,this&&this.attributes||{};"undefined"==typeof o&&(o={}),t.push('<div class="user-autocomplete-input"><input title="Type names here" type="hidden"'+i.attr("placeholder",null!=o.placeholder?o.placeholder:"Type names or emails of new & existing users here... ",!0,!1)+i.attr("name",o.name,!0,!1)+i.attr("value",o.initSelection?e(s.stringify(o.initSelection)):"",!0,!1)+"/></div>")},o.user_autocomplete_input(n)}.call(this,"encodeURIComponent"in s?s.encodeURIComponent:"undefined"!=typeof encodeURIComponent?encodeURIComponent:void 0,"JSON"in s?s.JSON:"undefined"!=typeof JSON?JSON:void 0,"options"in s?s.options:"undefined"!=typeof options?options:void 0),t.join("")}},{jade:"jade"}],"/opt/seelio/node_modules/templates/users/invite_modal.js":[function(e,t,o){e("jade");t.exports=function(e){var t=[],o={};return o.user_invite_modal=function(){this&&this.block,this&&this.attributes||{};t.push('<div id="user-invite-modal" role="dialog" aria-labelledby="Invite People to Collaborate" class="modal fade"><div class="modal-dialog"><div class="modal-content"><form class="work-editor-invite-modal-form"><div class="modal-header"><h3>Invite People to Collaborate</h3></div><div class="modal-body"><p>Enter your friends\' emails to send out an invite. Once they complete the registration process, \nthey will automatically be added as a collaborator to this work.</p><input title="enter email" type="email" placeholder="email@example.com" name="email" class="form-control"/><input title="enter email" type="email" placeholder="email@example.com" name="email" class="form-control"/><input title="enter email" type="email" placeholder="email@example.com" name="email" class="form-control"/><input title="enter email" type="email" placeholder="email@example.com" name="email" class="form-control"/><a href="#" class="user-invite-add-another">+ Add Another</a></div><div class="modal-footer"><a href="#" data-dismiss="modal" class="pull-left btn btn-default">Close</a><input title="submit button" type="Submit" value="Invite" name="Invite" class="pull-right btn btn-primary"/></div></form></div></div></div>')},o.user_invite_modal(),t.join("")}},{jade:"jade"}],"/opt/seelio/node_modules/templates/users/message_composer.js":[function(e,t,o){var i=e("jade");t.exports=function(e){var t,o=[],s={},n=e||{};return function(e,n,r,a,l){s.user_autocomplete_input=function(t){this&&this.block,this&&this.attributes||{};"undefined"==typeof t&&(t={}),o.push('<div class="user-autocomplete-input"><input title="Type names here" type="hidden"'+i.attr("placeholder",null!=t.placeholder?t.placeholder:"Type names or emails of new & existing users here... ",!0,!1)+i.attr("name",t.name,!0,!1)+i.attr("value",t.initSelection?e(n.stringify(t.initSelection)):"",!0,!1)+"/></div>")},s.message_composer_attachment=function(e,s){this&&this.block,this&&this.attributes||{};s=null!=s?s:{},o.push("<div"+i.cls(["message-composer-attachment",s.type?"message-composer-attachment-"+s.type:""],[null,!0])+">"),"work"==s.type&&(o.push("<img"+i.attr("src",e.cover&&e.cover.thumbs?e.cover.thumbs.s:r("/img/placeholder-gen.jpg"),!0,!1)+' alt="" class="message-composer-attachment-img"/><span class="message-composer-attachment-title">'+i.escape(null==(t=e.title)?"":t)+'</span><input title="input work" name="_work" type="hidden"'+i.attr("value",e.id||e._id.toString(),!0,!1)+"/>"),s.removable&&o.push('<span class="close pull-right">&times;</span>')),o.push("</div>")},s.message_composer=function(e){this&&this.block,this&&this.attributes||{};"undefined"==typeof e&&(e={}),o.push('<div class="message-composer"><form class="message-composer-form"><div class="combined-input"><div class="message-composer-to">'),"undefined"==typeof e._group?s.user_autocomplete_input({multiple:!0,placeholder:!1,name:"recipients",initSelection:e.to}):o.push('<input title="input group" hidden="true" name="_group" placeholder="To" type="text"'+i.attr("value",e._group,!0,!1)+'/><input title="input recipients" hidden="true" name="recipients" placeholder="to" type="text" value="[]"/><div class="group-text">'+i.escape(null==(t=e.groupName)?"":t)+"</div><hr/>"),o.push('</div><input title="message subject" name="subject" placeholder="Subject" type="text"'+i.attr("value",e.subject?e.subject:e.work?e.work.title:a,!0,!1)+' class="message-composer-message-subject combined-input-dotted"/><div class="message-composer-message-body-container textarea resize-y"><textarea name="message" type="text" placeholder="Write your message here..." class="message-composer-message-body">'),e.message&&o.push(i.escape(null==(t=e.message)?"":t)),o.push('</textarea><ul class="message-composer-attachments">'),null!=e.attachments&&function(){var t=e.attachments;if("number"==typeof t.length)for(var i=0,n=t.length;n>i;i++){var r=t[i];o.push('<li class="message-composer-attachments-li message-composer-attachments-li-work">'),s.message_composer_attachment(r.object,r),o.push("</li>")}else{var n=0;for(var i in t){n++;var r=t[i];o.push('<li class="message-composer-attachments-li message-composer-attachments-li-work">'),s.message_composer_attachment(r.object,r),o.push("</li>")}}}.call(this),o.push('</ul></div></div><div id="message-composer-recaptcha"></div>'),e.displaySendButton&&s.message_composer_send({"class":"pull-right"}),o.push('</form><div class="clearfix"></div></div>')},s.message_composer_send=function(e){this&&this.block,this&&this.attributes||{};"undefined"==typeof e&&(e={}),o.push('<button type="submit" name="Send Message" data-kine-element="send-message"'+i.cls(["btn","btn-primary","message-composer-submit",e["class"]],[null,null,null,!0])+">Send Message</button>")},s.message_composer(l)}.call(this,"encodeURIComponent"in n?n.encodeURIComponent:"undefined"!=typeof encodeURIComponent?encodeURIComponent:void 0,"JSON"in n?n.JSON:"undefined"!=typeof JSON?JSON:void 0,"assetPath"in n?n.assetPath:"undefined"!=typeof assetPath?assetPath:void 0,"undefined"in n?n.undefined:void 0,"options"in n?n.options:"undefined"!=typeof options?options:void 0),o.join("")}},{jade:"jade"}],"/opt/seelio/node_modules/templates/users/message_composer_modal.js":[function(e,t,o){var i=e("jade");t.exports=function(e){var t,o=[],s={},n=e||{};return function(e,n,r,a,l){s.user_autocomplete_input=function(t){this&&this.block,this&&this.attributes||{};"undefined"==typeof t&&(t={}),o.push('<div class="user-autocomplete-input"><input title="Type names here" type="hidden"'+i.attr("placeholder",null!=t.placeholder?t.placeholder:"Type names or emails of new & existing users here... ",!0,!1)+i.attr("name",t.name,!0,!1)+i.attr("value",t.initSelection?e(n.stringify(t.initSelection)):"",!0,!1)+"/></div>")},s.message_composer_attachment=function(e,s){this&&this.block,this&&this.attributes||{};s=null!=s?s:{},o.push("<div"+i.cls(["message-composer-attachment",s.type?"message-composer-attachment-"+s.type:""],[null,!0])+">"),"work"==s.type&&(o.push("<img"+i.attr("src",e.cover&&e.cover.thumbs?e.cover.thumbs.s:r("/img/placeholder-gen.jpg"),!0,!1)+' alt="" class="message-composer-attachment-img"/><span class="message-composer-attachment-title">'+i.escape(null==(t=e.title)?"":t)+'</span><input title="input work" name="_work" type="hidden"'+i.attr("value",e.id||e._id.toString(),!0,!1)+"/>"),s.removable&&o.push('<span class="close pull-right">&times;</span>')),o.push("</div>")},s.message_composer=function(e){this&&this.block,this&&this.attributes||{};"undefined"==typeof e&&(e={}),o.push('<div class="message-composer"><form class="message-composer-form"><div class="combined-input"><div class="message-composer-to">'),"undefined"==typeof e._group?s.user_autocomplete_input({multiple:!0,placeholder:!1,name:"recipients",initSelection:e.to}):o.push('<input title="input group" hidden="true" name="_group" placeholder="To" type="text"'+i.attr("value",e._group,!0,!1)+'/><input title="input recipients" hidden="true" name="recipients" placeholder="to" type="text" value="[]"/><div class="group-text">'+i.escape(null==(t=e.groupName)?"":t)+"</div><hr/>"),o.push('</div><input title="message subject" name="subject" placeholder="Subject" type="text"'+i.attr("value",e.subject?e.subject:e.work?e.work.title:a,!0,!1)+' class="message-composer-message-subject combined-input-dotted"/><div class="message-composer-message-body-container textarea resize-y"><textarea name="message" type="text" placeholder="Write your message here..." class="message-composer-message-body">'),e.message&&o.push(i.escape(null==(t=e.message)?"":t)),o.push('</textarea><ul class="message-composer-attachments">'),null!=e.attachments&&function(){var t=e.attachments;if("number"==typeof t.length)for(var i=0,n=t.length;n>i;i++){var r=t[i];o.push('<li class="message-composer-attachments-li message-composer-attachments-li-work">'),s.message_composer_attachment(r.object,r),o.push("</li>")}else{var n=0;for(var i in t){n++;var r=t[i];o.push('<li class="message-composer-attachments-li message-composer-attachments-li-work">'),s.message_composer_attachment(r.object,r),o.push("</li>")}}}.call(this),o.push('</ul></div></div><div id="message-composer-recaptcha"></div>'),e.displaySendButton&&s.message_composer_send({"class":"pull-right"}),o.push('</form><div class="clearfix"></div></div>')},s.message_composer_send=function(e){this&&this.block,this&&this.attributes||{};"undefined"==typeof e&&(e={}),o.push('<button type="submit" name="Send Message"'+i.cls(["btn","btn-primary","message-composer-submit",e["class"]],[null,null,null,!0])+">Send Message</button>")},s.message_composer_modal=function(e){this&&this.block,this&&this.attributes||{};"undefined"==typeof e&&(e={}),o.push('<div class="modal message-composer-modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h3>Compose New Message<span data-dismiss="modal" class="pull-right close">&times;</span></h3></div><div class="modal-body"><div class="message-composer-modal-main">'),s.message_composer(e),o.push('</div></div><div class="modal-footer"><div class="pull-left"><a href="#" data-dismiss="modal" class="btn btn-default">Close</a></div><div class="pull-right">'),s.message_composer_send({"class":"message-composer-modal-send"}),o.push("</div></div></div></div></div>")},s.message_composer_modal(l)}.call(this,"encodeURIComponent"in n?n.encodeURIComponent:"undefined"!=typeof encodeURIComponent?encodeURIComponent:void 0,"JSON"in n?n.JSON:"undefined"!=typeof JSON?JSON:void 0,"assetPath"in n?n.assetPath:"undefined"!=typeof assetPath?assetPath:void 0,"undefined"in n?n.undefined:void 0,"options"in n?n.options:"undefined"!=typeof options?options:void 0),o.join("")}},{jade:"jade"}],"/opt/seelio/node_modules/templates/works/back_to_skills_popup.js":[function(e,t,o){e("jade");t.exports=function(e){var t=[],o={};return o.back_to_skills_popup=function(){this&&this.block,this&&this.attributes||{};t.push('<div class="work-view__back-to-skills-popup--mobile"><span><a href="/skills">Click here</a> to return to your Skills Map!</span></div><div class="work-view__back-to-skills-popup--desktop"><img src="/img/skillsmap-logo.png" class="work-view__back-to-skills-popup--desktop__logo"/><div class="work-view__back-to-skills-popup--desktop__instructions">When you\'re done reviewing your new work, click the button \nbelow to return to your Skills Map!</div><a href="/skills" class="btn work-view__back-to-skills-popup--desktop__btn">Return to Skills Map</a></div>')},o.back_to_skills_popup(),t.join("")}},{jade:"jade"}],"/opt/seelio/node_modules/templates/works/bottom_bar.js":[function(e,t,o){var i=e("jade");t.exports=function(e){var t,o=[],s={},n=e||{};return function(e){s.bottom_bar=function(e){this&&this.block,this&&this.attributes||{};o.push('<div class="list">'),e?o.push('<div class="list-title">View More Works by <a'+i.attr("href","/"+e.username,!0,!1)+' class="name">'+i.escape(null==(t=e.firstName)?"":t)+"<img"+i.attr("src",""+e.profilePhotoPath,!0,!1)+' alt="Profile photo"/></a></div>'):o.push('<div class="list-title">View Related Works</div>'),o.push('<div class="work-cover-selector-wrap"></div></div><div class="footer"></div>')},s.bottom_bar(e)}.call(this,"student"in n?n.student:"undefined"!=typeof student?student:void 0),o.join("")}},{jade:"jade"}],"/opt/seelio/node_modules/templates/works/comment.js":[function(e,t,o){var i=e("jade");t.exports=function(e){var t,o=[],s={},n=e||{};return function(e,n,r,a,l){s.comment=function(s,r,a){this&&this.block,this&&this.attributes||{};null==s&&(s={}),null==a&&(a={}),a.body=a.body||!0,o.push('<div class="work-bottom-section-media comment"><data'+i.attr("id",s._id,!0,!1)+i.attr("value",e(n.stringify(s)),!0,!1)+"></data>"),r&&o.push('<div class="pull-right close media-remove">&times;</div>'),o.push('<div class="media">'),s._author.profilePhotoPath&&o.push('<div class="media-profile pull-left"><img'+i.attr("src",s._author.profilePhotoPath,!0,!1)+' alt="Profile photo" class="media-object"/></div>'),o.push('<div class="media-body"><div class="media-heading comment-heading"><h4><span class="comment-author">'+i.escape(null==(t=s._author.fullName)?"":t)+"</span>");var l="";s._author.education&&s._author.education.length>0?l=s._author.education[0].university:s._author.degrees&&s._author.degrees.length>0&&(l=s._author.degrees[0].university),l&&o.push(' of <span class="media-university comment-university">'+i.escape(null==(t=l)?"":t)+"</span>"),o.push('</h4></div><div class="media-time comment-time">'+i.escape(null==(t=s.createdAt)?"":t)+"</div></div></div>"),a.body&&o.push('<div class="media-body comment-body">'+i.escape(null==(t=s.body)?"":t)+"</div>"),o.push("</div>")},s.comment(r,a,l)}.call(this,"encodeURI"in n?n.encodeURI:"undefined"!=typeof encodeURI?encodeURI:void 0,"JSON"in n?n.JSON:"undefined"!=typeof JSON?JSON:void 0,"comment"in n?n.comment:"undefined"!=typeof comment?comment:void 0,"own"in n?n.own:"undefined"!=typeof own?own:void 0,"options"in n?n.options:"undefined"!=typeof options?options:void 0),o.join("")}},{jade:"jade"}],"/opt/seelio/node_modules/templates/works/comment_composer.js":[function(e,t,o){e("jade");t.exports=function(e){var t=[],o={};return o.comment_composer=function(){this&&this.block,this&&this.attributes||{};t.push('<textarea placeholder="Type your comment here..." class="form-control"></textarea><div style="display: none;" class="comment-submit pull-right"><span class="small">Ctrl + Enter to send</span><button name="Post Comment" class="btn btn-primary btn-sm post-comment">Post Comment</button></div>')},o.comment_composer(),t.join("")}},{jade:"jade"}],"/opt/seelio/node_modules/templates/works/cover_selector.js":[function(e,t,o){var i=e("jade");t.exports=function(e){var t=[],o={},s=e||{};return function(e,s){o["work-cover-selector"]=function(o){this&&this.block,this&&this.attributes||{};t.push('<i data-toggle="tooltip" title="Scroll left" data-trigger="hover" class="cover-selector cover-selector-left glyphicon glyphicon-chevron-left"></i><div class="work-cover-selector">'),function(){var s=o;if("number"==typeof s.length)for(var n=0,r=s.length;r>n;n++){var a=s[n];"undefined"!=typeof a&&a.cover&&a.cover.html&&a.cover.html.s?t.push("<a"+i.attr("href",a.full_url,!0,!1)+' class="work-cover-selector_link"><span'+i.attr("data-value",e,!0,!1)+' class="work-data"><div'+i.attr("style","background-image:url("+a.cover.thumbs.s+")",!0,!1)+' data-toggle="tooltip"'+i.attr("title",""+a.title,!0,!1)+' data-trigger="hover" class="work-img works-title-tooltip"></div></span></a>'):"undefined"!=typeof a&&t.push("<a"+i.attr("href",a.full_url,!0,!1)+' class="work-cover-selector_link"><span'+i.attr("data-value",e,!0,!1)+' class="work-data"><div data-toggle="tooltip"'+i.attr("title",""+a.title,!0,!1)+' data-trigger="hover" class="work-img works-title-tooltip cover-placeholder"></div></span></a>');
}else{var r=0;for(var n in s){r++;var a=s[n];"undefined"!=typeof a&&a.cover&&a.cover.html&&a.cover.html.s?t.push("<a"+i.attr("href",a.full_url,!0,!1)+' class="work-cover-selector_link"><span'+i.attr("data-value",e,!0,!1)+' class="work-data"><div'+i.attr("style","background-image:url("+a.cover.thumbs.s+")",!0,!1)+' data-toggle="tooltip"'+i.attr("title",""+a.title,!0,!1)+' data-trigger="hover" class="work-img works-title-tooltip"></div></span></a>'):"undefined"!=typeof a&&t.push("<a"+i.attr("href",a.full_url,!0,!1)+' class="work-cover-selector_link"><span'+i.attr("data-value",e,!0,!1)+' class="work-data"><div data-toggle="tooltip"'+i.attr("title",""+a.title,!0,!1)+' data-trigger="hover" class="work-img works-title-tooltip cover-placeholder"></div></span></a>')}}}.call(this),t.push('</div><i data-toggle="tooltip" title="Scroll right" data-trigger="hover" class="cover-selector cover-selector-right glyphicon glyphicon-chevron-right"></i>')},o["work-cover-selector"](s)}.call(this,"workJSON"in s?s.workJSON:"undefined"!=typeof workJSON?workJSON:void 0,"works"in s?s.works:"undefined"!=typeof works?works:void 0),t.join("")}},{jade:"jade"}],"/opt/seelio/node_modules/templates/works/discussion.js":[function(e,t,o){var i=e("jade");t.exports=function(e){var t,o=[],s={},n=e||{};return function(e,n,r,a,l,c,u){s.comment=function(s,r,a){this&&this.block,this&&this.attributes||{};null==s&&(s={}),null==a&&(a={}),a.body=a.body||!0,o.push('<div class="work-bottom-section-media comment"><data'+i.attr("id",s._id,!0,!1)+i.attr("value",e(n.stringify(s)),!0,!1)+"></data>"),r&&o.push('<div class="pull-right close media-remove">&times;</div>'),o.push('<div class="media">'),s._author.profilePhotoPath&&o.push('<div class="media-profile pull-left"><img'+i.attr("src",s._author.profilePhotoPath,!0,!1)+' alt="Profile photo" class="media-object"/></div>'),o.push('<div class="media-body"><div class="media-heading comment-heading"><h4><span class="comment-author">'+i.escape(null==(t=s._author.fullName)?"":t)+"</span>");var l="";s._author.education&&s._author.education.length>0?l=s._author.education[0].university:s._author.degrees&&s._author.degrees.length>0&&(l=s._author.degrees[0].university),l&&o.push(' of <span class="media-university comment-university">'+i.escape(null==(t=l)?"":t)+"</span>"),o.push('</h4></div><div class="media-time comment-time">'+i.escape(null==(t=s.createdAt)?"":t)+"</div></div></div>"),a.body&&o.push('<div class="media-body comment-body">'+i.escape(null==(t=s.body)?"":t)+"</div>"),o.push("</div>")},s.comment_composer=function(){this&&this.block,this&&this.attributes||{};o.push('<textarea placeholder="Type your comment here..." class="form-control"></textarea><div style="display: none;" class="comment-submit pull-right"><span class="small">Ctrl + Enter to send</span><button name="Post Comment" class="btn btn-primary btn-sm post-comment">Post Comment</button></div>')},s.discussion=function(l,c,u){this&&this.block,this&&this.attributes||{};null==l&&(l={}),null==u&&(u={}),r=u.work?u.work._id+"-"+l._group._id.toString():l._group._id.toString();var d=u.dataOnly?"display: none;":"";o.push("<div"+i.attr("data-discussion-id",l._group._id.toString(),!0,!1)+i.attr("style",d,!0,!1)+' data-kine-component="discussion" class="work-bottom-section work-discussion"><data'+i.attr("id",l._group._id.toString(),!0,!1)+i.attr("value",e(n.stringify(l)),!0,!1)+'></data><h3 data-toggle="collapse"'+i.attr("data-target","#work-discussion-collapse-"+r,!0,!1)+'><i class="icon-lock-dark"></i>Group Discussion: '+i.escape(null==(t=l._group.name)?"":t)+'<span class="pull-right caret"></span></h3><div'+i.attr("id","work-discussion-collapse-"+r,!0,!1)+i.cls([u.open?"in":"","collapse","work-bottom-section-collapse"],[!0,null,null])+'><div class="work-bottom-section-subwindow work-discussion-comments clearfix"><div class="work-bottom-section-subwindow-scroll-up">Scroll Up</div><ul class="work-bottom-section-media-list work-discussion-comment-list">'),function(){var e=l.comments;if("number"==typeof e.length)for(var t=0,i=e.length;i>t;t++){var n=e[t];o.push("<li>"),s.comment(n,c||null!=a?a._id.toString()===n._author._id.toString():!1),o.push("</li>")}else{var i=0;for(var t in e){i++;var n=e[t];o.push("<li>"),s.comment(n,c||null!=a?a._id.toString()===n._author._id.toString():!1),o.push("</li>")}}}.call(this),o.push('</ul><div class="work-discussion-comment-composer">'),s.comment_composer(),o.push("</div></div></div></div>")},s.discussion(l,c,u)}.call(this,"encodeURI"in n?n.encodeURI:"undefined"!=typeof encodeURI?encodeURI:void 0,"JSON"in n?n.JSON:"undefined"!=typeof JSON?JSON:void 0,"collapse_id"in n?n.collapse_id:"undefined"!=typeof collapse_id?collapse_id:void 0,"user"in n?n.user:"undefined"!=typeof user?user:void 0,"discussion"in n?n.discussion:"undefined"!=typeof discussion?discussion:void 0,"own"in n?n.own:"undefined"!=typeof own?own:void 0,"options"in n?n.options:"undefined"!=typeof options?options:void 0),o.join("")}},{jade:"jade"}],"/opt/seelio/node_modules/templates/works/edit_button_popover.js":[function(e,t,o){var i=e("jade");t.exports=function(e){var t=[],o={},s=e||{};return function(e){o.edit_button_popover=function(e){this&&this.block,this&&this.attributes||{};t.push('<div class="work-edit-button-popover"><ul><li><a'+i.attr("href","/edit/"+e._id+"/attachments",!0,!1)+' class="work-edit-button-popover-attachments">Edit Attachments</a></li><li><a'+i.attr("href","/edit/"+e._id+"/description",!0,!1)+' class="work-edit-button-popover-description">Edit Description</a></li><li><a'+i.attr("href","/edit/"+e._id+"/settings",!0,!1)+' class="work-edit-button-popover-settings">Edit Settings</a><span class="work-edit-button-popover-icon work-edit-button-popover-settings-icon"></span></li><li><a'+i.attr("href","/work/"+e._id,!0,!1)+' class="work-edit-button-popover-delete work-view-delete">Delete Work</a><span class="work-edit-button-popover-icon work-edit-button-popover-delete-icon"></span></li></ul></div>')},o.edit_button_popover(e)}.call(this,"work"in s?s.work:"undefined"!=typeof work?work:void 0),t.join("")}},{jade:"jade"}],"/opt/seelio/node_modules/templates/works/view.js":[function(e,t,o){var s=e("jade");t.exports=function(e){var t,o=[],n={},r=e||{};return function(e,i,r,a,l,c,u,d,h,p,f,m,v,g,b,w,k,y){n.like_window=function(i,n){this&&this.block,this&&this.attributes||{};o.push("<div"+s.attr("id",n?"like-window-"+n:"like-window",!0,!1)+' class="like-window modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h3>People who like this work:</h3></div><div class="modal-body"><ul>'),e.isArray(i)&&function(){var e=i;if("number"==typeof e.length)for(var n=0,r=e.length;r>n;n++){var a=e[n];a._user&&o.push('<li><div class="like-window-user media"><div class="like-window-profile profile-border pull-left"><a'+s.attr("href","/p/"+a._user.url_id+"/"+a._user.slug,!0,!1)+"><img"+s.attr("src",a._user.profilePhotoPath,!0,!1)+' alt="Profile photo"/></a></div><div class="media-body"><h4 class="media-heading"><a'+s.attr("href","/p/"+a._user.url_id+"/"+a._user.slug,!0,!1)+">"+s.escape(null==(t=a._user.fullName)?"":t)+'</a></h4><div class="like-window-degree">'+s.escape(null==(t=a._user.university)?"":t)+"</div><div"+s.attr("data-target",a._user.id,!0,!1)+' class="btn pull-right follow-button followButton-container btn-primary">Follow</div></div></div></li>')}else{var r=0;for(var n in e){r++;var a=e[n];a._user&&o.push('<li><div class="like-window-user media"><div class="like-window-profile profile-border pull-left"><a'+s.attr("href","/p/"+a._user.url_id+"/"+a._user.slug,!0,!1)+"><img"+s.attr("src",a._user.profilePhotoPath,!0,!1)+' alt="Profile photo"/></a></div><div class="media-body"><h4 class="media-heading"><a'+s.attr("href","/p/"+a._user.url_id+"/"+a._user.slug,!0,!1)+">"+s.escape(null==(t=a._user.fullName)?"":t)+'</a></h4><div class="like-window-degree">'+s.escape(null==(t=a._user.university)?"":t)+"</div><div"+s.attr("data-target",a._user.id,!0,!1)+' class="btn pull-right follow-button followButton-container btn-primary">Follow</div></div></div></li>')}}}.call(this),o.push('</ul></div><div class="modal-footer"><button data-dismiss="modal" name="Close" class="btn btn-primary">Close</button></div></div></div></div>')},n.groups_list_modal=function(e,i){this&&this.block,this&&this.attributes||{};null!=e&&(o.push("<div"+s.attr("id","groups-list-modal-"+i,!0,!1)+' class="groups-list-modal modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h3>This work appears in:</h3></div><div class="modal-body"><ul>'),function(){var i=e;if("number"==typeof i.length)for(var n=0,r=i.length;r>n;n++){var a=i[n];o.push('<li><div class="groups-list-modal-group clearfix">'),a&&null!==a._group&&o.push('<h4 class="pull-left">'+s.escape(null==(t=a._group.name)?"":t)+"</h4><a"+s.attr("href","/g/"+a._group.url,!0,!1)+' class="btn btn-primary btn-sm pull-right">View Showcase</a>'),o.push("</div></li>")}else{var r=0;for(var n in i){r++;var a=i[n];o.push('<li><div class="groups-list-modal-group clearfix">'),a&&null!==a._group&&o.push('<h4 class="pull-left">'+s.escape(null==(t=a._group.name)?"":t)+"</h4><a"+s.attr("href","/g/"+a._group.url,!0,!1)+' class="btn btn-primary btn-sm pull-right">View Showcase</a>'),o.push("</div></li>")}}}.call(this),o.push('</ul></div><div class="modal-footer"><button data-dismiss="modal" name="Close" class="btn btn-primary">Close</button></div></div></div></div>'))},n.comment=function(e,n,a){this&&this.block,this&&this.attributes||{};null==e&&(e={}),null==a&&(a={}),a.body=a.body||!0,o.push('<div class="work-bottom-section-media comment"><data'+s.attr("id",e._id,!0,!1)+s.attr("value",i(r.stringify(e)),!0,!1)+"></data>"),n&&o.push('<div class="pull-right close media-remove">&times;</div>'),o.push('<div class="media">'),e._author.profilePhotoPath&&o.push('<div class="media-profile pull-left"><img'+s.attr("src",e._author.profilePhotoPath,!0,!1)+' alt="Profile photo" class="media-object"/></div>'),o.push('<div class="media-body"><div class="media-heading comment-heading"><h4><span class="comment-author">'+s.escape(null==(t=e._author.fullName)?"":t)+"</span>");var l="";e._author.education&&e._author.education.length>0?l=e._author.education[0].university:e._author.degrees&&e._author.degrees.length>0&&(l=e._author.degrees[0].university),l&&o.push(' of <span class="media-university comment-university">'+s.escape(null==(t=l)?"":t)+"</span>"),o.push('</h4></div><div class="media-time comment-time">'+s.escape(null==(t=e.createdAt)?"":t)+"</div></div></div>"),a.body&&o.push('<div class="media-body comment-body">'+s.escape(null==(t=e.body)?"":t)+"</div>"),o.push("</div>")},n.comment_composer=function(){this&&this.block,this&&this.attributes||{};o.push('<textarea placeholder="Type your comment here..." class="form-control"></textarea><div style="display: none;" class="comment-submit pull-right"><span class="small">Ctrl + Enter to send</span><button name="Post Comment" class="btn btn-primary btn-sm post-comment">Post Comment</button></div>')},n.discussion=function(e,c,u){this&&this.block,this&&this.attributes||{};null==e&&(e={}),null==u&&(u={}),a=u.work?u.work._id+"-"+e._group._id.toString():e._group._id.toString();var d=u.dataOnly?"display: none;":"";o.push("<div"+s.attr("data-discussion-id",e._group._id.toString(),!0,!1)+s.attr("style",d,!0,!1)+' data-kine-component="discussion" class="work-bottom-section work-discussion"><data'+s.attr("id",e._group._id.toString(),!0,!1)+s.attr("value",i(r.stringify(e)),!0,!1)+'></data><h3 data-toggle="collapse"'+s.attr("data-target","#work-discussion-collapse-"+a,!0,!1)+'><i class="icon-lock-dark"></i>Group Discussion: '+s.escape(null==(t=e._group.name)?"":t)+'<span class="pull-right caret"></span></h3><div'+s.attr("id","work-discussion-collapse-"+a,!0,!1)+s.cls([u.open?"in":"","collapse","work-bottom-section-collapse"],[!0,null,null])+'><div class="work-bottom-section-subwindow work-discussion-comments clearfix"><div class="work-bottom-section-subwindow-scroll-up">Scroll Up</div><ul class="work-bottom-section-media-list work-discussion-comment-list">'),function(){var t=e.comments;if("number"==typeof t.length)for(var i=0,s=t.length;s>i;i++){var r=t[i];o.push("<li>"),n.comment(r,c||null!=l?l._id.toString()===r._author._id.toString():!1),o.push("</li>")}else{var s=0;for(var i in t){s++;var r=t[i];o.push("<li>"),n.comment(r,c||null!=l?l._id.toString()===r._author._id.toString():!1),o.push("</li>")}}}.call(this),o.push('</ul><div class="work-discussion-comment-composer">'),n.comment_composer(),o.push("</div></div></div></div>")},n.work_conversation_listing=function(e,n){this&&this.block,this&&this.attributes||{};null==e&&(e={}),null==n&&(n={}),n.body=n.body||!0,o.push('<div class="work-bottom-section-media conversation"><data'+s.attr("id",e.id,!0,!1)+s.attr("value",i(r.stringify(e)),!0,!1)+'></data><div class="media">');var a=e.messages[e.messages.length-1];a._sender.profilePhotoPath&&o.push('<div class="media-profile pull-left"><img'+s.attr("src",a._sender.profilePhotoPath,!0,!1)+' alt="Profile picture" class="media-object"/></div>'),o.push('<div class="media-body"><div class="media-heading conversation-heading"><h4>'+s.escape(null==(t=a._sender.fullName)?"":t));var l="";a._sender.education&&a._sender.education.length>0?l=a._sender.education[0].university:a._sender.degrees&&a._sender.degrees.length>0&&(l=a._sender.degrees[0].university),l&&o.push(' of <span class="media-university conversation-university">'+s.escape(null==(t=l)?"":t)+"</span>"),n.body||o.push(" sent you a <a"+s.attr("href","/conversation/"+e.id,!0,!1)+">message</a>."),o.push('</h4></div><div class="media-time conversation-time">'+s.escape(null==(t=e.createdAt)?"":t)+"</div></div></div>"),n.body&&o.push('<div class="media-body conversation-body">'+s.escape(null==(t=e.body)?"":t)+"</div>"),o.push("</div>")},n.work_privacy_icon=function(e){this&&this.block,this&&this.attributes||{};e.visibTo.all?o.push('<div data-toggle="tooltip" data-html="data-html" data-placement="bottom" title="Shared with:&lt;br /&gt;Everyone" class="work-stats-privacy"><div class="glyphicon glyphicon-globe"></div></div>'):e.visibTo.groups&&0!==e.visibTo.groups.length?e.visibTo.groups.length>0&&"undefined"!=typeof e.escapedVisibToGroupNames&&e.escapedVisibToGroupNames.length&&o.push('<div data-toggle="tooltip" data-html="data-html" data-placement="bottom"'+s.attr("title","Shared with:<br />"+e.escapedVisibToGroupNames.join("<br />"),!0,!1)+' class="work-stats-privacy"><div data-icon="b"></div></div>'):o.push('<div data-toggle="tooltip" data-html="data-html" data-placement="bottom" title="Private" class="work-stats-privacy"><div data-icon="b"></div></div>')},n.make_public_modal=function(e){this&&this.block,this&&this.attributes||{};o.push("<div"+s.attr("id","make-public-modal-"+e._id,!0,!1)+' class="modal work-make-public-modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h3>Share a private work<span data-dismiss="modal" class="pull-right close">&times;</span></h3></div><div class="modal-body"><p>This work is currently not visible to the public. Click one of the buttons below to change visibility settings so that you can share your work!</p><a'+s.attr("href","/edit/"+e._id+"/publicize",!0,!1)+' class="btn btn-primary">Make Work Public</a><a'+s.attr("href","/edit/"+e._id+"/settings",!0,!1)+' class="btn btn-default">Edit Privacy Settings</a></div><div class="modal-footer"><div class="pull-right"><a href="#" data-dismiss="modal" class="btn btn-default">Cancel</a></div></div></div></div></div>')},n.work_admin_manage_bar=function(e,i){this&&this.block,this&&this.attributes||{};o.push("<div"+s.cls(["work-admin-manage-bar",i?"manage-bar-modal":""],[null,!0])+"><p"+s.cls(["heading",i?"modal-heading":""],[null,!0])+'>Manage:</p><div class="feature-work"><div class="btn-group"><button type="button" data-toggle="dropdown" class="btn btn-default dropdown-toggle"><div class="glyphicon glyphicon-bookmark"></div><span class="button-text">Feature Work</span><span class="caret"></span></button><ul role="menu" class="dropdown-menu">');for(var n=0;n<l.groups.length;n++)if(null!==l.groups[n]._group&&"adm"===l.groups[n].role){if(o.push('<li><a href="#"'+s.attr("data-value",l.groups[n]._group._id,!0,!1)+' class="feature-group">'+s.escape(null==(t=l.groups[n]._group.name)?"":t)),"undefined"!=typeof e.featuredIn)for(var r=0;r<e.featuredIn.length;r++)if(l.groups[n]._group._id.toString()===e.featuredIn[r]._group.toString()){o.push('<div class="glyphicon glyphicon-ok"></div>');break}o.push("</a></li>")}if(o.push("</ul></div></div>"),null!=e.groups){for(var a=[],n=0;n<e.groups.length;n++)for(var r=0;r<l.groups.length;r++)null!==e.groups[n]._group&&null!==l.groups[r]._group&&"adm"===l.groups[r].role&&e.groups[n]._group._id.toString()===l.groups[r]._group._id.toString()&&a.push(e.groups[n]);if(a.length>0&&(1!==a.length||null!==a[0]._group)){o.push('<div id="adminRemoveWorkDropdown" class="remove-work"><div class="btn-group"><button type="button" data-toggle="dropdown" class="btn btn-default dropdown-toggle"><div class="glyphicon glyphicon-trash"></div><span class="button-text">Remove from Group</span><span class="caret"></span></button><ul role="menu" class="dropdown-menu">');for(var n=0;n<a.length;n++)null!==a[n]._group&&o.push('<li><a href="#"'+s.attr("data-value-groupId",a[n]._group._id,!0,!1)+' class="remove-from-group">'+(null==(t=a[n]._group.name)?"":t)+"</a></li>");o.push("</ul></div></div>")}}o.push("</div>")},n.recruiter_toolbar=function(e,i,n){this&&this.block,this&&this.attributes||{};if("undefined"!=typeof n&&"undefined"!=typeof n._id){var r,a,l=n._id;"work"===i?(r="Work",a="Works"):"student"===i&&(r="Student",a="Students");for(var d=!1,h=null!=e.bookmarks&&null!=e.bookmarks[i]?e.bookmarks[i]:[],p=0;p<h.length;p++)if(h[p]&&h[p].toString()===l.toString()){d=!0;break}if(null!=e.roles&&-1!==e.roles.indexOf("recruiter")&&(null==c||e._id.toString()!==c._id.toString())){var r,a,f;"work"===i?(r="Work",a="Works",f="/gallery?recruiterFilters%5Bbookmarked%5D=bookmarked"):"student"===i&&(r="Person",a="People",f="/people?recruiterFilters%5Bbookmarked%5D=bookmarked");for(var d=!1,h=null!=e.bookmarks&&null!=e.bookmarks[i]?e.bookmarks[i]:[],p=0;p<h.length;p++)if(h[p]&&h[p].toString()===l.toString()){d=!0;break}o.push('<div id="recruiter-toolbar">Recruiter Options:<input id="bookmark-this" type="checkbox"'+s.attr("checked",d===!0?"checked":u,!0,!1)+'/><label for="bookmark-this" type="button" class="bookmark-btn"><span class="not-bookmarked-hover">   ✓ Bookmark this '+s.escape(null==(t=r)?"":t)+'</span><span class="not-bookmarked">   Bookmark this '+s.escape(null==(t=r)?"":t)+'</span><span class="bookmarked-hover">   Unbookmark</span><span class="bookmarked">   ✓ Bookmarked</span></label><button type="button" class="bookmark-btn list-bookmarks">'+s.escape(null==(t=a)?"":t)+' I\'ve Bookmarked</button></div><script type="text/javascript" src="//code.jquery.com/jquery.min.js"></script><script>// Move content down so it\'s not eclipsed by the toolbar\n$(document).ready(function(){\n  $("#content-no-container").css(\'padding-top\', $("#recruiter-toolbar").innerHeight());\n  $("#student-view-scroll-header").css(\'top\', $("#layout-topbar").height());\n});\n\n// Bind redirect to "... I\'ve bookmarked" button\n$("#recruiter-toolbar button").on("click",function(){\n  location.href="'+s.escape(null==(t=f)?"":t)+'"\n})\n\n// Bind events to the bookmark button\n$("#recruiter-toolbar input[type=\'checkbox\']").on("click",function(){\n  var url = "/users/'+s.escape(null==(t=e._id)?"":t)+"/bookmarks/"+s.escape(null==(t=l)?"":t)+"?type="+s.escape(null==(t=i)?"":t)+'"\n  if ($(this).is(":checked")){\n    $.ajax({type: "POST", url: url});\n  } else {\n    $.ajax({type: "DELETE", url: url});\n  }\n});</script>')}}},n.work_view=function(a,c,g,b){this&&this.block,this&&this.attributes||{};"undefined"!=typeof d&&null!=d||(d=a.collaboratorsMinusMe),o.push("<data"+s.attr("value",i(r.stringify(a)),!0,!1)+' class="work-view-preload"></data><data'+s.attr("value",b,!0,!1)+' class="work-view-action"></data>'),(h||a.own)&&o.push('<data id="work-owner" value="true"></data>'),p=null==a._id?u:a._id.toString();var w=!1;if("undefined"!=typeof l.groups)for(f=0;f<l.groups.length;f++)if("adm"===l.groups[f].role){w=!0;break}n.like_window(a.likes,p),n.groups_list_modal(a.groups,p),!h&&!a.own||a.visibTo.all||n.make_public_modal(a),o.push('<div data-kine-section="work-view"'+s.cls(["work-view",g?"preview":""],[null,!0])+">"),c&&n.recruiter_toolbar(l,"work",a),o.push('<div class="row">'),w&&!g&&n.work_admin_manage_bar(a,c),c&&o.push('<a data-dismiss="modal" class="close">&times;</a>'),o.push('<div class="col-md-8"><div class="work-header"><h1><a'+s.attr("href","/w/"+a.url_id+"/"+a.slug,!0,!1)+">"+s.escape(null==(t=a.title)?"":t)+'</a></h1><div class="work-header-info-icons">'),null!=a.groups&&"undefined"!=typeof a.escapedGroupNames&&a.escapedGroupNames.length&&o.push('<div data-html="data-html" data-placement="bottom"'+s.attr("title","Appears in:<br />"+a.escapedGroupNames.join("<br />"),!0,!1)+s.attr("data-id",p,!0,!1)+' data-toggle="modal"'+s.attr("data-target","#groups-list-modal-"+p,!0,!1)+' class="work-stats-groups"><div data-icon="m"></div></div>'),n.work_privacy_icon(a),o.push('</div></div><div class="work-content"><div class="work-description">'),a.descriptionHtml?o.push("<p>"+(null==(t=a.descriptionHtml)?"":t)+"</p>"):o.push("<p>"+s.escape(null==(t=a.description)?"":t)+"</p>"),o.push("</div>");var k=!1;if(o.push('<div class="work-skills">'),a.workSkills&&a.workSkills.length>0&&function(){var e=a.workSkills;if("number"==typeof e.length)for(var i=0,n=e.length;n>i;i++){var r=e[i];o.push("<p>"+s.escape(null==(t=r.description)?"":t)+"</p>")}else{var n=0;for(var i in e){n++;var r=e[i];o.push("<p>"+s.escape(null==(t=r.description)?"":t)+"</p>")}}}.call(this),o.push('</div><div class="work-attachments"><ul>'),a.attachments&&function(){var e=a.attachments;if("number"==typeof e.length)for(var t=0,i=e.length;i>t;t++){var s=e[t];s.hidden?k=!0:(o.push("<li>"),n.work_view_attachment(s),o.push("</li>"))}else{var i=0;for(var t in e){i++;var s=e[t];s.hidden?k=!0:(o.push("<li>"),n.work_view_attachment(s),o.push("</li>"))}}}.call(this),o.push("</ul></div>"),k&&(o.push('<div class="btn show-hidden-attachments btn-default btn-block"><i class="icon-lock-dark"></i>View Hidden Attachments</div><div style="display: none;" class="work-hidden-attachments"><h3><i class="icon-lock-dark"></i>Hidden Attachments&nbsp;<span>(only you can view these)</span></h3><ul>'),function(){var e=a.attachments;if("number"==typeof e.length)for(var t=0,i=e.length;i>t;t++){var s=e[t];s.hidden&&(o.push("<li>"),n.work_view_attachment(s),o.push("</li>"))}else{var i=0;for(var t in e){i++;var s=e[t];s.hidden&&(o.push("<li>"),n.work_view_attachment(s),o.push("</li>"))}}}.call(this),o.push("</ul></div>")),o.push("</div>"),e.isArray(a.discussions)&&a.discussions.length>0&&(o.push('<ul class="work-discussions">'),function(){var e=a.discussions;if("number"==typeof e.length)for(var t=0,i=e.length;i>t;t++){var s=e[t];o.push("<li>"),n.discussion(s,h,{open:0===t,work:a}),o.push("</li>")}else{var i=0;for(var t in e){i++;var s=e[t];o.push("<li>"),n.discussion(s,h,{open:0===t,work:a}),o.push("</li>")}}}.call(this),o.push("</ul>")),(h||a.own)&&e.isArray(a.conversations)&&a.conversations.length>0&&(o.push('<div class="work-view-private-feedback work-bottom-section"><h3 data-toggle="collapse"'+s.attr("data-target","#work-"+p+"-private-feedback-collapse",!0,!1)+'><i class="icon-lock-dark"></i>Private Feedback<span class="pull-right caret"></span></h3><div'+s.attr("id","work-"+p+"-private-feedback-collapse",!0,!1)+' class="collapse work-bottom-section-collapse"><div class="work-bottom-section-subwindow clearfix"><div class="work-bottom-section-subwindow-scroll-up">Scroll Up</div><ul class="work-bottom-section-media-list work-private-feedback-list">'),function(){var e=a.conversations;if("number"==typeof e.length)for(var t=0,i=e.length;i>t;t++){var s=e[t];o.push("<li>"),n.work_conversation_listing(s,h||l._id.toString()===s._author._id.toString(),{body:!1}),o.push("</li>")}else{var i=0;for(var t in e){i++;var s=e[t];o.push("<li>"),n.work_conversation_listing(s,h||l._id.toString()===s._author._id.toString(),{body:!1}),o.push("</li>")}}}.call(this),o.push("</ul></div></div></div>")),o.push('</div><div class="col-md-4 work-sidebar"><div class="work-stats-mobile visible-xs visible-sm clearfix">'),n.work_view_stats({tooltip:!1,editButton:!0}),o.push("</div>"),n.work_view_stats.call({attributes:{"class":"hidden-xs hidden-sm"}},{tooltip:!0}),!g&&a.published){if(o.push('<div class="work-action-share-and-feedback"><div class="work-action-share">'),!h&&!a.own||a.visibTo.all?a.visibTo.all||o.push('<div data-toggle="tooltip" title="This work is not publicly viewable." class="work-action-share-tooltip"><div tabindex="0" data-enter-click="true" class="btn btn-default disabled"><div class="glyphicon glyphicon-plus"></div> Share</div></div>'):o.push('<div data-toggle="modal" tabindex="0" data-enter-click="true"'+s.attr("data-target","#make-public-modal-"+a._id,!0,!1)+' class="btn btn-default"><div class="glyphicon glyphicon-plus"></div> Share</div>'),o.push("</div>"),h||a.own)o.push('<div class="work-view-private-feedback-action work-view-request-feedback"><a tabindex="0" data-enter-click="true" class="btn btn-default btn-block"><div class="glyphicon glyphicon-transfer"></div>&nbsp;Request Feedback</a></div>');else if(l&&l._id)o.push('<div class="work-view-private-feedback-action work-view-give-feedback"><a tabindex="0" data-enter-click="true" class="btn btn-default btn-block"><div class="glyphicon glyphicon-transfer"></div>&nbsp;Give Private Feedback</a></div>');else{o.push('<div class="work-view-private-feedback-action">');var y=[];a.collaborators.forEach(function(e){y.push(e._student._id.toString())}),o.push('<a tabindex="0" data-enter-click="true"'+s.attr("href","/login?redirect=/w/"+a.url_id+"/"+a.slug+"&action=feedback&target="+r.stringify(y)+"&_work="+a._id,!0,!1)+' class="btn btn-default btn-block"><div class="glyphicon glyphicon-transfer"></div>&nbsp;Give Private Feedback</a></div>')}o.push("</div>")}o.push('<div class="work-collaborators"><h3>Collaborators</h3>'),l&&l._id&&e.isArray(d)&&0===d.length||(o.push('<div class="row work-collaborator-actions"><div class="col-xs-6"><div class="btn-group btn-block"><button type="button" data-toggle="dropdown" name="dropdown" class="btn btn-default dropdown-toggle btn-block"><i class="icon-messages"></i>Message<span class="caret"></span></button><ul class="dropdown-menu">'),e.isArray(d)&&d.length>1&&o.push('<li><a href="#" class="message-all">All</a></li>'),function(){var e=a.collaborators;if("number"==typeof e.length)for(var i=0,n=e.length;n>i;i++){var r=e[i];m=r._student._id.toString(),l&&l._id&&l._id.toString()?m!==l._id.toString()&&o.push("<li><a"+s.attr("data-user-id",m,!0,!1)+' href="#" class="message-user">'+s.escape(null==(t=r._student.fullName)?"":t)+"</a></li>"):o.push("<li><a"+s.attr("href","/login?redirect=/w/"+a.url_id+"/"+a.slug+'&target=["'+m+'"]&action=message',!0,!1)+">"+s.escape(null==(t=r._student.fullName)?"":t)+"</a></li>")}else{var n=0;for(var i in e){n++;var r=e[i];m=r._student._id.toString(),l&&l._id&&l._id.toString()?m!==l._id.toString()&&o.push("<li><a"+s.attr("data-user-id",m,!0,!1)+' href="#" class="message-user">'+s.escape(null==(t=r._student.fullName)?"":t)+"</a></li>"):o.push("<li><a"+s.attr("href","/login?redirect=/w/"+a.url_id+"/"+a.slug+'&target=["'+m+'"]&action=message',!0,!1)+">"+s.escape(null==(t=r._student.fullName)?"":t)+"</a></li>")}}}.call(this),o.push('</ul></div></div><div class="col-xs-6"><div class="btn-group btn-block"><button type="button" data-toggle="dropdown" name="dropdown" class="btn btn-primary dropdown-toggle btn-block"><i class="icon-follow"></i>Follow<span class="caret"></span></button><ul class="dropdown-menu pull-right">'),e.isArray(d)&&d.length>1&&o.push('<li><a href="#" class="follow-all">All<span class="glyphicon glyphicon-ok follow-status"></span><img'+s.attr("src",v("/img/ajax-loader-small.gif"),!0,!1)+' alt="Loading" class="loader follow-status"/></a></li>'),function(){var e=a.collaborators;if("number"==typeof e.length)for(var i=0,n=e.length;n>i;i++){var r=e[i];m=r._student._id.toString(),l&&l._id&&l._id.toString()?m!==l._id.toString()&&o.push("<li><a"+s.attr("data-id",m,!0,!1)+' href="#" class="follow-user">'+s.escape(null==(t=r._student.fullName)?"":t)+'<span class="glyphicon glyphicon-ok follow-status"></span><img'+s.attr("src",v("/img/ajax-loader-small.gif"),!0,!1)+' alt="Loading" class="loader follow-status"/></a></li>'):o.push("<li><a"+s.attr("href","/login?redirect=/"+r._student.username+"&action=follow&target="+m,!0,!1)+">"+s.escape(null==(t=r._student.fullName)?"":t)+"</a></li>")}else{var n=0;for(var i in e){n++;var r=e[i];m=r._student._id.toString(),l&&l._id&&l._id.toString()?m!==l._id.toString()&&o.push("<li><a"+s.attr("data-id",m,!0,!1)+' href="#" class="follow-user">'+s.escape(null==(t=r._student.fullName)?"":t)+'<span class="glyphicon glyphicon-ok follow-status"></span><img'+s.attr("src",v("/img/ajax-loader-small.gif"),!0,!1)+' alt="Loading" class="loader follow-status"/></a></li>'):o.push("<li><a"+s.attr("href","/login?redirect=/"+r._student.username+"&action=follow&target="+m,!0,!1)+">"+s.escape(null==(t=r._student.fullName)?"":t)+"</a></li>")}}}.call(this),o.push("</ul></div></div></div>")),o.push("<ul>"),function(){var e=a.collaborators;if("number"==typeof e.length)for(var i=0,n=e.length;n>i;i++){var r=e[i];o.push('<li class="work-collaborator clearfix"><a'+s.attr("href","/"+r._student.username,!0,!1)+' class="profile-photo pull-left"><img'+s.attr("src",r._student.profilePhotoPath,!0,!1)+s.attr("alt",r._student.fullName,!0,!1)+' class="work-collaborator-profile-photo"/></a><div class="work-collaborator-info"><h4><a'+s.attr("href","/"+r._student.username,!0,!1)+' class="name">'+s.escape(null==(t=r._student.fullName)?"":t)+"</a>"),r.position&&o.push('<span>&nbsp;/ </span><span class="position">'+s.escape(null==(t=r.position)?"":t)+"</span>"),o.push("</h4>"),null!=r._student.highlightContent?"experience"===r._student.highlightContent.highlightType?o.push('<h5 class="university">'+s.escape(null==(t=r._student.highlightContent.jobTitle)?"":t)+"&nbsp;-&nbsp;"+s.escape(null==(t=r._student.highlightContent.org)?"":t)+"</h5>"):"education"===r._student.highlightContent.highlightType&&o.push('<h5 class="university">'+s.escape(null==(t=r._student.highlightContent.org)?"":t)+"</h5>"):null!=r._student.education&&function(){var e=r._student.education;if("number"==typeof e.length)for(var i=0,n=e.length;n>i;i++){var a=e[i];a.current&&o.push('<h5 class="university">'+s.escape(null==(t=a.university)?"":t)+"</h5>")}else{var n=0;for(var i in e){n++;var a=e[i];a.current&&o.push('<h5 class="university">'+s.escape(null==(t=a.university)?"":t)+"</h5>")}}}.call(this),o.push("</div>"),r.contributionHtml?o.push('<div class="contribution">'+(null==(t=r.contributionHtml)?"":t)+"</div>"):r.contribution&&o.push('<div class="contribution">'+s.escape(null==(t=r.contribution)?"":t)+"</div>"),o.push("</li>")}else{var n=0;for(var i in e){n++;var r=e[i];o.push('<li class="work-collaborator clearfix"><a'+s.attr("href","/"+r._student.username,!0,!1)+' class="profile-photo pull-left"><img'+s.attr("src",r._student.profilePhotoPath,!0,!1)+s.attr("alt",r._student.fullName,!0,!1)+' class="work-collaborator-profile-photo"/></a><div class="work-collaborator-info"><h4><a'+s.attr("href","/"+r._student.username,!0,!1)+' class="name">'+s.escape(null==(t=r._student.fullName)?"":t)+"</a>"),r.position&&o.push('<span>&nbsp;/ </span><span class="position">'+s.escape(null==(t=r.position)?"":t)+"</span>"),o.push("</h4>"),null!=r._student.highlightContent?"experience"===r._student.highlightContent.highlightType?o.push('<h5 class="university">'+s.escape(null==(t=r._student.highlightContent.jobTitle)?"":t)+"&nbsp;-&nbsp;"+s.escape(null==(t=r._student.highlightContent.org)?"":t)+"</h5>"):"education"===r._student.highlightContent.highlightType&&o.push('<h5 class="university">'+s.escape(null==(t=r._student.highlightContent.org)?"":t)+"</h5>"):null!=r._student.education&&function(){
var e=r._student.education;if("number"==typeof e.length)for(var i=0,n=e.length;n>i;i++){var a=e[i];a.current&&o.push('<h5 class="university">'+s.escape(null==(t=a.university)?"":t)+"</h5>")}else{var n=0;for(var i in e){n++;var a=e[i];a.current&&o.push('<h5 class="university">'+s.escape(null==(t=a.university)?"":t)+"</h5>")}}}.call(this),o.push("</div>"),r.contributionHtml?o.push('<div class="contribution">'+(null==(t=r.contributionHtml)?"":t)+"</div>"):r.contribution&&o.push('<div class="contribution">'+s.escape(null==(t=r.contribution)?"":t)+"</div>"),o.push("</li>")}}}.call(this),o.push("</ul></div>"),a.dateString&&o.push('<div class="work-dates"><h3>Dates</h3><p>'+s.escape(null==(t=a.dateString)?"":t)+"</p></div>"),e.isArray(a.categories)&&a.categories.length>0&&(o.push('<div class="work-categories"><h3>Categories</h3>'),function(){var e=a.categories;if("number"==typeof e.length)for(var i=0,n=e.length;n>i;i++){var r=e[i];o.push("<span>"+s.escape(null==(t=r)?"":t)+"</span>"),i<a.categories.length-1&&o.push("<span>, </span>")}else{var n=0;for(var i in e){n++;var r=e[i];o.push("<span>"+s.escape(null==(t=r)?"":t)+"</span>"),i<a.categories.length-1&&o.push("<span>, </span>")}}}.call(this),o.push("</div>")),e.isArray(a.tags)&&a.tags.length>0&&(o.push('<div class="work-tags"><h3>Tags</h3><p><i class="icon-tags"></i>'),function(){var e=a.tags;if("number"==typeof e.length)for(var i=0,n=e.length;n>i;i++){var r=e[i];o.push("<a"+s.attr("href","/gallery/t/"+r,!0,!1)+">"+s.escape(null==(t=r)?"":t)+"</a>"),i<a.tags.length-1&&o.push("<span>, </span>")}else{var n=0;for(var i in e){n++;var r=e[i];o.push("<a"+s.attr("href","/gallery/t/"+r,!0,!1)+">"+s.escape(null==(t=r)?"":t)+"</a>"),i<a.tags.length-1&&o.push("<span>, </span>")}}}.call(this),o.push("</p></div>")),o.push('<div class="work-last-updated"><h3>Last Updated At</h3><time>'+s.escape(null==(t=a.updatedAt)?"":t)+'</time></div><div class="sidebar-footer"></div></div><div class="work-view-actions-desktop work-view-actions visible-md visible-lg"><div class="work-action-buttons">'),(h||a.own)&&o.push('<a href="#" tabindex="0" data-enter-click="true" class="work-action-edit btn btn-primary"><div data-icon="d"></div><span>&nbsp;Edit</span></a>'),o.push("</div></div></div></div>")},n.work_view_attachment=function(e){this&&this.block,this&&this.attributes||{};g=e.type,"file"===g&&(g=null!=e.meta&&null!=e.meta.box&&null!=e.meta.box.id?"box":e.meta&&e.meta.crocodoc&&e.meta.crocodoc.uuid?"crocodoc":e.meta&&e.meta.wistia&&e.meta.wistia.hashedId?"video":"image"),o.push("<div"+s.cls(["attachment",g],[null,!0])+">"),e.html&&o.push(null==(t=e.html.o)?"":t),e.caption&&o.push('<div class="caption">'+s.escape(null==(t=e.caption)?"":t)+'<div class="hide-caption">&times;</div></div>'),"crocodoc"===g&&o.push('<div class="fullscreen">Fullscreen</div>'),o.push("</div>")},n.work_view_likes=function(e){this&&this.block,this&&this.attributes||{};p&&(o.push('<div class="likes"><div'+s.attr("data-target",p,!0,!1)+' tabindex="0" data-enter-click="true" class="work-action-like"></div>'),e?o.push('<h3 data-placement="bottom" data-html="data-html"'+s.attr("title",""+b.escapedLikeNames.join("<br />"),!0,!1)+' data-toggle="modal"'+s.attr("data-target","#like-window-"+p,!0,!1)+' class="likes-tooltip"><span class="work-stats-like-count">'+s.escape(null==(t=b.likeCount)?"":t)+'</span><span class="work-stats-text"> likes</span></h3>'):o.push('<h3><span class="work-stats-like-count">'+s.escape(null==(t=b.likeCount)?"":t)+'</span><span class="work-stats-text"> likes</span></h3>'),o.push("</div>"))},n.work_view_stats=function(e){var i=(this&&this.block,this&&this.attributes||{});"undefined"==typeof e&&(e={tooltip:!1,editButton:!1}),o.push("<div"+s.cls(["work-stats",i["class"]],[null,!0])+'><div class="views"><h3>'+s.escape(null==(t=b.viewCount)?"":t)+'<span class="work-stats-text"> views</span></h3></div>'),b.likeCount>0?n.work_view_likes(e.tooltip):(b.likeCount=0,n.work_view_likes(!1)),b.own&&e.editButton&&o.push('<div class="work-action-edit btn btn-primary pull-right"><div data-icon="d"></div>&nbsp;Edit</div>'),o.push("</div>")},n.work_view(b,w,k,y)}.call(this,"Array"in r?r.Array:"undefined"!=typeof Array?Array:void 0,"encodeURI"in r?r.encodeURI:"undefined"!=typeof encodeURI?encodeURI:void 0,"JSON"in r?r.JSON:"undefined"!=typeof JSON?JSON:void 0,"collapse_id"in r?r.collapse_id:"undefined"!=typeof collapse_id?collapse_id:void 0,"user"in r?r.user:"undefined"!=typeof user?user:void 0,"student"in r?r.student:"undefined"!=typeof student?student:void 0,"undefined"in r?r.undefined:void 0,"collaboratorsMinusMe"in r?r.collaboratorsMinusMe:"undefined"!=typeof collaboratorsMinusMe?collaboratorsMinusMe:void 0,"own"in r?r.own:"undefined"!=typeof own?own:void 0,"workId"in r?r.workId:"undefined"!=typeof workId?workId:void 0,"i"in r?r.i:"undefined"!=typeof i?i:void 0,"_collaborator"in r?r._collaborator:"undefined"!=typeof _collaborator?_collaborator:void 0,"assetPath"in r?r.assetPath:"undefined"!=typeof assetPath?assetPath:void 0,"type"in r?r.type:"undefined"!=typeof type?type:void 0,"work"in r?r.work:"undefined"!=typeof work?work:void 0,"modal"in r?r.modal:"undefined"!=typeof modal?modal:void 0,"preview"in r?r.preview:"undefined"!=typeof preview?preview:void 0,"action"in r?r.action:"undefined"!=typeof action?action:void 0),o.join("")}},{jade:"jade"}],"/opt/seelio/public_src/main/works/view.coffee":[function(e,t,o){var i,s,n,r,a,l,c,u,d,h,p,f,m,v,g,b,w,k,y,_,C,S,x,T,j;i=e("jquery"),n=e("backbone"),w=e("qs"),h=e("lib/backboneUtils"),l=e("models/work"),u=e("mixins/works/view"),c=e("mixins/works/cover_selector"),r=e("templates/works/bottom_bar"),s=e("templates/works/back_to_skills_popup"),f=e("lib/seelio-flash"),j=e("underscore"),k=e("lib/seelio-session"),C=void 0,x=void 0,S=void 0,T=void 0,p=!1,m=!1,b=void 0,g=!1,y=void 0,a=function(e){var t,o,i,s;for(o=window.location.search.substring(1),s=o.split("&"),t=0;t<s.length;){if(i=s[t].split("="),i[0]===e)return i[1];t++}},v=function(){var e,t,o,s,n,a,l,u,d;return s=function(){return i.ajax({url:"/works",data:{params:{"collaborators._student":d},options:{limit:0}},dataType:"json"}).done(function(o,s,n){var r;return i(".work-bottom-bar-items").css("display","inherit"),r=o.data,S=new c({el:".work-cover-selector-wrap",works:r}),S.on("work-select",_),S.on("keydown",function(){return e()}),t(),window.onresize=t,i(".list").animate({bottom:"+=17px"}),i(".list-background").animate({bottom:"+=17px"})}).fail(function(e,t,o){return console.log("Works get failed")})},l=void 0,d=void 0,void 0===y?(d=C.get("creator")._student._id,n=r({student:C.get("creator")._student}),i(".list-wrap").html(n),s()):(u=y,i.ajax({url:"/students",data:{params:{username:u}},dataType:"json"}).done(function(e,t,o){return l=e[0],d=l._id,n=r({student:l}),i(".list-wrap").html(n),s()}).fail(function(e,t,o){return console.log("Student get failed")})),i(window).scroll(function(){return i(window).scrollTop()+i(window).height()>=i(document).height()-20?a():m||g?void 0:o()}),e=function(){return clearTimeout(b),g=!0,a(),b=setTimeout(function(){return m||o(),g=!1},2500)},a=function(){return i("#worksTooltip").tooltip("destroy"),i(".list-background").css("bottom","0px"),i(".list").css("bottom","0px"),i(".view-more").fadeOut(),p=!0},o=function(){return i("#worksTooltip").tooltip(),i(".list-background").css("bottom","-92px"),i(".list").css("bottom","-92px"),i(".view-more").fadeIn().css("display","inline-flex"),p=!1},i(".list-wrap").on({mouseenter:function(){return a(),m=!0},mouseleave:function(){return m=!1,i(window).scrollTop()+i(window).height()!==i(document).height()?o():void 0}}),i.fn.hasScrollBar=function(){return this.get(0).scrollWidth>this.width()},t=function(){return i(".work-cover-selector").hasScrollBar()?(i(".cover-selector-left").css("display","inline"),i(".cover-selector-right").css("display","inline")):(i(".cover-selector-left").css("display","none"),i(".cover-selector-right").css("display","none"))}},d=n.Router.extend({initialize:function(e){var t;return t=this},routes:{"w/:url_id/:slug":"updateView"},updateView:function(e,t){return C=j.find(S.works,function(t){return t.url_id===e}),null==C&&(window.location=window.location.href),S.selectWork(C)},navigateToWork:function(e,t){return void 0===y?T.navigate("w/"+e.url_id+"/"+e.slug,t):T.navigate("w/"+e.url_id+"/"+e.slug+"?student="+y,t)}}),_=function(e){return"true"===i("#work-owner").attr("value")&&(e.own=!0),T.navigateToWork(e,{trigger:!1}),e=new l(e),x.updateModel(e,{render:!0,button_classes:"btn btn-default"}),i(window).scrollTop(0)},i(function(){var e,t,o,n,r;""!==window.location.search&&(t=w.parse(window.location.search.substr(1))),o=!!((null!=t?t.backToSkills:void 0)||(null!=t?t.mapId:void 0)),n=null!=t?t.mapId:void 0,r=i(".work-data"),r=jQuery.makeArray(r),C=i(".work-view-preload").attr("value"),C=decodeURI(C);try{C=JSON.parse(C)}catch(c){e=c,f.error("Oops! There was a problem loading this work.")}return y=a("student"),C=new l(C),x=new u({el:"#work-view",pageType:"Work View",model:C,fromProfile:y}),T=new d,1!==C.attributes.collaborators.length&&null==y||C.attributes.published===!1||"false"===y||v(),o&&(i("body").append(s()),k.userData.mapId?i("a.btn.work-view__back-to-skills-popup--desktop__btn").attr("href","/skills/map/"+k.userData.mapId):i("a.btn.work-view__back-to-skills-popup--desktop__btn").attr("href","/skills")),h.historyStart({silent:!0})})},{backbone:"backbone",jquery:"jquery","lib/backboneUtils":"/opt/seelio/node_modules/lib/backboneUtils.coffee","lib/seelio-flash":"/opt/seelio/node_modules/lib/seelio-flash.coffee","lib/seelio-session":"/opt/seelio/node_modules/lib/seelio-session.coffee","mixins/works/cover_selector":"/opt/seelio/node_modules/mixins/works/cover_selector.coffee","mixins/works/view":"/opt/seelio/node_modules/mixins/works/view.coffee","models/work":"/opt/seelio/node_modules/models/work.coffee",qs:"/opt/seelio/node_modules/qs/index.js","templates/works/back_to_skills_popup":"/opt/seelio/node_modules/templates/works/back_to_skills_popup.js","templates/works/bottom_bar":"/opt/seelio/node_modules/templates/works/bottom_bar.js",underscore:"underscore"}]},{},["/opt/seelio/public_src/main/works/view.coffee"]);